This file is a merged representation of the entire codebase, combined into a single document by Repomix.

<file_summary>
This section contains a summary of this file.

<purpose>
This file contains a packed representation of the entire repository's contents.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.
</purpose>

<file_format>
The content is organized as follows:
1. This summary section
2. Repository information
3. Directory structure
4. Repository files, each consisting of:
  - File path as an attribute
  - Full contents of the file
</file_format>

<usage_guidelines>
- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.
</usage_guidelines>

<notes>
- Some files may have been excluded based on .gitignore rules and Repomix's configuration
- Binary files are not included in this packed representation. Please refer to the Repository Structure section for a complete list of file paths, including binary files
- Files matching patterns in .gitignore are excluded
- Files matching default ignore patterns are excluded
- Files are sorted by Git change count (files with more changes are at the bottom)
</notes>

<additional_info>

</additional_info>

</file_summary>

<directory_structure>
.github/
  workflows/
    create-branch.yml
    issue-autolink.yml
    lint.yml
    release-please.yml
  FUNDING.yml
  issue-branch.yml
  pull_request_template.md
.husky/
  commit-msg
  post-merge
  pre-commit
public/
  favicon/
    site.webmanifest
  svg/
    Logo.svg
    Vercel.svg
src/
  __mocks__/
    svg.tsx
  __tests__/
    pages/
      HomePage.test.tsx
  components/
    buttons/
      Button.tsx
      IconButton.tsx
      TextButton.tsx
    home/
      Hero.tsx
      HomePageContent.tsx
      TournamentInfo.tsx
    layout/
      Footer.tsx
      Header.tsx
      Layout.tsx
    leaderboard/
      LeaderboardPageContent.tsx
      LeaderboardTable.tsx
      RealtimeNotification.tsx
      TeamRow.tsx
    links/
      ArrowLink.tsx
      ButtonLink.tsx
      IconLink.tsx
      PrimaryLink.tsx
      UnderlineLink.tsx
      UnstyledLink.tsx
    scoreInput/
      ScoreInputForm.tsx
    scoring/
      HoleInput.tsx
      ScoreInputForm.tsx
    ui/
      select.tsx
    NextImage.tsx
    Skeleton.tsx
  constant/
    config.ts
    env.ts
  lib/
    __tests__/
      og.test.ts
    env.ts
    helper.ts
    logger.ts
    og.ts
    scoreFormatters.ts
    supabaseQueries.ts
    useScoreSubmission.ts
    utils.ts
  pages/
    api/
      scores/
        submit.ts
    tournament/
      [type].tsx
    _app.tsx
    index.tsx
    LeaderboardPage.tsx
    ScoreInputPage.tsx
  styles/
    colors.css
    globals.css
  types/
    supabase.ts
  utils/
    supabase-client.ts
supabase/
  migrations/
    20231121000000_golf_tournament_schema.sql
    20231121000001_sample_data.sql
    20231121000001_tournament_teams.sql
  README.md
.eslintrc.js
.gitignore
.npmrc
.nvmrc
.prettierignore
.prettierrc.js
CHANGELOG.md
commitlint.config.js
components.json
jest.config.js
jest.setup.js
next-sitemap.config.js
next.config.js
package.json
postcss.config.js
README.md
tailwind.config.js
tailwind.config.ts
tsconfig.json
vercel.json
</directory_structure>

<files>
This section contains the contents of the repository's files.

<file path=".github/workflows/create-branch.yml">
name: Create Branch from Issue

on:
  issues:
    types: [assigned]

jobs:
  create_issue_branch_job:
    runs-on: ubuntu-latest
    steps:
      - name: Create Issue Branch
        uses: robvanderleek/create-issue-branch@main
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
</file>

<file path=".github/workflows/release-please.yml">
name: release-please
on:
  # !STARTERCONF Choose your preferred event
  # !Option 1: Manual Trigger from GitHub
  workflow_dispatch:
  # !Option 2: Release on every push on main branch
  # push:
  #   branches:
  #     - main
jobs:
  release-please:
    runs-on: ubuntu-latest
    steps:
      - uses: google-github-actions/release-please-action@v3
        with:
          release-type: node
          package-name: release-please-action
</file>

<file path=".github/FUNDING.yml">
# !STARTERCONF You can delete this file :) Your support is much appreciated!
# These are supported funding model platforms

github: theodorusclarence
patreon: # Replace with a single Patreon username
open_collective: # Replace with a single Open Collective username
ko_fi: # Replace with a single Ko-fi username
tidelift: # Replace with a single Tidelift platform-name/package-name e.g., npm/babel
community_bridge: # Replace with a single Community Bridge project-name e.g., cloud-foundry
liberapay: # Replace with a single Liberapay username
issuehunt: # Replace with a single IssueHunt username
otechie: # Replace with a single Otechie username
lfx_crowdfunding: # Replace with a single LFX Crowdfunding project-name e.g., cloud-foundry
custom: ['https://saweria.co/theodorusclarence']
</file>

<file path=".github/issue-branch.yml">
# https://github.com/robvanderleek/create-issue-branch#option-2-configure-github-action

# ex: i4-lower_camel_upper
branchName: 'i${issue.number}-${issue.title,}'
branches:
  - label: epic
    skip: true
  - label: debt
    skip: true
</file>

<file path=".github/pull_request_template.md">
# Description & Technical Solution

Describe problems, if any, clearly and concisely.
Summarize the impact to the system.
Please also include relevant motivation and context.
Please include a summary of the technical solution and how it solves the problem.

# Checklist

- [ ] I have commented my code, particularly in hard-to-understand areas.
- [ ] Already rebased against main branch.

# Screenshots

Provide screenshots or videos of the changes made if any.
</file>

<file path=".husky/commit-msg">
#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

npx --no-install commitlint --edit "$1"
</file>

<file path=".husky/pre-commit">
#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

npx lint-staged
</file>

<file path="public/favicon/site.webmanifest">
{
  "name": "",
  "short_name": "",
  "icons": [
    {
      "src": "/favicon/android-chrome-192x192.png",
      "sizes": "192x192",
      "type": "image/png"
    },
    {
      "src": "/favicon/android-chrome-512x512.png",
      "sizes": "512x512",
      "type": "image/png"
    }
  ],
  "theme_color": "#ffffff",
  "background_color": "#ffffff",
  "display": "standalone"
}
</file>

<file path="public/svg/Vercel.svg">
<svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Vercel</title><path d="M24 22.525H0l12-21.05 12 21.05z"/></svg>
</file>

<file path="src/constant/env.ts">
export const isProd = process.env.NODE_ENV === 'production';
export const isLocal = process.env.NODE_ENV === 'development';

export const showLogger = isLocal
  ? true
  : process.env.NEXT_PUBLIC_SHOW_LOGGER === 'true' ?? false;
</file>

<file path="src/lib/logger.ts">
/* eslint-disable no-console */
import { showLogger } from '@/constant/env';

/**
 * A logger function that will only logs on development
 * @param object - The object to log
 * @param comment - Autogenerated with `lg` snippet
 */
export default function logger(object: unknown, comment?: string): void {
  if (!showLogger) return;

  console.log(
    '%c ============== INFO LOG \n',
    'color: #22D3EE',
    `${typeof window !== 'undefined' && window?.location.pathname}\n`,
    `=== ${comment ?? ''}\n`,
    object
  );
}
</file>

<file path=".eslintrc.js">
module.exports = {
  env: {
    browser: true,
    es2021: true,
    node: true,
  },
  plugins: ['@typescript-eslint', 'simple-import-sort', 'unused-imports'],
  extends: [
    'eslint:recommended',
    'next',
    'next/core-web-vitals',
    'plugin:@typescript-eslint/recommended',
    'prettier',
  ],
  rules: {
    'no-unused-vars': 'off',
    'no-console': 'warn',
    '@typescript-eslint/explicit-module-boundary-types': 'off',
    'react/no-unescaped-entities': 'off',

    'react/display-name': 'off',
    'react/jsx-curly-brace-presence': [
      'warn',
      { props: 'never', children: 'never' },
    ],

    //#region  //*=========== Unused Import ===========
    '@typescript-eslint/no-unused-vars': 'off',
    'unused-imports/no-unused-imports': 'warn',
    'unused-imports/no-unused-vars': [
      'warn',
      {
        vars: 'all',
        varsIgnorePattern: '^_',
        args: 'after-used',
        argsIgnorePattern: '^_',
      },
    ],
    //#endregion  //*======== Unused Import ===========

    //#region  //*=========== Import Sort ===========
    'simple-import-sort/exports': 'warn',
    'simple-import-sort/imports': [
      'warn',
      {
        groups: [
          // ext library & side effect imports
          ['^@?\\w', '^\\u0000'],
          // {s}css files
          ['^.+\\.s?css$'],
          // Lib and hooks
          ['^@/lib', '^@/hooks'],
          // static data
          ['^@/data'],
          // components
          ['^@/components', '^@/container'],
          // zustand store
          ['^@/store'],
          // Other imports
          ['^@/'],
          // relative paths up until 3 level
          [
            '^\\./?$',
            '^\\.(?!/?$)',
            '^\\.\\./?$',
            '^\\.\\.(?!/?$)',
            '^\\.\\./\\.\\./?$',
            '^\\.\\./\\.\\.(?!/?$)',
            '^\\.\\./\\.\\./\\.\\./?$',
            '^\\.\\./\\.\\./\\.\\.(?!/?$)',
          ],
          ['^@/types'],
          // other that didnt fit in
          ['^'],
        ],
      },
    ],
    //#endregion  //*======== Import Sort ===========
  },
  globals: {
    React: true,
    JSX: true,
  },
};
</file>

<file path=".prettierrc.js">
module.exports = {
  arrowParens: 'always',
  singleQuote: true,
  jsxSingleQuote: true,
  tabWidth: 2,
  semi: true,
};
</file>

<file path="jest.setup.js">
import '@testing-library/jest-dom/extend-expect';

// Allow router mocks.
// eslint-disable-next-line no-undef
jest.mock('next/router', () => require('next-router-mock'));
</file>

<file path="next-sitemap.config.js">
/**
 * @type {import('next-sitemap').IConfig}
 * @see https://github.com/iamvishnusankar/next-sitemap#readme
 */
module.exports = {
  // !STARTERCONF Change the siteUrl
  /** Without additional '/' on the end, e.g. https://theodorusclarence.com */
  siteUrl: 'https://tsnext-tw.thcl.dev',
  generateRobotsTxt: true,
  robotsTxtOptions: {
    policies: [{ userAgent: '*', allow: '/' }],
  },
};
</file>

<file path="postcss.config.js">
module.exports = {
  plugins: {
    tailwindcss: {},
    autoprefixer: {},
  },
};
</file>

<file path="vercel.json">
{
  "headers": [
    {
      "source": "/fonts/inter-var-latin.woff2",
      "headers": [
        {
          "key": "Cache-Control",
          "value": "public, max-age=31536000, immutable"
        }
      ]
    }
  ]
}
</file>

<file path=".husky/post-merge">
#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

pnpm install
</file>

<file path="public/svg/Logo.svg">
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 36 36"><path fill="#FFAC33" d="M32.938 15.651C32.792 15.26 32.418 15 32 15H19.925L26.89 1.458c.219-.426.106-.947-.271-1.243C26.437.071 26.218 0 26 0c-.233 0-.466.082-.653.243L18 6.588 3.347 19.243c-.316.273-.43.714-.284 1.105S3.582 21 4 21h12.075L9.11 34.542c-.219.426-.106.947.271 1.243.182.144.401.215.619.215.233 0 .466-.082.653-.243L18 29.412l14.653-12.655c.317-.273.43-.714.285-1.106z"/></svg>
</file>

<file path="src/__mocks__/svg.tsx">
import React, { SVGProps } from 'react';

const SvgrMock = React.forwardRef<SVGSVGElement, SVGProps<SVGSVGElement>>(
  (props, ref) => <svg ref={ref} {...props} />
);

export const ReactComponent = SvgrMock;
export default SvgrMock;
</file>

<file path="src/__tests__/pages/HomePage.test.tsx">
// !STARTERCONF You should delete this page

import { render, screen } from '@testing-library/react';

import HomePage from '@/app/page';

describe('Homepage', () => {
  it('renders the Components', () => {
    render(<HomePage />);

    const heading = screen.getByText(/A starter for Next.js/i);

    expect(heading).toBeInTheDocument();
  });
});
</file>

<file path="src/components/home/Hero.tsx">
import Link from 'next/link';
import React from 'react';

export function Hero() {
  return (
    <section className='bg-[#0B3D2E] text-white py-16 md:py-24'>
      <div className='container mx-auto px-4'>
        <div className='max-w-3xl mx-auto text-center'>
          <h1 className='text-4xl md:text-5xl lg:text-6xl font-bold mb-6'>
            2023 Golf Tournament
          </h1>
          <p className='text-xl md:text-2xl mb-8'>
            June 15-17, 2023 • Pebble Creek Golf Club
          </p>
          <div className='flex flex-col sm:flex-row justify-center gap-4'>
            <Link
              href='/leaderboard'
              className='bg-white text-[#0B3D2E] px-6 py-3 rounded-md font-medium hover:bg-gray-100 transition-colors'
            >
              View Leaderboard
            </Link>
            <Link
              href='/register'
              className='bg-transparent border-2 border-white text-white px-6 py-3 rounded-md font-medium hover:bg-white/10 transition-colors'
            >
              Join Team
            </Link>
          </div>
        </div>
      </div>
    </section>
  );
}
</file>

<file path="src/components/layout/Footer.tsx">
import React from 'react';

export function Footer() {
  const currentYear = new Date().getFullYear();
  return (
    <footer className='bg-[#0B3D2E] text-white py-6'>
      <div className='container mx-auto px-4 text-center'>
        <p className='text-sm'>Golf Tournament App &copy; {currentYear}</p>
      </div>
    </footer>
  );
}
</file>

<file path="src/components/leaderboard/LeaderboardPageContent.tsx">
import React from 'react';

// Placeholder data structure for a team on the leaderboard
interface LeaderboardTeam {
  id: number;
  name: string;
  grossScore: number; // Relative to par, e.g., -2, 0, 5
  netScore: number; // Adjusted for handicap
  thru: string; // e.g., "9", "18", "F"
  mulligansRemaining: number;
  // Add expanded details later: holeScores, driveCounts, playerMulligans
}

const LeaderboardPageContent = () => {
  // Placeholder leaderboard data - replace with actual data fetching
  const leaderboardData: LeaderboardTeam[] = [
    {
      id: 1,
      name: 'Marc & Luke',
      grossScore: -2,
      netScore: -4,
      thru: '18',
      mulligansRemaining: 2,
    },
    {
      id: 2,
      name: 'Team Bogey',
      grossScore: 5,
      netScore: 5,
      thru: '15',
      mulligansRemaining: 4,
    },
    {
      id: 3,
      name: 'Fairway Friends',
      grossScore: 0,
      netScore: -1,
      thru: 'F',
      mulligansRemaining: 1,
    },
  ];

  // Function to determine score color
  const getScoreColor = (score: number): string => {
    if (score < 0) return 'text-green-500'; // Under par
    if (score > 0) return 'text-red-500'; // Over par
    return 'text-black'; // Even par
  };

  return (
    <div className='container mx-auto px-4 py-8'>
      <h1 className='text-4xl font-bold text-center mb-8 text-primary'>
        Leaderboard
      </h1>

      {/* Leaderboard Table/List - Placeholder */}
      <div className='bg-white shadow-md rounded-lg overflow-hidden'>
        {/* Header Row - Optional */}
        <div className='hidden md:flex bg-gray-200 text-gray-700 uppercase text-sm leading-normal'>
          <div className='py-3 px-6 text-left w-1/4'>Team</div>
          <div className='py-3 px-6 text-center w-1/4'>Gross</div>
          <div className='py-3 px-6 text-center w-1/4'>Net</div>
          <div className='py-3 px-6 text-center w-1/4'>Thru</div>
          <div className='py-3 px-6 text-center w-1/4'>Mulligans Left</div>
        </div>

        {/* Team Rows */}
        <div className='divide-y divide-gray-200'>
          {leaderboardData
            .sort((a, b) => a.grossScore - b.grossScore) // Sort by gross score
            .map((team) => (
              <div key={team.id} className='hover:bg-gray-50'>
                {/* Basic Row - Adapt for mobile and expansion */}
                <div className='flex flex-wrap md:flex-nowrap items-center py-4 px-6'>
                  <div className='w-full md:w-1/4 mb-2 md:mb-0 font-medium text-gray-800'>
                    {team.name}
                  </div>
                  <div
                    className={`w-1/3 md:w-1/4 text-center font-semibold ${getScoreColor(team.grossScore)}`}
                  >
                    {team.grossScore > 0
                      ? `+${team.grossScore}`
                      : team.grossScore === 0
                        ? 'E'
                        : team.grossScore}
                  </div>
                  <div
                    className={`w-1/3 md:w-1/4 text-center ${getScoreColor(team.netScore)}`}
                  >
                    {team.netScore > 0
                      ? `+${team.netScore}`
                      : team.netScore === 0
                        ? 'E'
                        : team.netScore}
                  </div>
                  <div className='w-1/3 md:w-1/4 text-center text-gray-600'>
                    {team.thru}
                  </div>
                  <div className='w-full md:w-1/4 text-center text-gray-600 mt-2 md:mt-0'>
                    {team.mulligansRemaining} Mulligans Left
                  </div>
                </div>
                {/* Add Expanded View section here later */}
              </div>
            ))}
        </div>
      </div>

      {/* Add auto-refresh logic/button later */}
    </div>
  );
};

export default LeaderboardPageContent;
</file>

<file path="src/components/leaderboard/RealtimeNotification.tsx">
import React, { useEffect, useState } from 'react';

interface RealtimeNotificationProps {
  isVisible: boolean;
  teamName?: string;
  timestamp?: string;
  onDismiss: () => void;
}

const RealtimeNotification: React.FC<RealtimeNotificationProps> = ({
  isVisible,
  teamName,
  timestamp,
  onDismiss,
}) => {
  const [show, setShow] = useState(isVisible);

  useEffect(() => {
    // Show notification when isVisible becomes true
    if (isVisible) {
      setShow(true);

      // Auto-dismiss after 5 seconds
      const timer = setTimeout(() => {
        setShow(false);
        onDismiss();
      }, 5000);

      return () => clearTimeout(timer);
    }
  }, [isVisible, onDismiss]);

  if (!show) return null;

  return (
    <div className='fixed bottom-5 right-5 bg-blue-100 border-l-4 border-blue-500 text-blue-700 p-4 rounded shadow-lg max-w-sm z-50 animate-fade-in'>
      <div className='flex justify-between items-start'>
        <div>
          <p className='font-bold'>New score update!</p>
          {teamName && (
            <p className='text-sm'>Team {teamName} has submitted new scores.</p>
          )}
          {timestamp && (
            <p className='text-xs text-blue-600 mt-1'>{timestamp}</p>
          )}
        </div>
        <button
          onClick={() => {
            setShow(false);
            onDismiss();
          }}
          className='text-blue-500 hover:text-blue-800'
        >
          <span className='text-xl'>&times;</span>
        </button>
      </div>
    </div>
  );
};

export default RealtimeNotification;
</file>

<file path="src/components/links/ArrowLink.tsx">
import * as React from 'react';

import { cn } from '@/lib/utils';

import UnderlineLink from '@/components/links/UnderlineLink';
import { UnstyledLinkProps } from '@/components/links/UnstyledLink';

type ArrowLinkProps<C extends React.ElementType> = {
  as?: C;
  direction?: 'left' | 'right';
} & UnstyledLinkProps &
  React.ComponentProps<C>;

export default function ArrowLink<C extends React.ElementType>({
  children,
  className,
  direction = 'right',
  as,
  ...rest
}: ArrowLinkProps<C>) {
  const Component = as || UnderlineLink;

  return (
    <Component
      {...rest}
      className={cn(
        'group gap-[0.25em]',
        direction === 'left' && 'flex-row-reverse',
        className
      )}
    >
      <span>{children}</span>
      <svg
        viewBox='0 0 16 16'
        height='1em'
        width='1em'
        fill='none'
        xmlns='http://www.w3.org/2000/svg'
        className={cn(
          'relative',
          'transition-transform duration-200',
          direction === 'right' ? 'motion-safe:-translate-x-1' : 'rotate-180',
          'group-hover:translate-x-0'
        )}
      >
        <path
          fill='currentColor'
          d='M7.28033 3.21967C6.98744 2.92678 6.51256 2.92678 6.21967 3.21967C5.92678 3.51256 5.92678 3.98744 6.21967 4.28033L7.28033 3.21967ZM11 8L11.5303 8.53033C11.8232 8.23744 11.8232 7.76256 11.5303 7.46967L11 8ZM6.21967 11.7197C5.92678 12.0126 5.92678 12.4874 6.21967 12.7803C6.51256 13.0732 6.98744 13.0732 7.28033 12.7803L6.21967 11.7197ZM6.21967 4.28033L10.4697 8.53033L11.5303 7.46967L7.28033 3.21967L6.21967 4.28033ZM10.4697 7.46967L6.21967 11.7197L7.28033 12.7803L11.5303 8.53033L10.4697 7.46967Z'
        />
        <path
          stroke='currentColor'
          d='M1.75 8H11'
          strokeWidth='1.5'
          strokeLinecap='round'
          className={cn(
            'origin-left transition-all duration-200',
            'opacity-0 motion-safe:-translate-x-1',
            'group-hover:translate-x-0 group-hover:opacity-100'
          )}
        />
      </svg>
    </Component>
  );
}
</file>

<file path="src/components/links/UnstyledLink.tsx">
import Link, { LinkProps } from 'next/link';
import * as React from 'react';

import { cn } from '@/lib/utils';

export type UnstyledLinkProps = {
  href: string;
  children: React.ReactNode;
  openNewTab?: boolean;
  className?: string;
  nextLinkProps?: Omit<LinkProps, 'href'>;
} & React.ComponentPropsWithRef<'a'>;

const UnstyledLink = React.forwardRef<HTMLAnchorElement, UnstyledLinkProps>(
  ({ children, href, openNewTab, className, nextLinkProps, ...rest }, ref) => {
    const isNewTab =
      openNewTab !== undefined
        ? openNewTab
        : href && !href.startsWith('/') && !href.startsWith('#');

    if (!isNewTab) {
      return (
        <Link
          href={href}
          ref={ref}
          className={className}
          {...rest}
          {...nextLinkProps}
        >
          {children}
        </Link>
      );
    }

    return (
      <a
        ref={ref}
        target='_blank'
        rel='noopener noreferrer'
        href={href}
        {...rest}
        className={cn('cursor-newtab', className)}
      >
        {children}
      </a>
    );
  }
);

export default UnstyledLink;
</file>

<file path="src/components/scoreInput/ScoreInputForm.tsx">
import React, { useEffect, useState } from 'react';

import { checkMinimumDrives } from '../../lib/scoreFormatters';
import { getPlayersForTeam, getTeamScores } from '../../lib/supabaseQueries';
import { useScoreSubmission } from '../../lib/useScoreSubmission';
import { TournamentType } from '../../types/supabase';

interface ScoreInputFormProps {
  teamId: string;
  tournamentType: TournamentType;
  minDrivesPerPlayer: number;
  coursePars?: { [key: string]: number };
  playerMap: Map<string, number>;
}

interface HoleScore {
  hole_number: number;
  strokes: number;
  drive_player_id: string;
  mulligan_player_id: string | null;
}

// Helper function to determine score class
const getScoreClass = (score: number, par: number): string => {
  if (!score || !par || par === 0) return ''; // Avoid division by zero or styling without par
  const relativeScore = score - par;
  if (relativeScore <= -2) return 'score-eagle';
  if (relativeScore === -1) return 'score-birdie';
  if (relativeScore === 0) return 'score-equal-par';
  if (relativeScore === 1) return 'score-bogey';
  if (relativeScore >= 2) return 'score-double-bogey-plus';
  return '';
};

// Helper function to determine player select class
const getPlayerSelectClass = (
  selectedPlayerId: string | null,
  playerMap: Map<string, number>,
): string => {
  if (!selectedPlayerId) return '';
  const playerIndex = playerMap.get(selectedPlayerId);
  if (playerIndex === 0) return 'player1-selected';
  if (playerIndex === 1) return 'player2-selected';
  return '';
};

const ScoreInputForm: React.FC<ScoreInputFormProps> = ({
  teamId,
  tournamentType,
  minDrivesPerPlayer = 5,
  coursePars = {},
  playerMap,
}) => {
  const [players, setPlayers] = useState<any[]>([]);
  const [isLoading, setIsLoading] = useState(true);
  const [scores, setScores] = useState<HoleScore[]>([]);
  const [driveCounts, setDriveCounts] = useState<Record<string, number>>({});
  const [formError, setFormError] = useState<string | null>(null);
  const [savingHole, setSavingHole] = useState<number | null>(null);
  const {
    submitSingleScore,
    isSubmitting,
    error: submissionError,
    isSuccess,
    clearError,
  } = useScoreSubmission();

  // Initialize/load data
  useEffect(() => {
    const fetchData = async () => {
      setIsLoading(true);
      try {
        // Fetch players for the team
        const playersData = await getPlayersForTeam(teamId);
        setPlayers(playersData);

        // Fetch existing scores
        const scoresData = await getTeamScores(teamId);

        // Initialize score state for all 18 holes or use existing scores
        const initialScores: HoleScore[] = [];
        const drivesCount: Record<string, number> = {};

        // Initialize all players with 0 drives
        playersData.forEach((player) => {
          drivesCount[player.id] = 0;
        });

        // Map existing scores and count drives
        for (let i = 1; i <= 18; i++) {
          const existingScore = scoresData.find((s) => s.hole_number === i);

          if (existingScore) {
            initialScores.push({
              hole_number: i,
              strokes: existingScore.strokes,
              drive_player_id: existingScore.drive_player_id,
              mulligan_player_id: existingScore.mulligan_player_id,
            });

            // Count this drive
            if (drivesCount[existingScore.drive_player_id] !== undefined) {
              drivesCount[existingScore.drive_player_id]++;
            }
          } else {
            // Default empty score
            initialScores.push({
              hole_number: i,
              strokes: 0,
              drive_player_id: '',
              mulligan_player_id: null,
            });
          }
        }

        setScores(initialScores);
        setDriveCounts(drivesCount);
      } catch (error) {
        console.error('Error loading score input data:', error);
      } finally {
        setIsLoading(false);
      }
    };

    if (teamId) {
      fetchData();
    }
  }, [teamId]);

  // Auto-save the score when it changes
  const saveScore = async (score: HoleScore) => {
    // Validate the score before submitting
    if (score.strokes > 0 && score.drive_player_id) {
      setSavingHole(score.hole_number);
      setFormError(null);

      console.log(`Saving score for hole ${score.hole_number}:`, score);

      try {
        const result = await submitSingleScore({
          team_id: teamId,
          tournament_type: tournamentType,
          hole_number: score.hole_number,
          strokes: score.strokes,
          drive_player_id: score.drive_player_id,
          mulligan_player_id: score.mulligan_player_id,
        });

        console.log(
          `Score submission result for hole ${score.hole_number}:`,
          result,
        );

        if (!result.success) {
          // Check for row-level security policy errors related to mulligans
          if (
            result.error &&
            result.error.includes('row-level security policy')
          ) {
            console.error('Row-level security error:', result.error);

            // Handle mulligan permission error
            if (score.mulligan_player_id) {
              // Try again without the mulligan
              console.log(
                `Retrying hole ${score.hole_number} without mulligan`,
              );
              const retryResult = await submitSingleScore({
                team_id: teamId,
                tournament_type: tournamentType,
                hole_number: score.hole_number,
                strokes: score.strokes,
                drive_player_id: score.drive_player_id,
                mulligan_player_id: null, // Remove mulligan
              });

              console.log(
                `Retry result for hole ${score.hole_number}:`,
                retryResult,
              );

              if (retryResult.success) {
                // Update the UI to show the score was saved without mulligan
                setFormError(
                  'Mulligan not allowed due to permissions. Score saved without mulligan.',
                );

                // Reset the mulligan selection for this hole
                setScores((prevScores) => {
                  return prevScores.map((s) => {
                    if (s.hole_number === score.hole_number) {
                      return { ...s, mulligan_player_id: null };
                    }
                    return s;
                  });
                });
              } else {
                // There's a different issue
                setFormError(`Error saving score: ${retryResult.error}`);
              }
            } else {
              setFormError(`Permission denied: ${result.error}`);
            }
          } else if (result.error) {
            setFormError(result.error);
          } else {
            console.log(
              `Successfully saved score for hole ${score.hole_number}`,
            );
          }
        }
      } catch (error) {
        console.error('Error saving score:', error);
        setFormError('Failed to save score. Please try again.');
      } finally {
        setSavingHole(null);
      }
    }
  };

  // Update a score for a specific hole
  const updateScore = (
    holeNumber: number,
    field: keyof HoleScore,
    value: any,
  ) => {
    setScores((prevScores) => {
      const newScores = [...prevScores];
      const index = newScores.findIndex((s) => s.hole_number === holeNumber);

      if (index !== -1) {
        // Update the field
        const updatedScore = { ...newScores[index], [field]: value };
        newScores[index] = updatedScore;

        // If updating drive player, recalculate drive counts
        if (field === 'drive_player_id') {
          const newDriveCounts = { ...driveCounts };

          // Decrement old drive player count if it exists
          const oldDriverId = prevScores[index].drive_player_id;
          if (oldDriverId && newDriveCounts[oldDriverId] !== undefined) {
            newDriveCounts[oldDriverId] = Math.max(
              0,
              newDriveCounts[oldDriverId] - 1,
            );
          }

          // Increment new drive player count
          if (value && newDriveCounts[value] !== undefined) {
            newDriveCounts[value]++;
          }

          setDriveCounts(newDriveCounts);
        }

        // Auto-save the score if it has all required fields
        if (
          updatedScore.strokes > 0 &&
          updatedScore.drive_player_id !== '' &&
          updatedScore.drive_player_id !== undefined
        ) {
          // Use setTimeout to debounce multiple rapid changes
          setTimeout(() => {
            saveScore(updatedScore);
          }, 500);
        }
      }

      return newScores;
    });
  };

  // Check drive requirements whenever they change
  useEffect(() => {
    // Define checkDriveRequirements INSIDE the effect
    const checkDriveRequirements = () => {
      const driversList = Object.entries(driveCounts).map(([id, count]) => ({
        id,
        name: players.find((p) => p.id === id)?.name || id,
        count,
      }));

      const drivesRequirementMet = checkMinimumDrives(
        driversList,
        minDrivesPerPlayer,
      );

      if (!drivesRequirementMet) {
        setFormError(
          `Some players have fewer than ${minDrivesPerPlayer} drives, which is the minimum requirement.`,
        );
      } else {
        // Only clear the specific drive error, leave other errors
        if (formError?.includes('drives, which is the minimum requirement')) {
          setFormError(null);
        }
      }
    };

    const filledHoles = scores.filter(
      (s) =>
        s.strokes > 0 &&
        s.drive_player_id !== '' &&
        s.drive_player_id !== undefined,
    ).length;

    // Only run the check when at least 9 holes are filled
    if (filledHoles >= 9) {
      checkDriveRequirements();
    }
    // Dependencies are now based on the values USED inside the effect and checkDriveRequirements
  }, [driveCounts, players, minDrivesPerPlayer, scores, formError]); // Removed checkDriveRequirements, added formError (used in checkDriveRequirements)

  if (isLoading) {
    return <div className='py-4 text-center'>Loading...</div>;
  }

  return (
    <div className='space-y-6'>
      {/* Error message - Modified condition to exclude drive count warning */}
      {(formError || submissionError) &&
        !formError?.includes('drives, which is the minimum requirement') && (
          <div className='bg-red-50 border border-red-400 text-red-700 px-4 py-3 rounded relative'>
            <strong className='font-bold'>Warning:</strong>
            <span className='block sm:inline'>
              {formError?.includes('mulligan') ||
              submissionError?.includes('mulligan')
                ? 'Mulligan feature is not available or you do not have permission to use it. Your score has been saved without the mulligan.'
                : formError || submissionError}
            </span>
            <button
              className='absolute top-0 bottom-0 right-0 px-4 py-3'
              onClick={() => {
                setFormError(null);
                clearError();
              }}
            >
              <span className='text-2xl'>&times;</span>
            </button>
          </div>
        )}

      {/* Player drive counts */}
      <div
        className='bg-gray-50 p-4 rounded-lg shadow-sm'
        data-testid='drive-counts-section'
      >
        <h3 className='text-lg font-medium mb-3'>Drive Counts</h3>
        <div className='grid grid-cols-2 gap-4'>
          {players.map((player) => (
            <div key={player.id} className='flex justify-between'>
              <span>{player.name}:</span>
              <span
                className={
                  driveCounts[player.id] < minDrivesPerPlayer
                    ? 'text-red-500 font-bold'
                    : ''
                }
              >
                {driveCounts[player.id] || 0} drives
                {driveCounts[player.id] < minDrivesPerPlayer &&
                  ` (min: ${minDrivesPerPlayer})`}
              </span>
            </div>
          ))}
        </div>
      </div>

      <div className='space-y-8'>
        <div className='overflow-x-auto'>
          <table className='min-w-full divide-y divide-gray-200'>
            <thead className='bg-gray-50'>
              <tr>
                <th className='px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider'>
                  Hole
                </th>
                <th className='px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider'>
                  Par
                </th>
                <th className='px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider'>
                  Strokes
                </th>
                <th className='px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider'>
                  Drive
                </th>
                <th className='px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider'>
                  Mulligan
                </th>
                <th className='px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider'>
                  Status
                </th>
              </tr>
            </thead>
            <tbody className='bg-white divide-y divide-gray-200'>
              {scores.map((score) => {
                // Get Par for the current hole
                const parForHole =
                  coursePars[score.hole_number.toString()] || '-';
                const par = parseInt(parForHole.toString(), 10);

                // Determine dynamic classes using helpers
                const scoreClass = getScoreClass(score.strokes, par);
                const driveClass = getPlayerSelectClass(
                  score.drive_player_id,
                  playerMap,
                );
                const mulliganClass = getPlayerSelectClass(
                  score.mulligan_player_id,
                  playerMap,
                );

                return (
                  <tr key={score.hole_number}>
                    <td className='px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900'>
                      {score.hole_number}
                    </td>
                    <td className='px-6 py-4 whitespace-nowrap text-center text-sm text-gray-500'>
                      {parForHole}
                    </td>
                    <td className='px-6 py-4 whitespace-nowrap text-sm text-gray-500'>
                      <input
                        type='number'
                        min='1'
                        max='15'
                        value={score.strokes || ''}
                        onChange={(e) =>
                          updateScore(
                            score.hole_number,
                            'strokes',
                            parseInt(e.target.value) || 0,
                          )
                        }
                        className={`mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md ${scoreClass}`}
                      />
                    </td>
                    <td className='px-6 py-4 whitespace-nowrap text-sm text-gray-500'>
                      <select
                        value={score.drive_player_id || ''}
                        onChange={(e) =>
                          updateScore(
                            score.hole_number,
                            'drive_player_id',
                            e.target.value,
                          )
                        }
                        className={`mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm ${driveClass}`}
                      >
                        <option value=''>Select player</option>
                        {players.map((player) => (
                          <option key={player.id} value={player.id}>
                            {player.name}
                          </option>
                        ))}
                      </select>
                    </td>
                    <td className='px-6 py-4 whitespace-nowrap text-sm text-gray-500'>
                      <select
                        value={score.mulligan_player_id || ''}
                        onChange={(e) =>
                          updateScore(
                            score.hole_number,
                            'mulligan_player_id',
                            e.target.value === '' ? null : e.target.value,
                          )
                        }
                        className={`mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm ${mulliganClass}`}
                      >
                        <option value=''>None</option>
                        {players.map((player) => (
                          <option key={player.id} value={player.id}>
                            {player.name}
                          </option>
                        ))}
                      </select>
                    </td>
                    <td className='px-6 py-4 whitespace-nowrap text-sm text-gray-500'>
                      {savingHole === score.hole_number ? (
                        <span className='text-blue-500 flex items-center'>
                          <svg
                            className='animate-spin -ml-1 mr-2 h-4 w-4'
                            xmlns='http://www.w3.org/2000/svg'
                            fill='none'
                            viewBox='0 0 24 24'
                          >
                            <circle
                              className='opacity-25'
                              cx='12'
                              cy='12'
                              r='10'
                              stroke='currentColor'
                              strokeWidth='4'
                            ></circle>
                            <path
                              className='opacity-75'
                              fill='currentColor'
                              d='M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z'
                            ></path>
                          </svg>
                          Saving...
                        </span>
                      ) : (
                        <>
                          {score.strokes > 0 && score.drive_player_id ? (
                            <span className='text-green-500'>Saved</span>
                          ) : (
                            <span className='text-gray-300'>Not saved</span>
                          )}
                        </>
                      )}
                    </td>
                  </tr>
                );
              })}
            </tbody>
          </table>
        </div>
      </div>
    </div>
  );
};

export default ScoreInputForm;
</file>

<file path="src/components/scoring/HoleInput.tsx">
import React from 'react';
interface Player {
  id: number;
  name: string;
  mulligansLeft: number;
}
interface HoleInputProps {
  holeNumber: number;
  par: number;
  players: Player[];
  strokes: number | null;
  selectedDrive: number | null;
  selectedMulligan: number | null;
  availableMulligans: Record<number, number>;
  onChange: (holeNumber: number, field: string, value: number | null) => void;
}
export function HoleInput({
  holeNumber,
  par,
  players,
  strokes,
  selectedDrive,
  selectedMulligan,
  availableMulligans,
  onChange,
}: HoleInputProps) {
  return (
    <div className='grid grid-cols-12 gap-4 items-center py-2 border-b border-gray-100'>
      <div className='col-span-1 font-medium'>{holeNumber}</div>
      <div className='col-span-1 text-gray-600'>Par {par}</div>
      {/* Strokes input */}
      <div className='col-span-2'>
        <input
          type='number'
          min='1'
          max='12'
          value={strokes === null ? '' : strokes}
          onChange={(e) =>
            onChange(
              holeNumber,
              'strokes',
              e.target.value ? Number(e.target.value) : null,
            )
          }
          className='w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#0B3D2E]'
          placeholder='Score'
        />
      </div>
      {/* Drive selection */}
      <div className='col-span-4'>
        <label className='block text-xs text-gray-500 mb-1'>Drive</label>
        <div className='flex'>
          {players.map((player) => (
            <button
              key={player.id}
              type='button'
              onClick={() => onChange(holeNumber, 'drive', player.id)}
              className={`flex-1 px-3 py-2 text-sm border ${selectedDrive === player.id ? 'bg-[#0B3D2E] text-white border-[#0B3D2E]' : 'bg-white text-gray-700 border-gray-300 hover:bg-gray-50'} ${player.id === players[0].id ? 'rounded-l' : 'rounded-r'}`}
            >
              {player.name}
            </button>
          ))}
        </div>
      </div>
      {/* Mulligan selection */}
      <div className='col-span-4'>
        <label className='block text-xs text-gray-500 mb-1'>Mulligan</label>
        <div className='flex'>
          <button
            type='button'
            onClick={() => onChange(holeNumber, 'mulligan', null)}
            className={`flex-1 px-3 py-2 text-sm border ${selectedMulligan === null ? 'bg-[#0B3D2E] text-white border-[#0B3D2E]' : 'bg-white text-gray-700 border-gray-300 hover:bg-gray-50'} rounded-l`}
          >
            None
          </button>
          {players.map((player) => (
            <button
              key={player.id}
              type='button'
              disabled={
                availableMulligans[player.id] <= 0 &&
                selectedMulligan !== player.id
              }
              onClick={() => onChange(holeNumber, 'mulligan', player.id)}
              className={`flex-1 px-3 py-2 text-sm border ${selectedMulligan === player.id ? 'bg-[#0B3D2E] text-white border-[#0B3D2E]' : availableMulligans[player.id] <= 0 ? 'bg-gray-100 text-gray-400 border-gray-300 cursor-not-allowed' : 'bg-white text-gray-700 border-gray-300 hover:bg-gray-50'} ${player.id === players[players.length - 1].id ? 'rounded-r' : ''}`}
            >
              {player.name} ({availableMulligans[player.id]})
            </button>
          ))}
        </div>
      </div>
    </div>
  );
}
</file>

<file path="src/components/ui/select.tsx">
'use client';

import * as SelectPrimitive from '@radix-ui/react-select';
import { Check, ChevronDown, ChevronUp } from 'lucide-react';
import * as React from 'react';

import { cn } from '@/lib/utils';

const Select = SelectPrimitive.Root;

const SelectGroup = SelectPrimitive.Group;

const SelectValue = SelectPrimitive.Value;

const SelectTrigger = React.forwardRef<
  React.ElementRef<typeof SelectPrimitive.Trigger>,
  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>
>(({ className, children, ...props }, ref) => (
  <SelectPrimitive.Trigger
    ref={ref}
    className={cn(
      'flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1',
      className,
    )}
    {...props}
  >
    {children}
    <SelectPrimitive.Icon asChild>
      <ChevronDown className='h-4 w-4 opacity-50' />
    </SelectPrimitive.Icon>
  </SelectPrimitive.Trigger>
));
SelectTrigger.displayName = SelectPrimitive.Trigger.displayName;

const SelectScrollUpButton = React.forwardRef<
  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,
  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>
>(({ className, ...props }, ref) => (
  <SelectPrimitive.ScrollUpButton
    ref={ref}
    className={cn(
      'flex cursor-default items-center justify-center py-1',
      className,
    )}
    {...props}
  >
    <ChevronUp className='h-4 w-4' />
  </SelectPrimitive.ScrollUpButton>
));
SelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName;

const SelectScrollDownButton = React.forwardRef<
  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,
  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>
>(({ className, ...props }, ref) => (
  <SelectPrimitive.ScrollDownButton
    ref={ref}
    className={cn(
      'flex cursor-default items-center justify-center py-1',
      className,
    )}
    {...props}
  >
    <ChevronDown className='h-4 w-4' />
  </SelectPrimitive.ScrollDownButton>
));
SelectScrollDownButton.displayName =
  SelectPrimitive.ScrollDownButton.displayName;

const SelectContent = React.forwardRef<
  React.ElementRef<typeof SelectPrimitive.Content>,
  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>
>(({ className, children, position = 'popper', ...props }, ref) => (
  <SelectPrimitive.Portal>
    <SelectPrimitive.Content
      ref={ref}
      className={cn(
        'relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]',
        position === 'popper' &&
          'data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1',
        className,
      )}
      position={position}
      {...props}
    >
      <SelectScrollUpButton />
      <SelectPrimitive.Viewport
        className={cn(
          'p-1',
          position === 'popper' &&
            'h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]',
        )}
      >
        {children}
      </SelectPrimitive.Viewport>
      <SelectScrollDownButton />
    </SelectPrimitive.Content>
  </SelectPrimitive.Portal>
));
SelectContent.displayName = SelectPrimitive.Content.displayName;

const SelectLabel = React.forwardRef<
  React.ElementRef<typeof SelectPrimitive.Label>,
  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>
>(({ className, ...props }, ref) => (
  <SelectPrimitive.Label
    ref={ref}
    className={cn('px-2 py-1.5 text-sm font-semibold', className)}
    {...props}
  />
));
SelectLabel.displayName = SelectPrimitive.Label.displayName;

const SelectItem = React.forwardRef<
  React.ElementRef<typeof SelectPrimitive.Item>,
  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>
>(({ className, children, ...props }, ref) => (
  <SelectPrimitive.Item
    ref={ref}
    className={cn(
      'relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50',
      className,
    )}
    {...props}
  >
    <span className='absolute right-2 flex h-3.5 w-3.5 items-center justify-center'>
      <SelectPrimitive.ItemIndicator>
        <Check className='h-4 w-4' />
      </SelectPrimitive.ItemIndicator>
    </span>
    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>
  </SelectPrimitive.Item>
));
SelectItem.displayName = SelectPrimitive.Item.displayName;

const SelectSeparator = React.forwardRef<
  React.ElementRef<typeof SelectPrimitive.Separator>,
  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>
>(({ className, ...props }, ref) => (
  <SelectPrimitive.Separator
    ref={ref}
    className={cn('-mx-1 my-1 h-px bg-muted', className)}
    {...props}
  />
));
SelectSeparator.displayName = SelectPrimitive.Separator.displayName;

export {
  Select,
  SelectContent,
  SelectGroup,
  SelectItem,
  SelectLabel,
  SelectScrollDownButton,
  SelectScrollUpButton,
  SelectSeparator,
  SelectTrigger,
  SelectValue,
};
</file>

<file path="src/components/Skeleton.tsx">
import * as React from 'react';

import { cn } from '@/lib/utils';

type SkeletonProps = React.ComponentPropsWithoutRef<'div'>;

export default function Skeleton({ className, ...rest }: SkeletonProps) {
  return (
    <div
      className={cn('animate-shimmer bg-[#f6f7f8]', className)}
      style={{
        backgroundImage:
          'linear-gradient(to right, #f6f7f8 0%, #edeef1 20%, #f6f7f8 40%, #f6f7f8 100%)',
        backgroundSize: '700px 100%',
        backgroundRepeat: 'no-repeat',
      }}
      {...rest}
    />
  );
}
</file>

<file path="src/constant/config.ts">
export const siteConfig = {
  title: 'Next.js + Tailwind CSS + TypeScript Starter',
  description:
    'A starter for Next.js, Tailwind CSS, and TypeScript with Absolute Import, Seo, Link component, pre-configured with Husky',
  /** Without additional '/' on the end, e.g. https://theodorusclarence.com */
  url: 'https://tsnext-tw.thcl.dev',
};
</file>

<file path="src/lib/__tests__/og.test.ts">
import { openGraph } from '@/lib/og';

describe('Open Graph function should work correctly', () => {
  it('should not return templateTitle when not specified', () => {
    const result = openGraph({
      description: 'Test description',
      siteName: 'Test site name',
    });
    expect(result).not.toContain('&templateTitle=');
  });

  it('should return templateTitle when specified', () => {
    const result = openGraph({
      templateTitle: 'Test Template Title',
      description: 'Test description',
      siteName: 'Test site name',
    });
    expect(result).toContain('&templateTitle=Test%20Template%20Title');
  });
});
</file>

<file path="src/lib/env.ts">
/* eslint-disable @typescript-eslint/no-namespace */
/**
 * Configuration for type-safe environment variables.
 * Imported through src/app/page.tsx
 * @see https://x.com/mattpocockuk/status/1760991147793449396
 */
import { z } from 'zod';

const envVariables = z.object({
  NEXT_PUBLIC_SHOW_LOGGER: z.enum(['true', 'false']).optional(),
});

envVariables.parse(process.env);

declare global {
  namespace NodeJS {
    // eslint-disable-next-line @typescript-eslint/no-empty-interface
    interface ProcessEnv extends z.infer<typeof envVariables> {}
  }
}
</file>

<file path="src/lib/helper.ts">
export function getFromLocalStorage(key: string): string | null {
  if (typeof window !== 'undefined') {
    return window.localStorage.getItem(key);
  }
  return null;
}

export function getFromSessionStorage(key: string): string | null {
  if (typeof sessionStorage !== 'undefined') {
    return sessionStorage.getItem(key);
  }
  return null;
}
</file>

<file path="src/lib/og.ts">
type OpenGraphType = {
  siteName: string;
  description: string;
  templateTitle?: string;
  logo?: string;
};
// !STARTERCONF This OG is generated from https://github.com/theodorusclarence/og
// Please clone them and self-host if your site is going to be visited by many people.
// Then change the url and the default logo.
export function openGraph({
  siteName,
  templateTitle,
  description,
  // !STARTERCONF Or, you can use my server with your own logo.
  logo = 'https://og.<your-domain>/images/logo.jpg',
}: OpenGraphType): string {
  const ogLogo = encodeURIComponent(logo);
  const ogSiteName = encodeURIComponent(siteName.trim());
  const ogTemplateTitle = templateTitle
    ? encodeURIComponent(templateTitle.trim())
    : undefined;
  const ogDesc = encodeURIComponent(description.trim());

  return `https://og.<your-domain>/api/general?siteName=${ogSiteName}&description=${ogDesc}&logo=${ogLogo}${
    ogTemplateTitle ? `&templateTitle=${ogTemplateTitle}` : ''
  }`;
}
</file>

<file path="src/lib/scoreFormatters.ts">
/**
 * Formats a relative to par score with the proper sign or 'E' for even
 * @param relativeToPar The score relative to par
 * @returns A string representing the score (e.g., '+2', '-3', 'E')
 */
export function formatRelativeToPar(relativeToPar: number): string {
  if (relativeToPar === 0) {
    return 'E';
  } else if (relativeToPar > 0) {
    return `+${relativeToPar}`;
  } else {
    return `${relativeToPar}`;
  }
}

/**
 * Formats a relative to par score with proper CSS classes for styling
 * @param relativeToPar The score relative to par
 * @returns CSS classes for coloring the score
 */
export function getScoreColorClass(relativeToPar: number): string {
  if (relativeToPar < 0) {
    return 'text-green-500'; // Under par (good)
  } else if (relativeToPar > 0) {
    return 'text-red-500'; // Over par (bad)
  } else {
    return 'text-gray-700'; // Even par (neutral)
  }
}

/**
 * Formats the 'thru' display for completed holes
 * @param holesCompleted Number of holes completed
 * @returns A string showing either the hole number or 'F' for finished
 */
export function formatThru(holesCompleted: number): string {
  if (holesCompleted === 18) {
    return 'F';
  } else {
    return holesCompleted.toString();
  }
}

/**
 * Calculates if minimum drive requirements are met
 * @param driveCounts Array of drive counts per player
 * @param minDrives The minimum number of drives required per player
 * @returns True if requirements are met, false otherwise
 */
export function checkMinimumDrives(
  driveCounts: Array<{ id: string; name: string; count: number }>,
  minDrives = 5, // Default to 5 for 2-man scramble
): boolean {
  return driveCounts.every((player) => player.count >= minDrives);
}
</file>

<file path="src/lib/supabaseQueries.ts">
import { createClient } from '@supabase/supabase-js';

import { Database, TournamentType } from '../types/supabase';

// Create a single supabase client for interacting with your database
const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL || '';
const supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY || '';

const supabase = createClient<Database>(supabaseUrl, supabaseAnonKey);

/**
 * Fetches tournament details for a specific tournament type
 * @param tournamentType The type of tournament (2-man or 4-man)
 */
export async function getTournamentDetails(tournamentType: TournamentType) {
  const { data, error } = await supabase
    .from('tournaments')
    .select('*')
    .eq('type', tournamentType)
    .single();

  if (error) {
    console.error(
      `Error fetching tournament details for ${tournamentType}:`,
      error,
    );
    return null;
  }

  return data;
}

/**
 * Fetches all teams for a specific tournament type
 * @param tournamentType The type of tournament (2-man or 4-man)
 */
export async function getTeams(tournamentType: TournamentType) {
  const { data, error } = await supabase
    .from('teams')
    .select('*')
    .eq('tournament_type', tournamentType);

  if (error) {
    console.error(
      `Error fetching teams for tournament type ${tournamentType}:`,
      error,
    );
    return [];
  }

  return data;
}

/**
 * Fetches players for a specific team
 * @param teamId The ID of the team
 */
export async function getPlayersForTeam(teamId: string) {
  const { data, error } = await supabase
    .from('team_players')
    .select(
      `
      player_id,
      players(*)
    `,
    )
    .eq('team_id', teamId);

  if (error) {
    console.error(`Error fetching players for team ${teamId}:`, error);
    return [];
  }

  // Transform the response to be more usable
  return data.map((item) => item.players);
}

/**
 * Fetches all scores for the leaderboard for a specific tournament type
 * @param tournamentType The type of tournament (2-man or 4-man)
 */
export async function getScores(tournamentType: TournamentType) {
  const { data, error } = await supabase
    .from('scores')
    .select(
      `
      *,
      teams(*),
      drive_player:players!scores_drive_player_id_fkey(id, name),
      mulligan_player:players!scores_mulligan_player_id_fkey(id, name)
    `,
    )
    .eq('tournament_type', tournamentType)
    .order('team_id')
    .order('hole_number');

  if (error) {
    console.error(
      `Error fetching scores for tournament ${tournamentType}:`,
      error,
    );
    return [];
  }

  return data;
}

/**
 * Fetches all scores for a specific team
 * @param teamId The ID of the team
 */
export async function getTeamScores(teamId: string) {
  const { data, error } = await supabase
    .from('scores')
    .select(
      `
      *,
      drive_player:players!scores_drive_player_id_fkey(id, name),
      mulligan_player:players!scores_mulligan_player_id_fkey(id, name)
    `,
    )
    .eq('team_id', teamId)
    .order('hole_number');

  if (error) {
    console.error(`Error fetching scores for team ${teamId}:`, error);
    return [];
  }

  return data;
}

/**
 * Counts the number of drives by each player for a specific team
 * @param teamId The ID of the team
 */
export async function getTeamDriveCounts(teamId: string) {
  const { data, error } = await supabase
    .from('scores')
    .select(
      `
      drive_player_id,
      drive_player:players!scores_drive_player_id_fkey(id, name)
    `,
    )
    .eq('team_id', teamId);

  if (error) {
    console.error(`Error fetching drive counts for team ${teamId}:`, error);
    return [];
  }

  // Count drives by player
  const driveCounts: Record<
    string,
    { id: string; name: string; count: number }
  > = {};

  data.forEach((score) => {
    const playerId = score.drive_player_id;
    const playerName = score.drive_player.name;

    if (!driveCounts[playerId]) {
      driveCounts[playerId] = { id: playerId, name: playerName, count: 0 };
    }

    driveCounts[playerId].count += 1;
  });

  return Object.values(driveCounts);
}

/**
 * Counts the number of mulligans used by each player for a specific team
 * @param teamId The ID of the team
 * @param tournamentType The type of tournament to get default mulligan count
 */
export async function getTeamMulliganCounts(
  teamId: string,
  tournamentType: TournamentType,
) {
  // First get the tournament default mulligan count
  const tournament = await getTournamentDetails(tournamentType);
  const defaultMulligans = tournament?.default_mulligans || 0;

  // Get all players on the team
  const players = await getPlayersForTeam(teamId);

  // Get mulligans used from scores
  const { data, error } = await supabase
    .from('scores')
    .select(
      `
      mulligan_player_id,
      mulligan_player:players!scores_mulligan_player_id_fkey(id, name)
    `,
    )
    .eq('team_id', teamId)
    .not('mulligan_player_id', 'is', null);

  if (error) {
    console.error(`Error fetching mulligan counts for team ${teamId}:`, error);
    return [];
  }

  // Initialize mulligan counts with default values for all players
  const mulliganCounts: Record<
    string,
    { id: string; name: string; used: number; remaining: number }
  > = {};

  // Initialize with all players having full mulligans
  players.forEach((player) => {
    if (player) {
      mulliganCounts[player.id] = {
        id: player.id,
        name: player.name,
        used: 0,
        remaining: defaultMulligans,
      };
    }
  });

  // Count used mulligans
  data.forEach((score) => {
    if (score.mulligan_player_id && mulliganCounts[score.mulligan_player_id]) {
      mulliganCounts[score.mulligan_player_id].used += 1;
      mulliganCounts[score.mulligan_player_id].remaining -= 1;
    }
  });

  return Object.values(mulliganCounts);
}

/**
 * Gets comprehensive leaderboard data for a tournament
 * @param tournamentType The type of tournament (2-man or 4-man)
 */
export async function getLeaderboard(tournamentType: TournamentType) {
  try {
    // Get tournament info (including pars)
    const tournament = await getTournamentDetails(tournamentType);
    if (!tournament) {
      console.error(`Tournament not found: ${tournamentType}`);
      return { tournament: null, leaderboard: [] };
    }

    // Get all teams for this tournament
    const teams = await getTeams(tournamentType);

    // Get all scores for this tournament
    const allScores = await getScores(tournamentType);

    // Process leaderboard data
    const leaderboard = await Promise.all(
      teams.map(async (team) => {
        // Filter scores for this team
        const teamScores = allScores.filter(
          (score) => score.team_id === team.id,
        );

        // Calculate total strokes
        const totalStrokes = teamScores.reduce(
          (sum, score) => sum + score.strokes,
          0,
        );

        // Calculate scores relative to par
        let relativeToPar = 0;
        const coursePars = tournament.course_pars as Record<string, number>;

        teamScores.forEach((score) => {
          const holePar = coursePars[score.hole_number.toString()];
          if (holePar) {
            relativeToPar += score.strokes - holePar;
          }
        });

        // Calculate holes completed
        const holesCompleted = new Set(
          teamScores.map((score) => score.hole_number),
        ).size;

        // Get total remaining mulligans
        const mulliganCounts = await getTeamMulliganCounts(
          team.id,
          tournamentType,
        );
        const totalRemainingMulligans = mulliganCounts.reduce(
          (sum, player) => sum + player.remaining,
          0,
        );

        // Get drive counts
        const driveCounts = await getTeamDriveCounts(team.id);

        // Calculate net score
        const netRelativeToPar = relativeToPar - team.handicap;

        return {
          team,
          totalStrokes,
          relativeToPar,
          netRelativeToPar,
          holesCompleted,
          totalRemainingMulligans,
          mulliganCounts,
          driveCounts,
          scores: teamScores,
        };
      }),
    );

    // Sort by net relative to par (lowest first)
    leaderboard.sort((a, b) => a.netRelativeToPar - b.netRelativeToPar);

    return {
      tournament,
      leaderboard,
    };
  } catch (error) {
    console.error(`Error generating leaderboard for ${tournamentType}:`, error);
    return { tournament: null, leaderboard: [] };
  }
}

/**
 * Validates that a player belongs to a specific team
 * @param playerId The ID of the player
 * @param teamId The ID of the team
 * @returns True if the player belongs to the team, false otherwise
 */
export async function isPlayerOnTeam(
  playerId: string,
  teamId: string,
): Promise<boolean> {
  const { data, error } = await supabase
    .from('team_players')
    .select('*')
    .eq('team_id', teamId)
    .eq('player_id', playerId);

  if (error) {
    console.error(
      `Error validating player ${playerId} on team ${teamId}:`,
      error,
    );
    return false;
  }

  return data.length > 0;
}

/**
 * Validates that a team belongs to a specific tournament type
 * @param teamId The ID of the team
 * @param tournamentType The type of tournament
 * @returns True if the team belongs to the tournament, false otherwise
 */
export async function isTeamInTournament(
  teamId: string,
  tournamentType: TournamentType,
): Promise<boolean> {
  const { data, error } = await supabase
    .from('teams')
    .select('*')
    .eq('id', teamId)
    .eq('tournament_type', tournamentType);

  if (error) {
    console.error(
      `Error validating team ${teamId} in tournament ${tournamentType}:`,
      error,
    );
    return false;
  }

  return data.length > 0;
}

/**
 * Submits a single score for public score submission
 */
export async function submitPublicScore(scoreData: {
  team_id: string;
  hole_number: number;
  strokes: number;
  drive_player_id: string;
  mulligan_player_id?: string | null;
  tournament_type: TournamentType;
}) {
  try {
    // First verify that the team exists and is part of the tournament
    const teamExists = await isTeamInTournament(
      scoreData.team_id,
      scoreData.tournament_type,
    );
    if (!teamExists) {
      return {
        success: false,
        error: `Team not found in the ${scoreData.tournament_type} tournament`,
      };
    }

    // Verify that the driver is on the team
    const driverOnTeam = await isPlayerOnTeam(
      scoreData.drive_player_id,
      scoreData.team_id,
    );
    if (!driverOnTeam) {
      return {
        success: false,
        error: 'Drive player not found on this team',
      };
    }

    // Verify that the mulligan player is on the team, if provided
    if (scoreData.mulligan_player_id) {
      const mulliganOnTeam = await isPlayerOnTeam(
        scoreData.mulligan_player_id,
        scoreData.team_id,
      );
      if (!mulliganOnTeam) {
        return {
          success: false,
          error: 'Mulligan player not found on this team',
        };
      }
    }

    // Use upsert to handle both insert and update with a single operation
    try {
      // Try with mulligan first if provided
      const { data, error } = await supabase
        .from('scores')
        .upsert(
          {
            team_id: scoreData.team_id,
            hole_number: scoreData.hole_number,
            strokes: scoreData.strokes,
            drive_player_id: scoreData.drive_player_id,
            mulligan_player_id: scoreData.mulligan_player_id,
            tournament_type: scoreData.tournament_type,
            // Add created_at timestamp to ensure we have this field populated
            created_at: new Date().toISOString(),
          },
          {
            // This is the critical part - we're telling Supabase which columns form the unique constraint
            onConflict: 'team_id,hole_number,tournament_type',
          },
        )
        .select('id')
        .single();

      if (error) {
        // Check for RLS policy error specifically with mulligans
        if (error.message.includes('row-level security policy')) {
          console.error('Error submitting score:', error);

          // Try again without the mulligan to see if that's the issue
          if (scoreData.mulligan_player_id) {
            const { data: retryData, error: retryError } = await supabase
              .from('scores')
              .upsert(
                {
                  team_id: scoreData.team_id,
                  hole_number: scoreData.hole_number,
                  strokes: scoreData.strokes,
                  drive_player_id: scoreData.drive_player_id,
                  mulligan_player_id: null, // Remove mulligan
                  tournament_type: scoreData.tournament_type,
                  created_at: new Date().toISOString(),
                },
                {
                  onConflict: 'team_id,hole_number,tournament_type',
                },
              )
              .select('id')
              .single();

            if (retryError) {
              // Still have an error, return the original error
              return {
                success: false,
                error: error.message,
              };
            } else {
              // Successfully saved without the mulligan
              return {
                success: false,
                error:
                  'Mulligan could not be saved due to permissions. Score saved without mulligan.',
                data: retryData,
              };
            }
          }

          return {
            success: false,
            error: error.message,
          };
        }

        console.error('Error upserting score:', error);
        return {
          success: false,
          error: error.message,
        };
      }

      return {
        success: true,
        data,
      };
    } catch (error) {
      console.error('Error in score submission:', error);
      return {
        success: false,
        error:
          error instanceof Error
            ? error.message
            : 'Unknown error during score submission',
      };
    }
  } catch (error) {
    console.error('Error in submitPublicScore:', error);
    return {
      success: false,
      error: error instanceof Error ? error.message : 'Unknown error occurred',
    };
  }
}

/**
 * Submit multiple scores at once for a team
 * @param scoresData Array of score data objects
 */
export async function submitPublicScores(
  scoresData: Array<{
    team_id: string;
    hole_number: number;
    strokes: number;
    drive_player_id: string;
    mulligan_player_id?: string | null;
    tournament_type: TournamentType;
  }>,
) {
  // All scores should be for the same team and tournament
  if (scoresData.length === 0) {
    return {
      success: false,
      error: 'No scores provided',
    };
  }

  const teamId = scoresData[0].team_id;
  const tournamentType = scoresData[0].tournament_type;

  // Check if any scores have different team or tournament
  const invalidData = scoresData.some(
    (score) =>
      score.team_id !== teamId || score.tournament_type !== tournamentType,
  );

  if (invalidData) {
    return {
      success: false,
      error: 'All scores must be for the same team and tournament',
    };
  }

  try {
    // Validate that the team belongs to the tournament
    const teamInTournament = await isTeamInTournament(teamId, tournamentType);

    if (!teamInTournament) {
      throw new Error(
        `Team ${teamId} does not belong to tournament ${tournamentType}`,
      );
    }

    // Get all players on this team
    const teamPlayersData = await supabase
      .from('team_players')
      .select('player_id')
      .eq('team_id', teamId);

    if (teamPlayersData.error) {
      throw new Error(
        `Error validating team players: ${teamPlayersData.error.message}`,
      );
    }

    const teamPlayerIds = new Set(
      teamPlayersData.data.map((tp) => tp.player_id),
    );

    // Validate that all players in the scores belong to the team
    for (const score of scoresData) {
      if (!teamPlayerIds.has(score.drive_player_id)) {
        throw new Error(
          `Drive player ${score.drive_player_id} does not belong to team ${teamId}`,
        );
      }

      if (
        score.mulligan_player_id &&
        !teamPlayerIds.has(score.mulligan_player_id)
      ) {
        throw new Error(
          `Mulligan player ${score.mulligan_player_id} does not belong to team ${teamId}`,
        );
      }

      // Validate hole number and strokes
      if (score.hole_number < 1 || score.hole_number > 18) {
        throw new Error(`Invalid hole number: ${score.hole_number}`);
      }

      if (score.strokes <= 0) {
        throw new Error(
          `Invalid strokes for hole ${score.hole_number}: ${score.strokes}`,
        );
      }
    }

    // Add timestamps to all scores
    const scoresToInsert = scoresData.map((score) => ({
      ...score,
      created_at: new Date().toISOString(),
    }));

    // All validations passed, insert or update the scores in bulk
    const { data, error } = await supabase
      .from('scores')
      .upsert(scoresToInsert, {
        onConflict: 'team_id,hole_number,tournament_type',
      });

    if (error) {
      console.error('Error submitting scores:', error);
      throw new Error(`Failed to save scores: ${error.message}`);
    }

    return {
      success: true,
      data,
    };
  } catch (error) {
    if (error instanceof Error) {
      return {
        success: false,
        error: error.message,
      };
    }
    return {
      success: false,
      error: 'An unknown error occurred',
    };
  }
}
</file>

<file path="src/lib/useScoreSubmission.ts">
import { useState } from 'react';

import { TournamentType } from '../types/supabase';

interface ScoreData {
  hole_number: number;
  strokes: number;
  drive_player_id: string;
  mulligan_player_id?: string | null;
}

interface ScoreSubmissionParams {
  team_id: string;
  tournament_type: TournamentType;
  scores: ScoreData[];
}

interface SingleScoreSubmissionParams {
  team_id: string;
  tournament_type: TournamentType;
  hole_number: number;
  strokes: number;
  drive_player_id: string;
  mulligan_player_id?: string | null;
}

interface SubmissionResponse {
  success: boolean;
  error?: string;
  data?: any;
}

/**
 * Hook for submitting scores to the API
 */
export function useScoreSubmission() {
  const [isSubmitting, setIsSubmitting] = useState(false);
  const [error, setError] = useState<string | null>(null);
  const [isSuccess, setIsSuccess] = useState(false);
  const [pendingSubmissions, setPendingSubmissions] = useState<
    Record<string, boolean>
  >({});

  /**
   * Submit multiple scores at once
   */
  const submitScores = async (
    params: ScoreSubmissionParams,
  ): Promise<SubmissionResponse> => {
    // Prevent duplicate submissions
    if (isSubmitting) {
      return { success: false, error: 'Submission already in progress' };
    }

    setIsSubmitting(true);
    setError(null);
    // Don't reset success state immediately to avoid UI flicker

    try {
      const response = await fetch('/api/scores/submit', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify(params),
      });

      const result = await response.json();

      if (!response.ok || !result.success) {
        const errorMessage = result.error || 'Failed to submit scores';
        setError(errorMessage);
        setIsSuccess(false);
        return { success: false, error: errorMessage };
      }

      setIsSuccess(true);
      return { success: true, data: result.data };
    } catch (err) {
      const errorMessage =
        err instanceof Error ? err.message : 'Unknown error occurred';
      setError(errorMessage);
      setIsSuccess(false);
      return { success: false, error: errorMessage };
    } finally {
      setIsSubmitting(false);
    }
  };

  /**
   * Submit a single score with real-time updates
   */
  const submitSingleScore = async (
    params: SingleScoreSubmissionParams,
  ): Promise<SubmissionResponse> => {
    // Create a unique key for this submission to track it
    const submissionKey = `${params.team_id}-${params.hole_number}`;

    // Check if this exact submission is already in progress
    if (pendingSubmissions[submissionKey]) {
      return { success: false, error: 'This score is already being saved' };
    }

    setIsSubmitting(true);
    setPendingSubmissions((prev) => ({ ...prev, [submissionKey]: true }));

    // Clear any previous errors but don't reset success state
    if (error) setError(null);

    try {
      const response = await fetch('/api/scores/submit', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify(params),
      });

      const result = await response.json();

      if (!response.ok || !result.success) {
        const errorMessage = result.error || 'Failed to submit score';
        setError(errorMessage);
        return { success: false, error: errorMessage };
      }

      // Show success state but don't clear it right away
      setIsSuccess(true);

      // Set a timeout to clear success state after 3 seconds
      // This prevents flicker while still providing feedback
      if (!isSuccess) {
        setTimeout(() => {
          setIsSuccess(false);
        }, 3000);
      }

      return { success: true, data: result.data };
    } catch (err) {
      const errorMessage =
        err instanceof Error ? err.message : 'Unknown error occurred';
      setError(errorMessage);
      return { success: false, error: errorMessage };
    } finally {
      // Update submission states
      setIsSubmitting(false);
      setPendingSubmissions((prev) => {
        const updated = { ...prev };
        delete updated[submissionKey];
        return updated;
      });
    }
  };

  return {
    submitScores,
    submitSingleScore,
    isSubmitting,
    error,
    isSuccess,
    clearError: () => setError(null),
    resetSuccess: () => setIsSuccess(false),
  };
}
</file>

<file path="src/pages/api/scores/submit.ts">
import { NextApiRequest, NextApiResponse } from 'next';

import {
  submitPublicScore,
  submitPublicScores,
} from '../../../lib/supabaseQueries';
import { TournamentType } from '../../../types/supabase';

/**
 * API handler for score submissions.
 *
 * POST /api/scores/submit
 * Request body:
 * {
 *   team_id: string,
 *   tournament_type: "2-man" | "4-man",
 *   scores: [
 *     {
 *       hole_number: number,
 *       strokes: number,
 *       drive_player_id: string,
 *       mulligan_player_id?: string | null
 *     },
 *     ...
 *   ]
 * }
 *
 * OR for single score submission:
 * {
 *   team_id: string,
 *   tournament_type: "2-man" | "4-man",
 *   hole_number: number,
 *   strokes: number,
 *   drive_player_id: string,
 *   mulligan_player_id?: string | null
 * }
 */
export default async function handler(
  req: NextApiRequest,
  res: NextApiResponse,
) {
  // Only allow POST method
  if (req.method !== 'POST') {
    return res
      .status(405)
      .json({ success: false, error: 'Method not allowed' });
  }

  try {
    const {
      team_id,
      tournament_type,
      scores,
      hole_number,
      strokes,
      drive_player_id,
      mulligan_player_id,
    } = req.body;

    // Basic validation of required fields
    if (!team_id) {
      return res
        .status(400)
        .json({ success: false, error: 'Team ID is required' });
    }

    if (
      !tournament_type ||
      (tournament_type !== '2-man' && tournament_type !== '4-man')
    ) {
      return res.status(400).json({
        success: false,
        error: 'Valid tournament type is required (2-man or 4-man)',
      });
    }

    // Handle single score submission
    if (typeof hole_number === 'number') {
      // Quick validation for required fields
      if (!strokes || strokes <= 0) {
        return res
          .status(400)
          .json({ success: false, error: 'Valid strokes value is required' });
      }

      if (!drive_player_id) {
        return res
          .status(400)
          .json({ success: false, error: 'Drive player ID is required' });
      }

      const result = await submitPublicScore({
        team_id,
        tournament_type: tournament_type as TournamentType,
        hole_number,
        strokes,
        drive_player_id,
        mulligan_player_id: mulligan_player_id || null,
      });

      return res.status(result.success ? 200 : 400).json(result);
    }

    // Handle multiple scores submission
    if (!Array.isArray(scores) || scores.length === 0) {
      return res.status(400).json({
        success: false,
        error: 'Scores array is required for bulk submission',
      });
    }

    // Format scores for bulk submission
    const formattedScores = scores.map((score) => ({
      team_id,
      tournament_type: tournament_type as TournamentType,
      hole_number: score.hole_number,
      strokes: score.strokes,
      drive_player_id: score.drive_player_id,
      mulligan_player_id: score.mulligan_player_id || null,
    }));

    const result = await submitPublicScores(formattedScores);

    return res.status(result.success ? 200 : 400).json(result);
  } catch (error) {
    console.error('Error handling score submission:', error);
    return res.status(500).json({
      success: false,
      error: 'Internal server error',
    });
  }
}
</file>

<file path="src/pages/tournament/[type].tsx">
import { clsx } from 'clsx';
import { AnimatePresence, motion } from 'framer-motion';
import { useRouter } from 'next/router';
import React, { useCallback, useEffect, useMemo, useState } from 'react';

import Layout from '../../components/layout/Layout';
import RealtimeNotification from '../../components/leaderboard/RealtimeNotification';
import ScoreInputForm from '../../components/scoreInput/ScoreInputForm';
import {
  formatRelativeToPar,
  formatThru,
  getScoreColorClass,
} from '../../lib/scoreFormatters';
import {
  getLeaderboard,
  getPlayersForTeam,
  getTeams,
} from '../../lib/supabaseQueries';
import { TournamentType } from '../../types/supabase';
import { supabase } from '../../utils/supabase-client';

type TabType = 'leaderboard' | 'scoreInput';

interface ScoreUpdateNotification {
  isVisible: boolean;
  teamName?: string;
  timestamp?: string;
}

// Define Player ID type
interface PlayerOption {
  id: string;
  initial: string;
  name: string;
}

export default function TournamentPage() {
  const router = useRouter();
  const { type } = router.query;
  const [activeTab, setActiveTab] = useState<TabType>('leaderboard');
  const [isLoading, setIsLoading] = useState(true);
  const [isUpdating, setIsUpdating] = useState(false);
  const [leaderboardData, setLeaderboardData] = useState<any>(null);
  const [tournamentDetails, setTournamentDetails] = useState<any>(null);
  const [teams, setTeams] = useState<any[]>([]);
  const [selectedTeam, setSelectedTeam] = useState<string>('');
  const [selectedTeamPlayers, setSelectedTeamPlayers] = useState<any[] | null>(
    null,
  );
  const [isLoadingPlayers, setIsLoadingPlayers] = useState<boolean>(false);
  const [expandedTeamId, setExpandedTeamId] = useState<string | null>(null);
  const [lastUpdateTime, setLastUpdateTime] = useState<string>(
    new Date().toLocaleTimeString(),
  );
  const [notification, setNotification] = useState<ScoreUpdateNotification>({
    isVisible: false,
  });
  const [recentlyUpdatedTeam, setRecentlyUpdatedTeam] = useState<string | null>(
    null,
  );
  const [showOriginalScoreInput, setShowOriginalScoreInput] =
    useState<boolean>(false);

  // Format tournament type for display (e.g., "2-man" -> "2-Man Scramble")
  const formatTournamentType = (type: string | string[] | undefined) => {
    if (!type || Array.isArray(type)) return 'Tournament';
    return type === '2-man' ? '2-Man Scramble' : '4-Man Scramble';
  };

  // Handle tab change
  const handleTabChange = (tab: TabType) => {
    setActiveTab(tab);
  };

  // Fetch leaderboard data - wrapped in useCallback
  const fetchLeaderboardData = useCallback(
    async (tournamentType: TournamentType, showLoading = true) => {
      try {
        if (showLoading) {
          setIsLoading(true);
        } else {
          setIsUpdating(true);
        }

        const leaderboard = await getLeaderboard(tournamentType);
        console.log('Fetched leaderboard data:', leaderboard);
        setLeaderboardData(leaderboard);
        setTournamentDetails(leaderboard.tournament);
        setLastUpdateTime(new Date().toLocaleTimeString());
      } catch (error) {
        console.error('Error fetching leaderboard data:', error);
      } finally {
        if (showLoading) {
          setIsLoading(false);
        }
        setIsUpdating(false);
      }
    },
    [setIsLoading, setIsUpdating],
  ); // Dependencies: state setters

  // Fetch initial data - wrapped in useCallback
  const fetchData = useCallback(async () => {
    if (!type || Array.isArray(type)) return;

    setIsLoading(true);
    try {
      const tournamentType = type as TournamentType;
      // Fetch details first if needed independently, otherwise leaderboard fetch includes it
      // const tournament = await getTournamentDetails(tournamentType);
      // setTournamentDetails(tournament);

      const teamsData = await getTeams(tournamentType);
      setTeams(teamsData);

      // Pass tournamentType directly to avoid depending on 'type' from outer scope
      await fetchLeaderboardData(tournamentType, false);
    } catch (error) {
      console.error('Error fetching tournament data:', error);
    } finally {
      setIsLoading(false);
    }
  }, [type, fetchLeaderboardData, setIsLoading, setTeams]); // Dependencies: type, stable fetch fn, setters

  // Realtime update handler - defined outside useEffect, wrapped in useCallback
  const handleRealtimeUpdate = useCallback(
    (payload: any) => {
      console.log('Real-time update received:', payload);
      const tournamentType = type as TournamentType;
      if (!tournamentType) return; // Guard against missing type

      const teamId =
        (payload.new as any)?.team_id || (payload.old as any)?.team_id;
      if (teamId) {
        setRecentlyUpdatedTeam(teamId);
        setTimeout(() => {
          setRecentlyUpdatedTeam(null);
        }, 3000);
      }

      setTimeout(async () => {
        // Pass tournamentType directly
        await fetchLeaderboardData(tournamentType, false);
      }, 500);

      if (activeTab === 'leaderboard' && (payload.new || payload.old)) {
        try {
          if (teamId === selectedTeam) return;
          const team = teams.find((t) => t.id === teamId); // Depends on teams
          if (team) {
            setNotification({
              isVisible: true,
              teamName: team.name,
              timestamp: new Date().toLocaleTimeString(),
            });
          }
        } catch (err) {
          console.error('Error handling realtime notification:', err);
        }
      }
    },
    [
      type,
      teams,
      activeTab,
      selectedTeam,
      fetchLeaderboardData,
      setRecentlyUpdatedTeam,
      setNotification,
    ],
  ); // Dependencies: values read + stable fetch fn + setters

  // Effect for initial fetch
  useEffect(() => {
    fetchData();
  }, [fetchData]); // Depends only on the stable fetchData callback

  // Effect for Supabase subscription
  useEffect(() => {
    if (!type || Array.isArray(type)) return;

    const tournamentType = type as TournamentType;

    console.log(`Setting up subscription for ${tournamentType}`);
    const channel = supabase
      .channel(`scores-updates-${tournamentType}`)
      .on(
        'postgres_changes',
        {
          event: '*',
          schema: 'public',
          table: 'scores',
          filter: `tournament_type=eq.${tournamentType}`,
        },
        handleRealtimeUpdate, // Use the stable callback
      )
      .subscribe((status) => {
        console.log('Subscription status:', status);
        if (status === 'SUBSCRIBED') {
          console.log(`Subscribed to scores changes for ${tournamentType}`);
        }
      });

    // Cleanup function
    return () => {
      console.log(`Unsubscribing from realtime updates for ${tournamentType}`);
      supabase.removeChannel(channel);
    };
    // Depend on type (to resubscribe if route changes) and the stable handler callback
  }, [type, handleRealtimeUpdate]);

  // Toggle team expansion in leaderboard
  const toggleTeamExpansion = (teamId: string) => {
    if (expandedTeamId === teamId) {
      setExpandedTeamId(null);
    } else {
      setExpandedTeamId(teamId);
    }
  };

  // Get minimum required drives based on tournament type
  const getMinDrivesPerPlayer = () => {
    // Default to 5 drives for 2-man scramble
    // 3 drives for 4-man scramble
    if (type === '4-man') {
      return 3;
    }
    return 5;
  };

  // Dismiss notification
  const dismissNotification = () => {
    setNotification((prev) => ({ ...prev, isVisible: false }));
  };

  // Memoize data specifically for the styling useEffect dependency array
  const memoizedCoursePars = useMemo(() => {
    return tournamentDetails?.course_pars;
  }, [tournamentDetails?.course_pars]);

  const memoizedPlayerMap = useMemo(() => {
    const map = new Map<string, number>();
    if (leaderboardData?.leaderboard && selectedTeam) {
      const currentTeamData = leaderboardData.leaderboard.find(
        (item: any) => item.team.id === selectedTeam,
      );
      if (currentTeamData?.driveCounts) {
        currentTeamData.driveCounts.forEach((dc: any, index: number) => {
          if (index < 2 && dc.id) {
            map.set(dc.id, index);
          }
        });
      }
    }
    return map;
  }, [leaderboardData?.leaderboard, selectedTeam]);

  // Sort the leaderboard data by Gross score ascending first, then NET score
  const sortedLeaderboard = React.useMemo(() => {
    if (!leaderboardData?.leaderboard) return [];

    return [...leaderboardData.leaderboard].sort((a, b) => {
      // First sort by gross score (ascending)
      if (a.relativeToPar !== b.relativeToPar) {
        return a.relativeToPar - b.relativeToPar;
      }
      // Then sort by net score if gross is the same
      return a.netRelativeToPar - b.netRelativeToPar;
    });
  }, [leaderboardData?.leaderboard]);

  // Toggle between original score input and styled score input
  const toggleScoreInputMode = () => {
    setShowOriginalScoreInput((prev) => !prev);
  };

  // --- Effect to Fetch Players for Selected Team ---
  useEffect(() => {
    const fetchPlayers = async () => {
      if (!selectedTeam) {
        setSelectedTeamPlayers(null); // Clear players if no team is selected
        return;
      }

      setIsLoadingPlayers(true);
      setSelectedTeamPlayers(null); // Clear previous players while loading
      try {
        console.log(`Fetching players for selected team: ${selectedTeam}`);
        const players = await getPlayersForTeam(selectedTeam);
        console.log('Fetched players:', players);
        setSelectedTeamPlayers(players);
      } catch (error) {
        console.error('Error fetching selected team players:', error);
        setSelectedTeamPlayers([]); // Set to empty array on error to avoid constant loading
      } finally {
        setIsLoadingPlayers(false);
      }
    };

    fetchPlayers();
  }, [selectedTeam]); // Re-run only when selectedTeam changes

  return (
    <Layout>
      {/* Reduce outer container padding */}
      <div className='container mx-auto px-1 py-4 md:px-2 md:py-8'>
        {/* Removed H1 Header */}

        {/* Sticky Tab Navigation */}
        <div className='sticky top-0 bg-white z-10 shadow-md border-b border-gray-200 mb-6'>
          {/* Reduce padding in sticky header */}
          <div className='flex space-x-8 justify-center max-w-7xl mx-auto px-2 sm:px-4 lg:px-6'>
            <button
              onClick={() => handleTabChange('leaderboard')}
              className={clsx(
                'py-3 px-1 border-b-2 font-medium text-sm', // Reduced padding
                activeTab === 'leaderboard'
                  ? 'border-primary text-primary'
                  : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300',
              )}
            >
              Leaderboard
            </button>
            <button
              onClick={() => handleTabChange('scoreInput')}
              className={clsx(
                'py-3 px-1 border-b-2 font-medium text-sm', // Reduced padding
                activeTab === 'scoreInput'
                  ? 'border-primary text-primary'
                  : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300',
              )}
            >
              Score Input
            </button>
          </div>
        </div>

        {/* Tab Content - Reduce padding */}
        <div className='py-2 max-w-7xl mx-auto px-1 sm:px-2 lg:px-4'>
          {isLoading ? (
            <div className='flex justify-center items-center h-64'>
              <p className='text-gray-500'>Loading...</p>
            </div>
          ) : (
            <AnimatePresence mode='wait' initial={false}>
              {activeTab === 'leaderboard' && (
                <motion.div
                  key='leaderboard'
                  initial={{ opacity: 0 }}
                  animate={{ opacity: 1 }}
                  exit={{ opacity: 0 }}
                  transition={{ duration: 0.2 }}
                >
                  {/* Leaderboard Table - Container for scrolling & sticky header */}
                  <div className='bg-white shadow-md rounded-lg overflow-hidden'>
                    {/* Sticky Header Row - Always visible, abbreviated on mobile. Adjusted top offset. */}
                    <div className='sticky top-[0px] z-10 flex bg-gray-200 text-gray-700 uppercase text-xs leading-normal border-b border-gray-300'>
                      {/* Use spans with hidden/md:inline for title switching */}
                      <div className='py-2 px-2 md:px-3 text-left w-[35%] md:w-1/4'>
                        <span className='md:hidden'>T</span>
                        <span className='hidden md:inline'>Team</span>
                      </div>
                      <div className='py-2 px-1 md:px-3 text-center w-[15%] md:w-1/4'>
                        <span className='md:hidden'>G</span>
                        <span className='hidden md:inline'>Gross</span>
                      </div>
                      <div className='py-2 px-1 md:px-3 text-center w-[15%] md:w-1/4'>
                        <span className='md:hidden'>N</span>
                        <span className='hidden md:inline'>Net</span>
                      </div>
                      <div className='py-2 px-1 md:px-3 text-center w-[15%] md:w-1/4'>
                        <span className='md:hidden'>Thru</span>
                        <span className='hidden md:inline'>Thru</span>
                      </div>
                      <div className='py-2 px-2 md:px-3 text-center w-[20%] md:w-1/4'>
                        <span className='md:hidden'>M</span>
                        <span className='hidden md:inline'>Mulleys</span>
                      </div>
                    </div>

                    {/* Team Rows - Container for horizontal scroll if needed */}
                    <div className='overflow-x-auto'>
                      <div className='divide-y divide-gray-200 min-w-[360px]'>
                        {sortedLeaderboard.map((item: any) => (
                          <React.Fragment key={item.team.id}>
                            {/* Main Row - Adjusted widths and padding */}
                            <div
                              className={`flex items-center py-3 px-2 md:px-3 cursor-pointer hover:bg-gray-50 ${recentlyUpdatedTeam === item.team.id ? 'bg-blue-50 transition-colors duration-1000' : ''}`}
                              onClick={() => toggleTeamExpansion(item.team.id)}
                            >
                              {/* Team Name - Adjusted width */}
                              <div className='w-[35%] md:w-1/4 text-xs md:text-sm font-medium text-gray-800 flex items-center truncate pr-1'>
                                <span
                                  className={`inline-block mr-1 transition-transform duration-200 ${expandedTeamId === item.team.id ? 'transform rotate-90' : ''}`}
                                >
                                  ▶
                                </span>
                                {item.team.name}
                              </div>
                              {/* Scores & Thru - Adjusted widths & padding */}
                              <div
                                className={`w-[15%] md:w-1/4 text-center text-xs md:text-sm font-semibold px-1 ${getScoreColorClass(item.relativeToPar)}`}
                              >
                                {formatRelativeToPar(item.relativeToPar)}
                              </div>
                              <div
                                className={`w-[15%] md:w-1/4 text-center text-xs md:text-sm px-1 ${getScoreColorClass(item.netRelativeToPar)}`}
                              >
                                {formatRelativeToPar(item.netRelativeToPar)}
                              </div>
                              <div className='w-[15%] md:w-1/4 text-center text-xs md:text-sm px-1 text-gray-600'>
                                {formatThru(item.holesCompleted)}
                              </div>
                              {/* Mulleys - Adjusted width */}
                              <div className='w-[20%] md:w-1/4 text-center text-xs md:text-sm px-2 text-gray-600'>
                                {item.totalRemainingMulligans}
                              </div>
                            </div>

                            {/* Expanded Detail View - Reduce padding */}
                            {expandedTeamId === item.team.id && (
                              <div className='bg-gray-50 px-2 md:px-4 py-3 space-y-3'>
                                {/* Player Stats Section - Ultra Compact on mobile */}
                                <h3 className='text-base font-medium text-gray-900 mb-1'>
                                  Player Stats
                                </h3>
                                <div className='space-y-1 text-xs md:text-sm'>
                                  {item.driveCounts.map(
                                    (dc: any, index: number) => {
                                      const mulliganInfo =
                                        item.mulliganCounts.find(
                                          (mc: any) => mc.id === dc.id,
                                        );
                                      return (
                                        <div
                                          key={dc.id}
                                          className='flex justify-between'
                                        >
                                          <span>{dc.name}:</span>
                                          <span>
                                            <span
                                              className={
                                                dc.count >=
                                                getMinDrivesPerPlayer()
                                                  ? 'text-green-600'
                                                  : 'text-orange-600'
                                              }
                                            >
                                              {dc.count} Drives
                                            </span>
                                            <span className='ml-2 text-blue-600'>
                                              {mulliganInfo?.remaining || 0}{' '}
                                              Mulleys
                                            </span>
                                          </span>
                                        </div>
                                      );
                                    },
                                  )}
                                </div>

                                {/* Hole Scores - Reduce padding */}
                                <h3 className='text-base font-medium text-gray-900 mb-2 mt-4'>
                                  Hole Scores
                                </h3>
                                <div className='overflow-x-auto'>
                                  <table className='min-w-full border border-gray-200 text-xs'>
                                    <thead>
                                      <tr className='bg-gray-50'>
                                        <th className='py-1 px-1 md:px-2 text-left font-medium text-gray-500 uppercase tracking-wider border-b'>
                                          Hole
                                        </th>
                                        {Array.from(
                                          { length: 18 },
                                          (_, i) => i + 1,
                                        ).map((hole) => (
                                          <th
                                            key={hole}
                                            className='py-1 px-1 md:px-2 text-center font-medium text-gray-500 uppercase tracking-wider border-b border-l'
                                          >
                                            {hole}
                                          </th>
                                        ))}
                                      </tr>
                                    </thead>
                                    <tbody className='bg-white divide-y divide-gray-200'>
                                      {/* Par Row */}
                                      <tr>
                                        <td className='py-1 px-1 md:px-2 font-medium text-gray-900 border-r'>
                                          Par
                                        </td>
                                        {Array.from(
                                          { length: 18 },
                                          (_, i) => i + 1,
                                        ).map((hole) => {
                                          const holePar =
                                            tournamentDetails?.course_pars[
                                              hole.toString()
                                            ] || '–';
                                          return (
                                            <td
                                              key={hole}
                                              className='py-1 px-1 md:px-2 text-center text-gray-800 border-r'
                                            >
                                              {holePar}
                                            </td>
                                          );
                                        })}
                                      </tr>

                                      {/* Score Row */}
                                      <tr>
                                        <td className='py-1 px-1 md:px-2 font-medium text-gray-900 border-r'>
                                          Score
                                        </td>
                                        {Array.from(
                                          { length: 18 },
                                          (_, i) => i + 1,
                                        ).map((hole) => {
                                          const holeScore = item.scores.find(
                                            (s: any) => s.hole_number === hole,
                                          );
                                          const holePar =
                                            tournamentDetails?.course_pars[
                                              hole.toString()
                                            ];
                                          const relativeScore = holeScore
                                            ? holeScore.strokes - holePar
                                            : null;

                                          return (
                                            <td
                                              key={hole}
                                              className={`py-1 px-1 md:px-2 text-center border-r ${holeScore ? getScoreColorClass(relativeScore as number) : 'text-gray-400'}`}
                                            >
                                              {holeScore
                                                ? holeScore.strokes
                                                : '–'}
                                            </td>
                                          );
                                        })}
                                      </tr>

                                      {/* Drive Row */}
                                      <tr>
                                        <td className='py-1 px-1 md:px-2 font-medium text-gray-900 border-r'>
                                          Drive
                                        </td>
                                        {Array.from(
                                          { length: 18 },
                                          (_, i) => i + 1,
                                        ).map((hole) => {
                                          const holeScore = item.scores.find(
                                            (s: any) => s.hole_number === hole,
                                          );
                                          const driverInitial = holeScore
                                            ?.drive_player?.name
                                            ? holeScore.drive_player.name.charAt(
                                                0,
                                              )
                                            : '–';

                                          return (
                                            <td
                                              key={hole}
                                              className='py-1 px-1 md:px-2 text-center text-gray-800 border-r'
                                            >
                                              {driverInitial}
                                            </td>
                                          );
                                        })}
                                      </tr>

                                      {/* Mulligan Row */}
                                      <tr>
                                        <td className='py-1 px-1 md:px-2 font-medium text-gray-900 border-r'>
                                          Mulligan
                                        </td>
                                        {Array.from(
                                          { length: 18 },
                                          (_, i) => i + 1,
                                        ).map((hole) => {
                                          const holeScore = item.scores.find(
                                            (s: any) => s.hole_number === hole,
                                          );
                                          const mulliganInitial = holeScore
                                            ?.mulligan_player?.name
                                            ? holeScore.mulligan_player.name.charAt(
                                                0,
                                              )
                                            : '–';

                                          return (
                                            <td
                                              key={hole}
                                              className={`py-1 px-1 md:px-2 text-center border-r ${holeScore?.mulligan_player ? 'text-orange-500 font-medium' : 'text-gray-400'}`}
                                            >
                                              {mulliganInitial}
                                            </td>
                                          );
                                        })}
                                      </tr>
                                    </tbody>
                                  </table>
                                </div>
                              </div>
                            )}
                          </React.Fragment>
                        ))}
                      </div>
                    </div>
                  </div>

                  {/* Refresh Controls - MOVED HERE & MODIFIED */}
                  <div className='flex justify-end items-center mt-4 space-x-2 px-1'>
                    <span className='text-xs text-gray-500 flex items-center'>
                      Last updated: {lastUpdateTime}
                      {isUpdating && (
                        <svg
                          className='animate-spin ml-2 h-4 w-4 text-gray-500'
                          xmlns='http://www.w3.org/2000/svg'
                          fill='none'
                          viewBox='0 0 24 24'
                        >
                          <circle
                            className='opacity-25'
                            cx='12'
                            cy='12'
                            r='10'
                            stroke='currentColor'
                            strokeWidth='4'
                          ></circle>
                          <path
                            className='opacity-75'
                            fill='currentColor'
                            d='M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z'
                          ></path>
                        </svg>
                      )}
                    </span>
                    <div className='flex space-x-1'>
                      <button
                        onClick={() =>
                          fetchLeaderboardData(type as TournamentType, false)
                        }
                        className='text-xs bg-gray-200 hover:bg-gray-300 text-gray-700 py-1 px-2 rounded'
                        disabled={isUpdating}
                      >
                        Refresh
                      </button>
                      {/* Full Refresh Button Removed */}
                    </div>
                  </div>
                </motion.div>
              )}

              {activeTab === 'scoreInput' && (
                <motion.div
                  key='scoreInput'
                  initial={{ opacity: 0 }}
                  animate={{ opacity: 1 }}
                  exit={{ opacity: 0 }}
                  transition={{ duration: 0.2 }}
                  className='bg-white shadow-md rounded-lg p-2 md:p-4'
                >
                  {/* Removed Duplicate Score Input Header */}

                  {/* Team Selection */}
                  {!selectedTeam ? (
                    <div className='mb-6'>
                      <h2 className='text-xl md:text-2xl font-semibold text-center mb-4 text-primary'>
                        Score Input
                      </h2>
                      <p className='text-center text-gray-600 mb-4 text-sm md:text-base'>
                        Select your team to begin entering scores.
                      </p>

                      <div className='max-w-sm mx-auto'>
                        <label
                          htmlFor='team-select'
                          className='block text-base md:text-lg font-medium text-gray-700 mb-2 text-center'
                        >
                          Select Your Team
                        </label>
                        <div className='relative'>
                          <select
                            id='team-select'
                            value={selectedTeam}
                            onChange={(e) => setSelectedTeam(e.target.value)}
                            className='block w-full pl-3 pr-8 py-2 text-sm md:text-base border-2 border-gray-300 focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary rounded-lg shadow-sm appearance-none bg-white'
                          >
                            <option value=''>-- Choose a team --</option>
                            {teams.map((team) => (
                              <option key={team.id} value={team.id}>
                                {team.name}
                              </option>
                            ))}
                          </select>
                          <div className='pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700'>
                            <svg
                              className='h-4 w-4 md:h-5 md:w-5'
                              xmlns='http://www.w3.org/2000/svg'
                              viewBox='0 0 20 20'
                              fill='currentColor'
                              aria-hidden='true'
                            >
                              <path
                                fillRule='evenodd'
                                d='M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z'
                                clipRule='evenodd'
                              />
                            </svg>
                          </div>
                        </div>
                      </div>
                    </div>
                  ) : (
                    <>
                      {/* Original Score Input Form (if toggled) */}
                      {showOriginalScoreInput ? (
                        <ScoreInputForm
                          key={selectedTeam}
                          teamId={selectedTeam}
                          tournamentType={type as TournamentType}
                          minDrivesPerPlayer={getMinDrivesPerPlayer()}
                          coursePars={tournamentDetails?.course_pars}
                          playerMap={memoizedPlayerMap}
                        />
                      ) : (
                        <div className='bg-gray-50 p-2 md:p-4 rounded-lg'>
                          {/* Header section for selected team - Reduced padding & Repositioned Button */}
                          <div className='mb-4'>
                            <div className='flex flex-col sm:flex-row justify-between items-start mb-1'>
                              {/* Team Name & Score Info */}
                              <div className='mb-2 sm:mb-0'>
                                <p className='text-gray-600 text-base md:text-lg'>
                                  Scores for:{' '}
                                  <span className='font-bold'>
                                    {
                                      teams.find((t) => t.id === selectedTeam)
                                        ?.name
                                    }
                                  </span>
                                </p>
                              </div>
                              {/* Removed Original UI Button */}
                            </div>
                            {/* Moved Change Team Button Here */}
                            <button
                              onClick={() => setSelectedTeam('')}
                              className='text-xs md:text-sm bg-gray-100 hover:bg-gray-200 text-gray-700 py-1 px-2 rounded-lg shadow-sm mt-1'
                            >
                              Change Team
                            </button>
                          </div>

                          {/* Combined Player Stats Summary Component */}
                          {(() => {
                            // Show loading state while fetching players
                            if (isLoadingPlayers) {
                              return (
                                <div className='bg-white p-3 rounded-lg shadow-sm mb-4 text-center text-gray-500'>
                                  Loading player stats...
                                </div>
                              );
                            }

                            // Ensure we have the fetched players for the selected team
                            if (
                              !selectedTeamPlayers ||
                              selectedTeamPlayers.length === 0
                            ) {
                              // This case should be less common now, but handle it.
                              // Could display an error or minimal info if needed.
                              return (
                                <div className='bg-white p-3 rounded-lg shadow-sm mb-4 text-center text-red-500'>
                                  Could not load player stats for this team.
                                </div>
                              );
                            }

                            // Find optional dynamic data from leaderboard
                            const teamData = leaderboardData?.leaderboard?.find(
                              (item: any) => item.team.id === selectedTeam,
                            );

                            // Determine score and mulligans with defaults
                            const relativeToPar = teamData?.relativeToPar ?? 0; // Default to 0 (E)
                            const defaultMulligans =
                              tournamentDetails?.mulligans_allowed ?? 0;

                            // Build display list from selectedTeamPlayers, merging leaderboard data
                            const playersToDisplay = selectedTeamPlayers.map(
                              (player: any) => {
                                const driveInfo = teamData?.driveCounts?.find(
                                  (dc: any) => dc.id === player.id,
                                );
                                const mulliganInfo =
                                  teamData?.mulliganCounts?.find(
                                    (mc: any) => mc.id === player.id,
                                  );

                                return {
                                  id: player.id,
                                  name: player.name,
                                  initials:
                                    player.name?.substring(0, 2) || '??',
                                  drives: driveInfo?.count ?? 0, // Default to 0 drives
                                  mulligans:
                                    mulliganInfo?.remaining ?? defaultMulligans, // Default to max mulligans
                                };
                              },
                            );

                            // Render the component using playersToDisplay
                            return (
                              <div className='bg-white p-3 rounded-lg shadow-sm mb-4'>
                                <div className='flex justify-around items-start text-center'>
                                  {/* Score Section */}
                                  <div className='flex flex-col items-center w-1/3'>
                                    <span className='text-xs text-gray-500 uppercase font-medium mb-1'>
                                      Score
                                    </span>
                                    <span
                                      className={`text-2xl font-bold ${getScoreColorClass(relativeToPar)}`}
                                    >
                                      {formatRelativeToPar(relativeToPar)}
                                    </span>
                                  </div>

                                  {/* Drives Section */}
                                  <div className='flex flex-col items-center w-1/3 border-l border-gray-200 px-2'>
                                    <span className='text-xs text-gray-500 uppercase font-medium mb-1'>
                                      Drives Used
                                    </span>
                                    <div className='flex justify-center space-x-4 text-xs text-gray-700 mb-1'>
                                      {playersToDisplay.map((p: any) => (
                                        <span key={p.id}>{p.initials}</span>
                                      ))}
                                    </div>
                                    <div className='flex justify-center space-x-4 text-lg font-semibold'>
                                      {playersToDisplay.map((p: any) => (
                                        <span key={p.id}>{p.drives}</span>
                                      ))}
                                    </div>
                                  </div>

                                  {/* Mulligans Section */}
                                  <div className='flex flex-col items-center w-1/3 border-l border-gray-200 px-2'>
                                    <span className='text-xs text-gray-500 uppercase font-medium mb-1'>
                                      Mulleys
                                    </span>
                                    <div className='flex justify-center space-x-4 text-xs text-gray-700 mb-1'>
                                      {playersToDisplay.map((p: any) => (
                                        <span key={p.id}>{p.initials}</span>
                                      ))}
                                    </div>
                                    <div className='flex justify-center space-x-4 text-lg font-semibold'>
                                      {playersToDisplay.map((p: any) => (
                                        <span key={p.id}>{p.mulligans}</span>
                                      ))}
                                    </div>
                                  </div>
                                </div>
                              </div>
                            );
                          })()}

                          {/* Keep Custom CSS for global styles (like player colors, etc.) */}
                          <style jsx global>{`
                            /* Hide the Status column */
                            .score-input-wrapper th:nth-child(6),
                            .score-input-wrapper td:nth-child(6) {
                              display: none !important;
                            }
                            /* Hide original Drive Counts */
                            .score-input-wrapper
                              [data-testid='drive-counts-section'] {
                              display: none !important;
                            }
                            /* Cell Padding */
                            .score-input-wrapper th,
                            .score-input-wrapper td {
                              padding: 0.375rem 0.375rem !important;
                            }
                            .score-input-wrapper th:first-child,
                            .score-input-wrapper td:first-child {
                              padding-left: 0.5rem !important;
                            }
                            /* Input base style */
                            .score-input-wrapper input[type='number'] {
                              transition: background-color 0.2s ease;
                              padding: 0.25rem !important;
                              font-size: 0.875rem !important;
                              text-align: center;
                              border-radius: 0.375rem;
                            }
                            /* Score Colors */
                            .score-input-wrapper .score-eagle {
                              background-color: #a7f3d0 !important; /* Tailwind green-200 */
                              color: #065f46 !important; /* Tailwind green-800 */
                              font-weight: 700; /* Bold */
                              border: 1px solid #065f46 !important; /* Add border */
                            }
                            .score-input-wrapper .score-birdie {
                              background-color: #d1fae5 !important; /* Tailwind green-100 */
                              color: #047857 !important; /* Tailwind green-700 */
                              font-weight: 600;
                            }
                            .score-input-wrapper .score-equal-par {
                              background-color: #f3f4f6 !important; /* Tailwind gray-100 */
                              color: #1f2937 !important; /* Tailwind gray-800 */
                            }
                            .score-input-wrapper .score-bogey {
                              background-color: #fee2e2 !important; /* Tailwind red-100 */
                              color: #b91c1c !important; /* Tailwind red-700 */
                              font-weight: 600;
                            }
                            .score-input-wrapper .score-double-bogey-plus {
                              background-color: #fecaca !important; /* Tailwind red-200 */
                              color: #991b1b !important; /* Tailwind red-800 */
                              font-weight: 700; /* Bold */
                              border: 1px solid #991b1b !important; /* Add border */
                            }
                            /* Select base style */
                            .score-input-wrapper select {
                              padding: 0.25rem 0.5rem !important;
                              font-size: 0.875rem !important;
                              transition: background-color 0.2s ease;
                            }
                            /* Player Select Colors */
                            .score-input-wrapper .player1-selected {
                              background-color: #dbeafe !important;
                              color: #1e40af !important;
                              font-weight: 600;
                            }
                            .score-input-wrapper .player2-selected {
                              background-color: #fef3c7 !important;
                              color: #92400e !important;
                              font-weight: 600;
                            }
                            /* Current Score (in header) */
                            .current-score {
                              font-size: 1.125rem;
                              font-weight: 600;
                              margin-top: 0.25rem;
                              display: flex;
                              align-items: center;
                              gap: 0.5rem;
                            }
                            .score-value {
                              padding: 0.125rem 0.5rem;
                              border-radius: 0.375rem;
                              font-size: 1.125rem;
                            }
                            .score-value.negative {
                              background-color: #d1fae5;
                              color: #065f46;
                            }
                            .score-value.positive {
                              background-color: #fee2e2;
                              color: #b91c1c;
                            }
                            .score-value.even {
                              background-color: #f3f4f6;
                              color: #1f2937;
                            }
                          `}</style>

                          {/* ScoreInputForm Wrapper */}
                          <div className='score-input-wrapper overflow-x-auto'>
                            <ScoreInputForm
                              key={selectedTeam}
                              teamId={selectedTeam}
                              tournamentType={type as TournamentType}
                              minDrivesPerPlayer={getMinDrivesPerPlayer()}
                              coursePars={tournamentDetails?.course_pars}
                              playerMap={memoizedPlayerMap}
                            />
                          </div>
                        </div>
                      )}
                    </>
                  )}
                </motion.div>
              )}
            </AnimatePresence>
          )}
        </div>
      </div>

      {/* Real-time notifications */}
      <RealtimeNotification
        isVisible={notification.isVisible}
        teamName={notification.teamName}
        timestamp={notification.timestamp}
        onDismiss={dismissNotification}
      />
    </Layout>
  );
}
</file>

<file path="src/pages/LeaderboardPage.tsx">
import React from 'react';

import Layout from '../components/layout/Layout';
import { LeaderboardTable } from '../components/leaderboard/LeaderboardTable';

export function LeaderboardPage() {
  return (
    <Layout>
      <div className='w-full bg-[#F3F4F6] py-8 md:py-12'>
        <div className='container mx-auto px-4'>
          <h1 className='text-3xl md:text-4xl font-bold mb-8 text-center text-[#0B3D2E]'>
            Tournament Leaderboard
          </h1>
          <LeaderboardTable />
        </div>
      </div>
    </Layout>
  );
}

export default LeaderboardPage;
</file>

<file path="src/styles/colors.css">
/* //!STARTERCONF Remove this file after copying your desired color, this is a large file you should remove it. */

.slate {
  --tw-color-primary-50: 248 250 252;
  --tw-color-primary-100: 241 245 249;
  --tw-color-primary-200: 226 232 240;
  --tw-color-primary-300: 203 213 225;
  --tw-color-primary-400: 148 163 184;
  --tw-color-primary-500: 100 116 139;
  --tw-color-primary-600: 71 85 105;
  --tw-color-primary-700: 51 65 85;
  --tw-color-primary-800: 30 41 59;
  --tw-color-primary-900: 15 23 42;
  --tw-color-primary-950: 2 6 23;
  --color-primary-50: rgb(var(--tw-color-primary-50)); /* #f8fafc */
  --color-primary-100: rgb(var(--tw-color-primary-100)); /* #f1f5f9 */
  --color-primary-200: rgb(var(--tw-color-primary-200)); /* #e2e8f0 */
  --color-primary-300: rgb(var(--tw-color-primary-300)); /* #cbd5e1 */
  --color-primary-400: rgb(var(--tw-color-primary-400)); /* #94a3b8 */
  --color-primary-500: rgb(var(--tw-color-primary-500)); /* #64748b */
  --color-primary-600: rgb(var(--tw-color-primary-600)); /* #475569 */
  --color-primary-700: rgb(var(--tw-color-primary-700)); /* #334155 */
  --color-primary-800: rgb(var(--tw-color-primary-800)); /* #1e293b */
  --color-primary-900: rgb(var(--tw-color-primary-900)); /* #0f172a */
  --color-primary-950: rgb(var(--tw-color-primary-950)); /* #020617 */
}

.gray {
  --tw-color-primary-50: 249 250 251;
  --tw-color-primary-100: 243 244 246;
  --tw-color-primary-200: 229 231 235;
  --tw-color-primary-300: 209 213 219;
  --tw-color-primary-400: 156 163 175;
  --tw-color-primary-500: 107 114 128;
  --tw-color-primary-600: 75 85 99;
  --tw-color-primary-700: 55 65 81;
  --tw-color-primary-800: 31 41 55;
  --tw-color-primary-900: 17 24 39;
  --tw-color-primary-950: 3 7 18;
  --color-primary-50: rgb(var(--tw-color-primary-50)); /* #f9fafb */
  --color-primary-100: rgb(var(--tw-color-primary-100)); /* #f3f4f6 */
  --color-primary-200: rgb(var(--tw-color-primary-200)); /* #e5e7eb */
  --color-primary-300: rgb(var(--tw-color-primary-300)); /* #d1d5db */
  --color-primary-400: rgb(var(--tw-color-primary-400)); /* #9ca3af */
  --color-primary-500: rgb(var(--tw-color-primary-500)); /* #6b7280 */
  --color-primary-600: rgb(var(--tw-color-primary-600)); /* #4b5563 */
  --color-primary-700: rgb(var(--tw-color-primary-700)); /* #374151 */
  --color-primary-800: rgb(var(--tw-color-primary-800)); /* #1f2937 */
  --color-primary-900: rgb(var(--tw-color-primary-900)); /* #111827 */
  --color-primary-950: rgb(var(--tw-color-primary-950)); /* #030712 */
}

.zinc {
  --tw-color-primary-50: 250 250 250;
  --tw-color-primary-100: 244 244 245;
  --tw-color-primary-200: 228 228 231;
  --tw-color-primary-300: 212 212 216;
  --tw-color-primary-400: 161 161 170;
  --tw-color-primary-500: 113 113 122;
  --tw-color-primary-600: 82 82 91;
  --tw-color-primary-700: 63 63 70;
  --tw-color-primary-800: 39 39 42;
  --tw-color-primary-900: 24 24 27;
  --tw-color-primary-950: 9 9 11;
  --color-primary-50: rgb(var(--tw-color-primary-50)); /* #fafafa */
  --color-primary-100: rgb(var(--tw-color-primary-100)); /* #f4f4f5 */
  --color-primary-200: rgb(var(--tw-color-primary-200)); /* #e4e4e7 */
  --color-primary-300: rgb(var(--tw-color-primary-300)); /* #d4d4d8 */
  --color-primary-400: rgb(var(--tw-color-primary-400)); /* #a1a1aa */
  --color-primary-500: rgb(var(--tw-color-primary-500)); /* #71717a */
  --color-primary-600: rgb(var(--tw-color-primary-600)); /* #52525b */
  --color-primary-700: rgb(var(--tw-color-primary-700)); /* #3f3f46 */
  --color-primary-800: rgb(var(--tw-color-primary-800)); /* #27272a */
  --color-primary-900: rgb(var(--tw-color-primary-900)); /* #18181b */
  --color-primary-950: rgb(var(--tw-color-primary-950)); /* #09090b */
}

.neutral {
  --tw-color-primary-50: 250 250 250;
  --tw-color-primary-100: 245 245 245;
  --tw-color-primary-200: 229 229 229;
  --tw-color-primary-300: 212 212 212;
  --tw-color-primary-400: 163 163 163;
  --tw-color-primary-500: 115 115 115;
  --tw-color-primary-600: 82 82 82;
  --tw-color-primary-700: 64 64 64;
  --tw-color-primary-800: 38 38 38;
  --tw-color-primary-900: 23 23 23;
  --tw-color-primary-950: 10 10 10;
  --color-primary-50: rgb(var(--tw-color-primary-50)); /* #fafafa */
  --color-primary-100: rgb(var(--tw-color-primary-100)); /* #f5f5f5 */
  --color-primary-200: rgb(var(--tw-color-primary-200)); /* #e5e5e5 */
  --color-primary-300: rgb(var(--tw-color-primary-300)); /* #d4d4d4 */
  --color-primary-400: rgb(var(--tw-color-primary-400)); /* #a3a3a3 */
  --color-primary-500: rgb(var(--tw-color-primary-500)); /* #737373 */
  --color-primary-600: rgb(var(--tw-color-primary-600)); /* #525252 */
  --color-primary-700: rgb(var(--tw-color-primary-700)); /* #404040 */
  --color-primary-800: rgb(var(--tw-color-primary-800)); /* #262626 */
  --color-primary-900: rgb(var(--tw-color-primary-900)); /* #171717 */
  --color-primary-950: rgb(var(--tw-color-primary-950)); /* #0a0a0a */
}

.stone {
  --tw-color-primary-50: 250 250 249;
  --tw-color-primary-100: 245 245 244;
  --tw-color-primary-200: 231 229 228;
  --tw-color-primary-300: 214 211 209;
  --tw-color-primary-400: 168 162 158;
  --tw-color-primary-500: 120 113 108;
  --tw-color-primary-600: 87 83 78;
  --tw-color-primary-700: 68 64 60;
  --tw-color-primary-800: 41 37 36;
  --tw-color-primary-900: 28 25 23;
  --tw-color-primary-950: 12 10 9;
  --color-primary-50: rgb(var(--tw-color-primary-50)); /* #fafaf9 */
  --color-primary-100: rgb(var(--tw-color-primary-100)); /* #f5f5f4 */
  --color-primary-200: rgb(var(--tw-color-primary-200)); /* #e7e5e4 */
  --color-primary-300: rgb(var(--tw-color-primary-300)); /* #d6d3d1 */
  --color-primary-400: rgb(var(--tw-color-primary-400)); /* #a8a29e */
  --color-primary-500: rgb(var(--tw-color-primary-500)); /* #78716c */
  --color-primary-600: rgb(var(--tw-color-primary-600)); /* #57534e */
  --color-primary-700: rgb(var(--tw-color-primary-700)); /* #44403c */
  --color-primary-800: rgb(var(--tw-color-primary-800)); /* #292524 */
  --color-primary-900: rgb(var(--tw-color-primary-900)); /* #1c1917 */
  --color-primary-950: rgb(var(--tw-color-primary-950)); /* #0c0a09 */
}

.red {
  --tw-color-primary-50: 254 242 242;
  --tw-color-primary-100: 254 226 226;
  --tw-color-primary-200: 254 202 202;
  --tw-color-primary-300: 252 165 165;
  --tw-color-primary-400: 248 113 113;
  --tw-color-primary-500: 239 68 68;
  --tw-color-primary-600: 220 38 38;
  --tw-color-primary-700: 185 28 28;
  --tw-color-primary-800: 153 27 27;
  --tw-color-primary-900: 127 29 29;
  --tw-color-primary-950: 69 10 10;
  --color-primary-50: rgb(var(--tw-color-primary-50)); /* #fef2f2 */
  --color-primary-100: rgb(var(--tw-color-primary-100)); /* #fee2e2 */
  --color-primary-200: rgb(var(--tw-color-primary-200)); /* #fecaca */
  --color-primary-300: rgb(var(--tw-color-primary-300)); /* #fca5a5 */
  --color-primary-400: rgb(var(--tw-color-primary-400)); /* #f87171 */
  --color-primary-500: rgb(var(--tw-color-primary-500)); /* #ef4444 */
  --color-primary-600: rgb(var(--tw-color-primary-600)); /* #dc2626 */
  --color-primary-700: rgb(var(--tw-color-primary-700)); /* #b91c1c */
  --color-primary-800: rgb(var(--tw-color-primary-800)); /* #991b1b */
  --color-primary-900: rgb(var(--tw-color-primary-900)); /* #7f1d1d */
  --color-primary-950: rgb(var(--tw-color-primary-950)); /* #450a0a */
}

.orange {
  --tw-color-primary-50: 255 247 237;
  --tw-color-primary-100: 255 237 213;
  --tw-color-primary-200: 254 215 170;
  --tw-color-primary-300: 253 186 116;
  --tw-color-primary-400: 251 146 60;
  --tw-color-primary-500: 249 115 22;
  --tw-color-primary-600: 234 88 12;
  --tw-color-primary-700: 194 65 12;
  --tw-color-primary-800: 154 52 18;
  --tw-color-primary-900: 124 45 18;
  --tw-color-primary-950: 67 20 7;
  --color-primary-50: rgb(var(--tw-color-primary-50)); /* #fff7ed */
  --color-primary-100: rgb(var(--tw-color-primary-100)); /* #ffedd5 */
  --color-primary-200: rgb(var(--tw-color-primary-200)); /* #fed7aa */
  --color-primary-300: rgb(var(--tw-color-primary-300)); /* #fdba74 */
  --color-primary-400: rgb(var(--tw-color-primary-400)); /* #fb923c */
  --color-primary-500: rgb(var(--tw-color-primary-500)); /* #f97316 */
  --color-primary-600: rgb(var(--tw-color-primary-600)); /* #ea580c */
  --color-primary-700: rgb(var(--tw-color-primary-700)); /* #c2410c */
  --color-primary-800: rgb(var(--tw-color-primary-800)); /* #9a3412 */
  --color-primary-900: rgb(var(--tw-color-primary-900)); /* #7c2d12 */
  --color-primary-950: rgb(var(--tw-color-primary-950)); /* #431407 */
}

.amber {
  --tw-color-primary-50: 255 251 235;
  --tw-color-primary-100: 254 243 199;
  --tw-color-primary-200: 253 230 138;
  --tw-color-primary-300: 252 211 77;
  --tw-color-primary-400: 251 191 36;
  --tw-color-primary-500: 245 158 11;
  --tw-color-primary-600: 217 119 6;
  --tw-color-primary-700: 180 83 9;
  --tw-color-primary-800: 146 64 14;
  --tw-color-primary-900: 120 53 15;
  --tw-color-primary-950: 69 26 3;
  --color-primary-50: rgb(var(--tw-color-primary-50)); /* #fffbeb */
  --color-primary-100: rgb(var(--tw-color-primary-100)); /* #fef3c7 */
  --color-primary-200: rgb(var(--tw-color-primary-200)); /* #fde68a */
  --color-primary-300: rgb(var(--tw-color-primary-300)); /* #fcd34d */
  --color-primary-400: rgb(var(--tw-color-primary-400)); /* #fbbf24 */
  --color-primary-500: rgb(var(--tw-color-primary-500)); /* #f59e0b */
  --color-primary-600: rgb(var(--tw-color-primary-600)); /* #d97706 */
  --color-primary-700: rgb(var(--tw-color-primary-700)); /* #b45309 */
  --color-primary-800: rgb(var(--tw-color-primary-800)); /* #92400e */
  --color-primary-900: rgb(var(--tw-color-primary-900)); /* #78350f */
  --color-primary-950: rgb(var(--tw-color-primary-950)); /* #451a03 */
}

.yellow {
  --tw-color-primary-50: 254 252 232;
  --tw-color-primary-100: 254 249 195;
  --tw-color-primary-200: 254 240 138;
  --tw-color-primary-300: 253 224 71;
  --tw-color-primary-400: 250 204 21;
  --tw-color-primary-500: 234 179 8;
  --tw-color-primary-600: 202 138 4;
  --tw-color-primary-700: 161 98 7;
  --tw-color-primary-800: 133 77 14;
  --tw-color-primary-900: 113 63 18;
  --tw-color-primary-950: 66 32 6;
  --color-primary-50: rgb(var(--tw-color-primary-50)); /* #fefce8 */
  --color-primary-100: rgb(var(--tw-color-primary-100)); /* #fef9c3 */
  --color-primary-200: rgb(var(--tw-color-primary-200)); /* #fef08a */
  --color-primary-300: rgb(var(--tw-color-primary-300)); /* #fde047 */
  --color-primary-400: rgb(var(--tw-color-primary-400)); /* #facc15 */
  --color-primary-500: rgb(var(--tw-color-primary-500)); /* #eab308 */
  --color-primary-600: rgb(var(--tw-color-primary-600)); /* #ca8a04 */
  --color-primary-700: rgb(var(--tw-color-primary-700)); /* #a16207 */
  --color-primary-800: rgb(var(--tw-color-primary-800)); /* #854d0e */
  --color-primary-900: rgb(var(--tw-color-primary-900)); /* #713f12 */
  --color-primary-950: rgb(var(--tw-color-primary-950)); /* #422006 */
}
.lime {
  --tw-color-primary-50: 247 254 231;
  --tw-color-primary-100: 236 252 203;
  --tw-color-primary-200: 217 249 157;
  --tw-color-primary-300: 190 242 100;
  --tw-color-primary-400: 163 230 53;
  --tw-color-primary-500: 132 204 22;
  --tw-color-primary-600: 101 163 13;
  --tw-color-primary-700: 77 124 15;
  --tw-color-primary-800: 63 98 18;
  --tw-color-primary-900: 54 83 20;
  --tw-color-primary-950: 26 46 5;
  --color-primary-50: rgb(var(--tw-color-primary-50)); /* #f7fee7 */
  --color-primary-100: rgb(var(--tw-color-primary-100)); /* #ecfccb */
  --color-primary-200: rgb(var(--tw-color-primary-200)); /* #d9f99d */
  --color-primary-300: rgb(var(--tw-color-primary-300)); /* #bef264 */
  --color-primary-400: rgb(var(--tw-color-primary-400)); /* #a3e635 */
  --color-primary-500: rgb(var(--tw-color-primary-500)); /* #84cc16 */
  --color-primary-600: rgb(var(--tw-color-primary-600)); /* #65a30d */
  --color-primary-700: rgb(var(--tw-color-primary-700)); /* #4d7c0f */
  --color-primary-800: rgb(var(--tw-color-primary-800)); /* #3f6212 */
  --color-primary-900: rgb(var(--tw-color-primary-900)); /* #365314 */
  --color-primary-950: rgb(var(--tw-color-primary-950)); /* #1a2e05 */
}

.green {
  --tw-color-primary-50: 240 253 244;
  --tw-color-primary-100: 220 252 231;
  --tw-color-primary-200: 187 247 208;
  --tw-color-primary-300: 134 239 172;
  --tw-color-primary-400: 74 222 128;
  --tw-color-primary-500: 34 197 94;
  --tw-color-primary-600: 22 163 74;
  --tw-color-primary-700: 21 128 61;
  --tw-color-primary-800: 22 101 52;
  --tw-color-primary-900: 20 83 45;
  --tw-color-primary-950: 5 46 22;
  --color-primary-50: rgb(var(--tw-color-primary-50)); /* #f0fdf4 */
  --color-primary-100: rgb(var(--tw-color-primary-100)); /* #dcfce7 */
  --color-primary-200: rgb(var(--tw-color-primary-200)); /* #bbf7d0 */
  --color-primary-300: rgb(var(--tw-color-primary-300)); /* #86efac */
  --color-primary-400: rgb(var(--tw-color-primary-400)); /* #4ade80 */
  --color-primary-500: rgb(var(--tw-color-primary-500)); /* #22c55e */
  --color-primary-600: rgb(var(--tw-color-primary-600)); /* #16a34a */
  --color-primary-700: rgb(var(--tw-color-primary-700)); /* #15803d */
  --color-primary-800: rgb(var(--tw-color-primary-800)); /* #166534 */
  --color-primary-900: rgb(var(--tw-color-primary-900)); /* #14532d */
  --color-primary-950: rgb(var(--tw-color-primary-950)); /* #052e16 */
}

.emerald {
  --tw-color-primary-50: 236 253 245;
  --tw-color-primary-100: 209 250 229;
  --tw-color-primary-200: 167 243 208;
  --tw-color-primary-300: 110 231 183;
  --tw-color-primary-400: 52 211 153;
  --tw-color-primary-500: 16 185 129;
  --tw-color-primary-600: 5 150 105;
  --tw-color-primary-700: 4 120 87;
  --tw-color-primary-800: 6 95 70;
  --tw-color-primary-900: 6 78 59;
  --tw-color-primary-950: 2 44 34;
  --color-primary-50: rgb(var(--tw-color-primary-50)); /* #ecfdf5 */
  --color-primary-100: rgb(var(--tw-color-primary-100)); /* #d1fae5 */
  --color-primary-200: rgb(var(--tw-color-primary-200)); /* #a7f3d0 */
  --color-primary-300: rgb(var(--tw-color-primary-300)); /* #6ee7b7 */
  --color-primary-400: rgb(var(--tw-color-primary-400)); /* #34d399 */
  --color-primary-500: rgb(var(--tw-color-primary-500)); /* #10b981 */
  --color-primary-600: rgb(var(--tw-color-primary-600)); /* #059669 */
  --color-primary-700: rgb(var(--tw-color-primary-700)); /* #047857 */
  --color-primary-800: rgb(var(--tw-color-primary-800)); /* #065f46 */
  --color-primary-900: rgb(var(--tw-color-primary-900)); /* #064e3b */
  --color-primary-950: rgb(var(--tw-color-primary-950)); /* #022c22 */
}

.teal {
  --tw-color-primary-50: 240 253 250;
  --tw-color-primary-100: 204 251 241;
  --tw-color-primary-200: 153 246 228;
  --tw-color-primary-300: 94 234 212;
  --tw-color-primary-400: 45 212 191;
  --tw-color-primary-500: 20 184 166;
  --tw-color-primary-600: 13 148 136;
  --tw-color-primary-700: 15 118 110;
  --tw-color-primary-800: 17 94 89;
  --tw-color-primary-900: 19 78 74;
  --tw-color-primary-950: 4 47 46;
  --color-primary-50: rgb(var(--tw-color-primary-50)); /* #f0fdfa */
  --color-primary-100: rgb(var(--tw-color-primary-100)); /* #ccfbf1 */
  --color-primary-200: rgb(var(--tw-color-primary-200)); /* #99f6e4 */
  --color-primary-300: rgb(var(--tw-color-primary-300)); /* #5eead4 */
  --color-primary-400: rgb(var(--tw-color-primary-400)); /* #2dd4bf */
  --color-primary-500: rgb(var(--tw-color-primary-500)); /* #14b8a6 */
  --color-primary-600: rgb(var(--tw-color-primary-600)); /* #0d9488 */
  --color-primary-700: rgb(var(--tw-color-primary-700)); /* #0f766e */
  --color-primary-800: rgb(var(--tw-color-primary-800)); /* #115e59 */
  --color-primary-900: rgb(var(--tw-color-primary-900)); /* #134e4a */
  --color-primary-950: rgb(var(--tw-color-primary-950)); /* #042f2e */
}

.cyan {
  --tw-color-primary-50: 236 254 255;
  --tw-color-primary-100: 207 250 254;
  --tw-color-primary-200: 165 243 252;
  --tw-color-primary-300: 103 232 249;
  --tw-color-primary-400: 34 211 238;
  --tw-color-primary-500: 6 182 212;
  --tw-color-primary-600: 8 145 178;
  --tw-color-primary-700: 14 116 144;
  --tw-color-primary-800: 21 94 117;
  --tw-color-primary-900: 22 78 99;
  --tw-color-primary-950: 8 51 68;
  --color-primary-50: rgb(var(--tw-color-primary-50)); /* #ecfeff */
  --color-primary-100: rgb(var(--tw-color-primary-100)); /* #cffafe */
  --color-primary-200: rgb(var(--tw-color-primary-200)); /* #a5f3fc */
  --color-primary-300: rgb(var(--tw-color-primary-300)); /* #67e8f9 */
  --color-primary-400: rgb(var(--tw-color-primary-400)); /* #22d3ee */
  --color-primary-500: rgb(var(--tw-color-primary-500)); /* #06b6d4 */
  --color-primary-600: rgb(var(--tw-color-primary-600)); /* #0891b2 */
  --color-primary-700: rgb(var(--tw-color-primary-700)); /* #0e7490 */
  --color-primary-800: rgb(var(--tw-color-primary-800)); /* #155e75 */
  --color-primary-900: rgb(var(--tw-color-primary-900)); /* #164e63 */
  --color-primary-950: rgb(var(--tw-color-primary-950)); /* #083344 */
}

.sky {
  --tw-color-primary-50: 240 249 255;
  --tw-color-primary-100: 224 242 254;
  --tw-color-primary-200: 186 230 253;
  --tw-color-primary-300: 125 211 252;
  --tw-color-primary-400: 56 189 248;
  --tw-color-primary-500: 14 165 233;
  --tw-color-primary-600: 2 132 199;
  --tw-color-primary-700: 3 105 161;
  --tw-color-primary-800: 7 89 133;
  --tw-color-primary-900: 12 74 110;
  --tw-color-primary-950: 8 47 73;
  --color-primary-50: rgb(var(--tw-color-primary-50)); /* #f0f9ff */
  --color-primary-100: rgb(var(--tw-color-primary-100)); /* #e0f2fe */
  --color-primary-200: rgb(var(--tw-color-primary-200)); /* #bae6fd */
  --color-primary-300: rgb(var(--tw-color-primary-300)); /* #7dd3fc */
  --color-primary-400: rgb(var(--tw-color-primary-400)); /* #38bdf8 */
  --color-primary-500: rgb(var(--tw-color-primary-500)); /* #0ea5e9 */
  --color-primary-600: rgb(var(--tw-color-primary-600)); /* #0284c7 */
  --color-primary-700: rgb(var(--tw-color-primary-700)); /* #0369a1 */
  --color-primary-800: rgb(var(--tw-color-primary-800)); /* #075985 */
  --color-primary-900: rgb(var(--tw-color-primary-900)); /* #0c4a6e */
  --color-primary-950: rgb(var(--tw-color-primary-950)); /* #082f49 */
}

.blue {
  --tw-color-primary-50: 239 246 255;
  --tw-color-primary-100: 219 234 254;
  --tw-color-primary-200: 191 219 254;
  --tw-color-primary-300: 147 197 253;
  --tw-color-primary-400: 96 165 250;
  --tw-color-primary-500: 59 130 246;
  --tw-color-primary-600: 37 99 235;
  --tw-color-primary-700: 29 78 216;
  --tw-color-primary-800: 30 64 175;
  --tw-color-primary-900: 30 58 138;
  --tw-color-primary-950: 23 37 84;
  --color-primary-50: rgb(var(--tw-color-primary-50)); /* #eff6ff */
  --color-primary-100: rgb(var(--tw-color-primary-100)); /* #dbeafe */
  --color-primary-200: rgb(var(--tw-color-primary-200)); /* #bfdbfe */
  --color-primary-300: rgb(var(--tw-color-primary-300)); /* #93c5fd */
  --color-primary-400: rgb(var(--tw-color-primary-400)); /* #60a5fa */
  --color-primary-500: rgb(var(--tw-color-primary-500)); /* #3b82f6 */
  --color-primary-600: rgb(var(--tw-color-primary-600)); /* #2563eb */
  --color-primary-700: rgb(var(--tw-color-primary-700)); /* #1d4ed8 */
  --color-primary-800: rgb(var(--tw-color-primary-800)); /* #1e40af */
  --color-primary-900: rgb(var(--tw-color-primary-900)); /* #1e3a8a */
  --color-primary-950: rgb(var(--tw-color-primary-950)); /* #172554 */
}

.indigo {
  --tw-color-primary-50: 238 242 255;
  --tw-color-primary-100: 224 231 255;
  --tw-color-primary-200: 199 210 254;
  --tw-color-primary-300: 165 180 252;
  --tw-color-primary-400: 129 140 248;
  --tw-color-primary-500: 99 102 241;
  --tw-color-primary-600: 79 70 229;
  --tw-color-primary-700: 67 56 202;
  --tw-color-primary-800: 55 48 163;
  --tw-color-primary-900: 49 46 129;
  --tw-color-primary-950: 30 27 75;
  --color-primary-50: rgb(var(--tw-color-primary-50)); /* #eef2ff */
  --color-primary-100: rgb(var(--tw-color-primary-100)); /* #e0e7ff */
  --color-primary-200: rgb(var(--tw-color-primary-200)); /* #c7d2fe */
  --color-primary-300: rgb(var(--tw-color-primary-300)); /* #a5b4fc */
  --color-primary-400: rgb(var(--tw-color-primary-400)); /* #818cf8 */
  --color-primary-500: rgb(var(--tw-color-primary-500)); /* #6366f1 */
  --color-primary-600: rgb(var(--tw-color-primary-600)); /* #4f46e5 */
  --color-primary-700: rgb(var(--tw-color-primary-700)); /* #4338ca */
  --color-primary-800: rgb(var(--tw-color-primary-800)); /* #3730a3 */
  --color-primary-900: rgb(var(--tw-color-primary-900)); /* #312e81 */
  --color-primary-950: rgb(var(--tw-color-primary-950)); /* #1e1b4b */
}

.violet {
  --tw-color-primary-50: 245 243 255;
  --tw-color-primary-100: 237 233 254;
  --tw-color-primary-200: 221 214 254;
  --tw-color-primary-300: 196 181 253;
  --tw-color-primary-400: 167 139 250;
  --tw-color-primary-500: 139 92 246;
  --tw-color-primary-600: 124 58 237;
  --tw-color-primary-700: 109 40 217;
  --tw-color-primary-800: 91 33 182;
  --tw-color-primary-900: 76 29 149;
  --tw-color-primary-950: 46 16 101;
  --color-primary-50: rgb(var(--tw-color-primary-50)); /* #f5f3ff */
  --color-primary-100: rgb(var(--tw-color-primary-100)); /* #ede9fe */
  --color-primary-200: rgb(var(--tw-color-primary-200)); /* #ddd6fe */
  --color-primary-300: rgb(var(--tw-color-primary-300)); /* #c4b5fd */
  --color-primary-400: rgb(var(--tw-color-primary-400)); /* #a78bfa */
  --color-primary-500: rgb(var(--tw-color-primary-500)); /* #8b5cf6 */
  --color-primary-600: rgb(var(--tw-color-primary-600)); /* #7c3aed */
  --color-primary-700: rgb(var(--tw-color-primary-700)); /* #6d28d9 */
  --color-primary-800: rgb(var(--tw-color-primary-800)); /* #5b21b6 */
  --color-primary-900: rgb(var(--tw-color-primary-900)); /* #4c1d95 */
  --color-primary-950: rgb(var(--tw-color-primary-950)); /* #2e1065 */
}

.purple {
  --tw-color-primary-50: 250 245 255;
  --tw-color-primary-100: 243 232 255;
  --tw-color-primary-200: 233 213 255;
  --tw-color-primary-300: 216 180 254;
  --tw-color-primary-400: 192 132 252;
  --tw-color-primary-500: 168 85 247;
  --tw-color-primary-600: 147 51 234;
  --tw-color-primary-700: 126 34 206;
  --tw-color-primary-800: 107 33 168;
  --tw-color-primary-900: 88 28 135;
  --tw-color-primary-950: 59 7 100;
  --color-primary-50: rgb(var(--tw-color-primary-50)); /* #faf5ff */
  --color-primary-100: rgb(var(--tw-color-primary-100)); /* #f3e8ff */
  --color-primary-200: rgb(var(--tw-color-primary-200)); /* #e9d5ff */
  --color-primary-300: rgb(var(--tw-color-primary-300)); /* #d8b4fe */
  --color-primary-400: rgb(var(--tw-color-primary-400)); /* #c084fc */
  --color-primary-500: rgb(var(--tw-color-primary-500)); /* #a855f7 */
  --color-primary-600: rgb(var(--tw-color-primary-600)); /* #9333ea */
  --color-primary-700: rgb(var(--tw-color-primary-700)); /* #7e22ce */
  --color-primary-800: rgb(var(--tw-color-primary-800)); /* #6b21a8 */
  --color-primary-900: rgb(var(--tw-color-primary-900)); /* #581c87 */
  --color-primary-950: rgb(var(--tw-color-primary-950)); /* #3b0764 */
}

.fuchsia {
  --tw-color-primary-50: 253 244 255;
  --tw-color-primary-100: 250 232 255;
  --tw-color-primary-200: 245 208 254;
  --tw-color-primary-300: 240 171 252;
  --tw-color-primary-400: 232 121 249;
  --tw-color-primary-500: 217 70 239;
  --tw-color-primary-600: 192 38 211;
  --tw-color-primary-700: 162 28 175;
  --tw-color-primary-800: 134 25 143;
  --tw-color-primary-900: 112 26 117;
  --tw-color-primary-950: 74 4 78;
  --color-primary-50: rgb(var(--tw-color-primary-50)); /* #fdf4ff */
  --color-primary-100: rgb(var(--tw-color-primary-100)); /* #fae8ff */
  --color-primary-200: rgb(var(--tw-color-primary-200)); /* #f5d0fe */
  --color-primary-300: rgb(var(--tw-color-primary-300)); /* #f0abfc */
  --color-primary-400: rgb(var(--tw-color-primary-400)); /* #e879f9 */
  --color-primary-500: rgb(var(--tw-color-primary-500)); /* #d946ef */
  --color-primary-600: rgb(var(--tw-color-primary-600)); /* #c026d3 */
  --color-primary-700: rgb(var(--tw-color-primary-700)); /* #a21caf */
  --color-primary-800: rgb(var(--tw-color-primary-800)); /* #86198f */
  --color-primary-900: rgb(var(--tw-color-primary-900)); /* #701a75 */
  --color-primary-950: rgb(var(--tw-color-primary-950)); /* #4a044e */
}

.pink {
  --tw-color-primary-50: 253 242 248;
  --tw-color-primary-100: 252 231 243;
  --tw-color-primary-200: 251 207 232;
  --tw-color-primary-300: 249 168 212;
  --tw-color-primary-400: 244 114 182;
  --tw-color-primary-500: 236 72 153;
  --tw-color-primary-600: 219 39 119;
  --tw-color-primary-700: 190 24 93;
  --tw-color-primary-800: 157 23 77;
  --tw-color-primary-900: 131 24 67;
  --tw-color-primary-950: 80 4 36;
  --color-primary-50: rgb(var(--tw-color-primary-50)); /* #fdf2f8 */
  --color-primary-100: rgb(var(--tw-color-primary-100)); /* #fce7f3 */
  --color-primary-200: rgb(var(--tw-color-primary-200)); /* #fbcfe8 */
  --color-primary-300: rgb(var(--tw-color-primary-300)); /* #f9a8d4 */
  --color-primary-400: rgb(var(--tw-color-primary-400)); /* #f472b6 */
  --color-primary-500: rgb(var(--tw-color-primary-500)); /* #ec4899 */
  --color-primary-600: rgb(var(--tw-color-primary-600)); /* #db2777 */
  --color-primary-700: rgb(var(--tw-color-primary-700)); /* #be185d */
  --color-primary-800: rgb(var(--tw-color-primary-800)); /* #9d174d */
  --color-primary-900: rgb(var(--tw-color-primary-900)); /* #831843 */
  --color-primary-950: rgb(var(--tw-color-primary-950)); /* #500724 */
}

.rose {
  --tw-color-primary-50: 255 241 242;
  --tw-color-primary-100: 255 228 230;
  --tw-color-primary-200: 254 205 211;
  --tw-color-primary-300: 253 164 175;
  --tw-color-primary-400: 251 113 133;
  --tw-color-primary-500: 244 63 94;
  --tw-color-primary-600: 225 29 72;
  --tw-color-primary-700: 190 18 60;
  --tw-color-primary-800: 159 18 57;
  --tw-color-primary-900: 136 19 55;
  --tw-color-primary-950: 76 5 25;
  --color-primary-50: rgb(var(--tw-color-primary-50)); /* #fff1f2 */
  --color-primary-100: rgb(var(--tw-color-primary-100)); /* #ffe4e6 */
  --color-primary-200: rgb(var(--tw-color-primary-200)); /* #fecdd3 */
  --color-primary-300: rgb(var(--tw-color-primary-300)); /* #fda4af */
  --color-primary-400: rgb(var(--tw-color-primary-400)); /* #fb7185 */
  --color-primary-500: rgb(var(--tw-color-primary-500)); /* #f43f5e */
  --color-primary-600: rgb(var(--tw-color-primary-600)); /* #e11d48 */
  --color-primary-700: rgb(var(--tw-color-primary-700)); /* #be123c */
  --color-primary-800: rgb(var(--tw-color-primary-800)); /* #9f1239 */
  --color-primary-900: rgb(var(--tw-color-primary-900)); /* #881337 */
  --color-primary-950: rgb(var(--tw-color-primary-950)); /* #4c0519 */
}
</file>

<file path="src/types/supabase.ts">
export type Json =
  | string
  | number
  | boolean
  | null
  | { [key: string]: Json | undefined }
  | Json[];

export interface Database {
  public: {
    Tables: {
      players: {
        Row: {
          id: string;
          name: string;
        };
        Insert: {
          id?: string;
          name: string;
        };
        Update: {
          id?: string;
          name?: string;
        };
        Relationships: [];
      };
      tournaments: {
        Row: {
          type: string;
          name: string;
          default_mulligans: number;
          course_pars: Json;
        };
        Insert: {
          type: string;
          name: string;
          default_mulligans?: number;
          course_pars: Json;
        };
        Update: {
          type?: string;
          name?: string;
          default_mulligans?: number;
          course_pars?: Json;
        };
        Relationships: [];
      };
      teams: {
        Row: {
          id: string;
          name: string;
          handicap: number;
          tournament_type: string;
        };
        Insert: {
          id?: string;
          name: string;
          handicap?: number;
          tournament_type: string;
        };
        Update: {
          id?: string;
          name?: string;
          handicap?: number;
          tournament_type?: string;
        };
        Relationships: [
          {
            foreignKeyName: 'teams_tournament_type_fkey';
            columns: ['tournament_type'];
            referencedRelation: 'tournaments';
            referencedColumns: ['type'];
          },
        ];
      };
      team_players: {
        Row: {
          id: string;
          team_id: string;
          player_id: string;
        };
        Insert: {
          id?: string;
          team_id: string;
          player_id: string;
        };
        Update: {
          id?: string;
          team_id?: string;
          player_id?: string;
        };
        Relationships: [
          {
            foreignKeyName: 'team_players_team_id_fkey';
            columns: ['team_id'];
            referencedRelation: 'teams';
            referencedColumns: ['id'];
          },
          {
            foreignKeyName: 'team_players_player_id_fkey';
            columns: ['player_id'];
            referencedRelation: 'players';
            referencedColumns: ['id'];
          },
        ];
      };
      scores: {
        Row: {
          id: string;
          team_id: string;
          hole_number: number;
          strokes: number;
          drive_player_id: string;
          mulligan_player_id: string | null;
          tournament_type: string;
          created_at: string;
        };
        Insert: {
          id?: string;
          team_id: string;
          hole_number: number;
          strokes: number;
          drive_player_id: string;
          mulligan_player_id?: string | null;
          tournament_type: string;
          created_at?: string;
        };
        Update: {
          id?: string;
          team_id?: string;
          hole_number?: number;
          strokes?: number;
          drive_player_id?: string;
          mulligan_player_id?: string | null;
          tournament_type?: string;
          created_at?: string;
        };
        Relationships: [
          {
            foreignKeyName: 'scores_team_id_fkey';
            columns: ['team_id'];
            referencedRelation: 'teams';
            referencedColumns: ['id'];
          },
          {
            foreignKeyName: 'scores_drive_player_id_fkey';
            columns: ['drive_player_id'];
            referencedRelation: 'players';
            referencedColumns: ['id'];
          },
          {
            foreignKeyName: 'scores_mulligan_player_id_fkey';
            columns: ['mulligan_player_id'];
            referencedRelation: 'players';
            referencedColumns: ['id'];
          },
          {
            foreignKeyName: 'scores_tournament_type_fkey';
            columns: ['tournament_type'];
            referencedRelation: 'tournaments';
            referencedColumns: ['type'];
          },
        ];
      };
    };
    Views: {
      [_ in never]: never;
    };
    Functions: {
      [_ in never]: never;
    };
    Enums: {
      [_ in never]: never;
    };
    CompositeTypes: {
      [_ in never]: never;
    };
  };
}

export type Tables<T extends keyof Database['public']['Tables']> =
  Database['public']['Tables'][T]['Row'];
export type InsertTables<T extends keyof Database['public']['Tables']> =
  Database['public']['Tables'][T]['Insert'];
export type UpdateTables<T extends keyof Database['public']['Tables']> =
  Database['public']['Tables'][T]['Update'];

export type TournamentType = '2-man' | '4-man';
export type CoursePars = Record<string, number>; // Hole number to par mapping
</file>

<file path="src/utils/supabase-client.ts">
import { createClient } from '@supabase/supabase-js';

import { Database, InsertTables, TournamentType } from '../types/supabase';

// Create a single supabase client for interacting with your database
const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL || '';
const supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY || '';

export const supabase = createClient<Database>(supabaseUrl, supabaseAnonKey);

/**
 * Fetch all tournaments
 */
export async function getTournaments() {
  const { data, error } = await supabase.from('tournaments').select('*');

  if (error) {
    console.error('Error fetching tournaments:', error);
    return [];
  }

  return data;
}

/**
 * Fetch a specific tournament by type
 */
export async function getTournament(type: TournamentType) {
  const { data, error } = await supabase
    .from('tournaments')
    .select('*')
    .eq('type', type)
    .single();

  if (error) {
    console.error(`Error fetching tournament with type ${type}:`, error);
    return null;
  }

  return data;
}

/**
 * Fetch all teams for a specific tournament type
 */
export async function getTeams(tournamentType: TournamentType) {
  const { data, error } = await supabase
    .from('teams')
    .select(
      `
      *,
      team_players(
        player_id,
        players(*)
      )
    `,
    )
    .eq('tournament_type', tournamentType);

  if (error) {
    console.error(
      `Error fetching teams for tournament type ${tournamentType}:`,
      error,
    );
    return [];
  }

  return data;
}

/**
 * Fetch a specific team by ID
 */
export async function getTeam(teamId: string) {
  const { data, error } = await supabase
    .from('teams')
    .select(
      `
      *,
      team_players(
        player_id,
        players(*)
      )
    `,
    )
    .eq('id', teamId)
    .single();

  if (error) {
    console.error(`Error fetching team with ID ${teamId}:`, error);
    return null;
  }

  return data;
}

/**
 * Create a new player
 */
export async function createPlayer(player: InsertTables<'players'>) {
  const { data, error } = await supabase
    .from('players')
    .insert(player)
    .select()
    .single();

  if (error) {
    console.error('Error creating player:', error);
    return null;
  }

  return data;
}

/**
 * Create a new team
 */
export async function createTeam(
  team: InsertTables<'teams'>,
  playerIds: string[],
) {
  // Start a transaction by using the rpc method
  const { data: newTeam, error: teamError } = await supabase
    .from('teams')
    .insert(team)
    .select()
    .single();

  if (teamError) {
    console.error('Error creating team:', teamError);
    return null;
  }

  // Add players to the team
  const teamPlayers = playerIds.map((playerId) => ({
    team_id: newTeam.id,
    player_id: playerId,
  }));

  const { error: playersError } = await supabase
    .from('team_players')
    .insert(teamPlayers);

  if (playersError) {
    console.error('Error adding players to team:', playersError);
    // Ideally we would roll back the team creation here in a real transaction
    return null;
  }

  return newTeam;
}

/**
 * Submit a score
 */
export async function submitScore(score: InsertTables<'scores'>) {
  const { data, error } = await supabase
    .from('scores')
    .upsert(score, { onConflict: 'team_id,hole_number,tournament_type' })
    .select()
    .single();

  if (error) {
    console.error('Error submitting score:', error);
    return null;
  }

  return data;
}

/**
 * Get scores for a team
 */
export async function getTeamScores(teamId: string) {
  const { data, error } = await supabase
    .from('scores')
    .select(
      `
      *,
      teams(*),
      drive_player:players!scores_drive_player_id_fkey(*),
      mulligan_player:players!scores_mulligan_player_id_fkey(*)
    `,
    )
    .eq('team_id', teamId)
    .order('hole_number');

  if (error) {
    console.error(`Error fetching scores for team ${teamId}:`, error);
    return [];
  }

  return data;
}

/**
 * Get all scores for a tournament type
 */
export async function getTournamentScores(tournamentType: TournamentType) {
  const { data, error } = await supabase
    .from('scores')
    .select(
      `
      *,
      teams(*),
      drive_player:players!scores_drive_player_id_fkey(*),
      mulligan_player:players!scores_mulligan_player_id_fkey(*)
    `,
    )
    .eq('tournament_type', tournamentType)
    .order('team_id')
    .order('hole_number');

  if (error) {
    console.error(
      `Error fetching scores for tournament ${tournamentType}:`,
      error,
    );
    return [];
  }

  return data;
}
</file>

<file path="supabase/migrations/20231121000000_golf_tournament_schema.sql">
-- Create players table
CREATE TABLE IF NOT EXISTS players (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  name TEXT NOT NULL
);

-- Create tournaments table
CREATE TABLE IF NOT EXISTS tournaments (
  type TEXT PRIMARY KEY CHECK (type IN ('2-man', '4-man')),
  name TEXT NOT NULL,
  default_mulligans INTEGER NOT NULL DEFAULT 0,
  course_pars JSONB NOT NULL
);

-- Create teams table
CREATE TABLE IF NOT EXISTS teams (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  name TEXT NOT NULL,
  handicap NUMERIC(5,1) NOT NULL DEFAULT 0,
  tournament_type TEXT NOT NULL REFERENCES tournaments(type) ON DELETE CASCADE
);

-- Create team_players join table
CREATE TABLE IF NOT EXISTS team_players (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  team_id UUID NOT NULL REFERENCES teams(id) ON DELETE CASCADE,
  player_id UUID NOT NULL REFERENCES players(id) ON DELETE CASCADE,
  UNIQUE (team_id, player_id)
);

-- Create scores table
CREATE TABLE IF NOT EXISTS scores (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  team_id UUID NOT NULL REFERENCES teams(id) ON DELETE CASCADE,
  hole_number INTEGER NOT NULL CHECK (hole_number BETWEEN 1 AND 18),
  strokes INTEGER NOT NULL CHECK (strokes > 0),
  drive_player_id UUID NOT NULL REFERENCES players(id) ON DELETE CASCADE,
  mulligan_player_id UUID REFERENCES players(id) ON DELETE SET NULL,
  tournament_type TEXT NOT NULL REFERENCES tournaments(type) ON DELETE CASCADE,
  created_at TIMESTAMPTZ NOT NULL DEFAULT NOW(),
  UNIQUE (team_id, hole_number, tournament_type)
);

-- Row Level Security Policies
ALTER TABLE players ENABLE ROW LEVEL SECURITY;
ALTER TABLE tournaments ENABLE ROW LEVEL SECURITY;
ALTER TABLE teams ENABLE ROW LEVEL SECURITY;
ALTER TABLE team_players ENABLE ROW LEVEL SECURITY;
ALTER TABLE scores ENABLE ROW LEVEL SECURITY;

-- Public read access for all tables
CREATE POLICY "Allow public read access for players" ON players FOR SELECT USING (true);
CREATE POLICY "Allow public read access for tournaments" ON tournaments FOR SELECT USING (true);
CREATE POLICY "Allow public read access for teams" ON teams FOR SELECT USING (true);
CREATE POLICY "Allow public read access for team_players" ON team_players FOR SELECT USING (true);
CREATE POLICY "Allow public read access for scores" ON scores FOR SELECT USING (true);

-- Allow anonymous/public insert for scores
CREATE POLICY "Allow public insert for scores" ON scores FOR INSERT WITH CHECK (true);

-- Optional: Add some indexes for performance
CREATE INDEX idx_team_players_team_id ON team_players (team_id);
CREATE INDEX idx_team_players_player_id ON team_players (player_id);
CREATE INDEX idx_scores_team_id ON scores (team_id);
CREATE INDEX idx_scores_tournament_type ON scores (tournament_type);
CREATE INDEX idx_teams_tournament_type ON teams (tournament_type);
</file>

<file path="supabase/migrations/20231121000001_sample_data.sql">
-- Insert tournament types
INSERT INTO tournaments (type, name, default_mulligans, course_pars)
VALUES 
  ('2-man', '2-Man Tournament', 2, '{"1":4,"2":3,"3":4,"4":5,"5":4,"6":3,"7":4,"8":5,"9":4,"10":4,"11":3,"12":4,"13":5,"14":4,"15":3,"16":4,"17":5,"18":4}'),
  ('4-man', '4-Man Tournament', 4, '{"1":4,"2":3,"3":4,"4":5,"5":4,"6":3,"7":4,"8":5,"9":4,"10":4,"11":3,"12":4,"13":5,"14":4,"15":3,"16":4,"17":5,"18":4}');

-- Insert sample players
INSERT INTO players (id, name)
VALUES 
  ('11111111-1111-1111-1111-111111111111', 'John Smith'),
  ('22222222-2222-2222-2222-222222222222', 'Jane Doe'),
  ('33333333-3333-3333-3333-333333333333', 'Michael Johnson'),
  ('44444444-4444-4444-4444-444444444444', 'Sarah Williams');

-- Insert sample teams for 2-man tournament
INSERT INTO teams (id, name, handicap, tournament_type)
VALUES 
  ('aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa', 'Team Alpha', 5.2, '2-man'),
  ('bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb', 'Team Beta', 8.7, '2-man');

-- Insert sample teams for 4-man tournament
INSERT INTO teams (id, name, handicap, tournament_type)
VALUES 
  ('cccccccc-cccc-cccc-cccc-cccccccccccc', 'Team Gamma', 12.5, '4-man');

-- Link players to teams
INSERT INTO team_players (team_id, player_id)
VALUES 
  -- Team Alpha (2-man)
  ('aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa', '11111111-1111-1111-1111-111111111111'),
  ('aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa', '22222222-2222-2222-2222-222222222222'),
  
  -- Team Beta (2-man)
  ('bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb', '33333333-3333-3333-3333-333333333333'),
  ('bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb', '44444444-4444-4444-4444-444444444444'),
  
  -- Team Gamma (4-man) - Only 2 players added as examples
  ('cccccccc-cccc-cccc-cccc-cccccccccccc', '11111111-1111-1111-1111-111111111111'),
  ('cccccccc-cccc-cccc-cccc-cccccccccccc', '33333333-3333-3333-3333-333333333333');

-- Insert sample scores for Team Alpha (2-man)
INSERT INTO scores (team_id, hole_number, strokes, drive_player_id, mulligan_player_id, tournament_type)
VALUES
  ('aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa', 1, 4, '11111111-1111-1111-1111-111111111111', NULL, '2-man'),
  ('aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa', 2, 3, '22222222-2222-2222-2222-222222222222', NULL, '2-man'),
  ('aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa', 3, 5, '11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '2-man');

-- Insert sample scores for Team Beta (2-man)
INSERT INTO scores (team_id, hole_number, strokes, drive_player_id, mulligan_player_id, tournament_type)
VALUES
  ('bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb', 1, 5, '33333333-3333-3333-3333-333333333333', NULL, '2-man'),
  ('bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb', 2, 4, '44444444-4444-4444-4444-444444444444', NULL, '2-man'),
  ('bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb', 3, 4, '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444', '2-man');
</file>

<file path="supabase/migrations/20231121000001_tournament_teams.sql">
-- Insert tournament types (if not already inserted)
INSERT INTO tournaments (type, name, default_mulligans, course_pars)
VALUES 
  ('2-man', '2-Man Tournament', 2, '{"1":4,"2":3,"3":4,"4":5,"5":4,"6":3,"7":4,"8":5,"9":4,"10":4,"11":3,"12":4,"13":5,"14":4,"15":3,"16":4,"17":5,"18":4}')
ON CONFLICT (type) DO NOTHING;

-- Insert players
INSERT INTO players (id, name)
VALUES 
  ('10000000-0000-0000-0000-000000000001', 'DeFilipps'),
  ('10000000-0000-0000-0000-000000000002', 'Bowlsby'),
  ('10000000-0000-0000-0000-000000000003', 'Hanley'),
  ('10000000-0000-0000-0000-000000000004', 'Duane'),
  ('10000000-0000-0000-0000-000000000005', 'Dan'),
  ('10000000-0000-0000-0000-000000000006', 'Counts'),
  ('10000000-0000-0000-0000-000000000007', 'Jake'),
  ('10000000-0000-0000-0000-000000000008', 'Graham'),
  ('10000000-0000-0000-0000-000000000009', 'Max'),
  ('10000000-0000-0000-0000-000000000010', 'JR'),
  ('10000000-0000-0000-0000-000000000011', 'Proko'),
  ('10000000-0000-0000-0000-000000000012', 'Ned'),
  ('10000000-0000-0000-0000-000000000013', 'Cerf'),
  ('10000000-0000-0000-0000-000000000014', 'Guz'),
  ('10000000-0000-0000-0000-000000000015', 'Kevin'),
  ('10000000-0000-0000-0000-000000000016', 'Davis');

-- Insert teams for 2-man tournament with handicaps
INSERT INTO teams (id, name, handicap, tournament_type)
VALUES 
  ('20000000-0000-0000-0000-000000000001', 'DeFilipps & Bowlsby', 2.9, '2-man'),
  ('20000000-0000-0000-0000-000000000002', 'Hanley & Duane', 2.1, '2-man'),
  ('20000000-0000-0000-0000-000000000003', 'Dan & Counts', 3.4, '2-man'),
  ('20000000-0000-0000-0000-000000000004', 'Jake & Graham', 3.3, '2-man'),
  ('20000000-0000-0000-0000-000000000005', 'Max & JR', 3.5, '2-man'),
  ('20000000-0000-0000-0000-000000000006', 'Proko & Ned', 3.8, '2-man'),
  ('20000000-0000-0000-0000-000000000007', 'Cerf & Guz', 5.8, '2-man'),
  ('20000000-0000-0000-0000-000000000008', 'Kevin & Davis', 9.2, '2-man');

-- Link players to teams
INSERT INTO team_players (team_id, player_id)
VALUES 
  -- DeFilipps & Bowlsby
  ('20000000-0000-0000-0000-000000000001', '10000000-0000-0000-0000-000000000001'),
  ('20000000-0000-0000-0000-000000000001', '10000000-0000-0000-0000-000000000002'),
  
  -- Hanley & Duane
  ('20000000-0000-0000-0000-000000000002', '10000000-0000-0000-0000-000000000003'),
  ('20000000-0000-0000-0000-000000000002', '10000000-0000-0000-0000-000000000004'),
  
  -- Dan & Counts
  ('20000000-0000-0000-0000-000000000003', '10000000-0000-0000-0000-000000000005'),
  ('20000000-0000-0000-0000-000000000003', '10000000-0000-0000-0000-000000000006'),
  
  -- Jake & Graham
  ('20000000-0000-0000-0000-000000000004', '10000000-0000-0000-0000-000000000007'),
  ('20000000-0000-0000-0000-000000000004', '10000000-0000-0000-0000-000000000008'),
  
  -- Max & JR
  ('20000000-0000-0000-0000-000000000005', '10000000-0000-0000-0000-000000000009'),
  ('20000000-0000-0000-0000-000000000005', '10000000-0000-0000-0000-000000000010'),
  
  -- Proko & Ned
  ('20000000-0000-0000-0000-000000000006', '10000000-0000-0000-0000-000000000011'),
  ('20000000-0000-0000-0000-000000000006', '10000000-0000-0000-0000-000000000012'),
  
  -- Cerf & Guz
  ('20000000-0000-0000-0000-000000000007', '10000000-0000-0000-0000-000000000013'),
  ('20000000-0000-0000-0000-000000000007', '10000000-0000-0000-0000-000000000014'),
  
  -- Kevin & Davis
  ('20000000-0000-0000-0000-000000000008', '10000000-0000-0000-0000-000000000015'),
  ('20000000-0000-0000-0000-000000000008', '10000000-0000-0000-0000-000000000016');
</file>

<file path="supabase/README.md">
# Golf Tournament Schema for Supabase

This directory contains the SQL migration files needed to set up the database schema for the golf tournament application.

## Schema Overview

The schema includes these tables:

- `players`: Stores information about individual players
- `tournaments`: Defines tournament types (2-man, 4-man) and course information
- `teams`: Teams participating in tournaments
- `team_players`: Join table connecting players to teams
- `scores`: Records scores for each team on each hole

## Row Level Security (RLS)

The schema includes RLS policies that:

- Allow public read access to all tables
- Allow anonymous/public insert for scores
- Restrict updates/deletes by default

## How to Apply the Schema

### Option 1: Using Supabase CLI

1. Install the Supabase CLI if you haven't already:

   ```
   npm install -g supabase
   ```

2. Link your project:

   ```
   supabase link --project-ref your-project-ref
   ```

3. Apply the migrations:
   ```
   supabase db push
   ```

### Option 2: Using Supabase Dashboard

1. Log in to the Supabase dashboard
2. Select your project
3. Go to the SQL Editor
4. Copy the contents of `migrations/20231121000000_golf_tournament_schema.sql`
5. Paste it into the SQL Editor and run it

## Sample Data

You may want to populate the database with sample data for testing:

```sql
-- Insert tournament types
INSERT INTO tournaments (type, name, default_mulligans, course_pars)
VALUES
  ('2-man', '2-Man Tournament', 2, '{"1":4,"2":3,"3":4,"4":5,"5":4,"6":3,"7":4,"8":5,"9":4,"10":4,"11":3,"12":4,"13":5,"14":4,"15":3,"16":4,"17":5,"18":4}'),
  ('4-man', '4-Man Tournament', 4, '{"1":4,"2":3,"3":4,"4":5,"5":4,"6":3,"7":4,"8":5,"9":4,"10":4,"11":3,"12":4,"13":5,"14":4,"15":3,"16":4,"17":5,"18":4}');

-- Then add players, teams, and other data as needed
```
</file>

<file path=".gitignore">
# See https://help.github.com/articles/ignoring-files/ for more about ignoring files.

# dependencies
/node_modules
/.pnp
.pnp.js

# testing
/coverage

# next.js
/.next/
/out/

# production
/build

# misc
.DS_Store
*.pem

# debug
npm-debug.log*
yarn-debug.log*
yarn-error.log*
.pnpm-debug.log*

# local env files
.env
.env*.local

# vercel
.vercel

# typescript
*.tsbuildinfo
next-env.d.ts

# next-sitemap
robots.txt
sitemap.xml
sitemap-*.xml


/.cursor
cursorrules.md
/memory-bank
</file>

<file path=".prettierignore">
# See https://help.github.com/articles/ignoring-files/ for more about ignoring files.

# dependencies
/node_modules
/.pnp
.pnp.js

# testing
/coverage

# next.js
.next
/.next/
/out/

# production
/build

# misc
.DS_Store
*.pem

# debug
npm-debug.log*
yarn-debug.log*
yarn-error.log*
.pnpm-debug.log*

# local env files
.env.local
.env.development.local
.env.test.local
.env.production.local

# vercel
.vercel

# changelog
CHANGELOG.md

pnpm-lock.yaml
</file>

<file path="CHANGELOG.md">
<!-- //!STARTERCONF Remove this file, this is used as the starter changelog -->

# ts-nextjs-tailwind-starter changelog

This changelog is manually generated and not accurate with the package.json, only to show the changes since the last release.

## 1.0.0 - 2023-07-17

### New Features

- #### Next.js App Router

    Now uses the new app directory structure.

### Improvements & Bug Fixes

- #### Rename `clsxm` to `cn`

    For better support with shadcn/ui

- #### Faster Lint Actions
  
    Lint jobs is now merged into one for faster performance, also updated the concurrency rule

## 0.5.4 - 2022-07-22

### New Features

- #### Release Please

    Standard Version is now deprecated, and ts-nextjs-tailwind-starter is now using release please. Activate them on `.github/workflows/release-please`

### Improvements & Bug Fixes

- #### More Efficient Lint Actions
    
    Lint workflow is now cached and will cancel previous run if there are 2 concurrent runs.

## 0.5.3 - 2022-02-27

### New Features

- #### Shimmer for NextImage and Skeleton
    
    Addition of shimmer & blur placeholder for NextImage, and new Skeleton Component with shimmer effect.

    https://user-images.githubusercontent.com/55318172/155867729-8c3176ad-ede4-4443-b42b-780517615e5a.mp4


- #### Support for SVGR

    You can directly import SVG like

    ```tsx
    import Vercel from '~/svg/Vercel.svg';

    <Vercel className='text-5xl' />
    ```

- #### Public Folder Path Mapping

    Easily access public folder with `~/` prefix.

- #### Tailwind CSS Prettier Sorter

    ts-nextjs-tailwind-starter now use first-party plugin `prettier-plugin-tailwindcss`

### Improvements & Bug Fixes

- #### Layout Declared Twice

    Fix issue where adding elements to Layout ends up rendering them twice

- #### ESLint Curly Brace Rule

    New autofixable rule
    
    ```tsx
    props={'hi'}

    will become

    props='hi'
    ```

## 0.5.2 - 2021-12-30

### New Features

- #### New Component: PrimaryLink

    Add a link component with accent color on top of UnstyledLink.

### Improvements & Bug Fixes

- #### Unused Import ESlint Autofix

    Unused import will automatically be removed by the ESlint autofix.

- #### Renamed CustomLink to UnderlineLink

    This is to compensate the new PrimaryLink component

- #### Primary Button & ButtonLink Shade

    The shade of the button is now using the `500` instead of `400`.


## 0.5.1 - 2021-12-26

### New Features

- #### New Snippets Wrap: clsx and fragment `<></>`
    
    You can select text then wrap it with clsx or React.Fragment shorthand.
    
    https://user-images.githubusercontent.com/55318172/147401848-3db5dba0-ef71-4f25-9f47-c7908beba69e.mp4


## 0.5.0 - 2021-12-21

### New Features

- #### Expansion Pack
    You can easily add expansion such as React Hook Form + Components, Storybook, and more just using a single command line.

    https://user-images.githubusercontent.com/55318172/146631994-e1cac137-1664-4cfe-950b-a96decc1eaa6.mp4

    Check out the [expansion pack repository](https://github.com/theodorusclarence/expansion-pack) for the commands

### Improvements & Bug Fixes

- #### Can't Use Layout Fill on NextImage

    Using layout fill will make the width and height optional

- #### Vertically center Button & ButtonLink

    Adds `items-center` to make the button vertically centered


## 0.4.1 - 2021-12-12

### New Features

- #### Tailwind CSS v3
    
    The color palette configuration is also updated accordingly. 

## 0.4.0 - 2021-12-02

### New Features

- #### Button & ButtonLink Variants

    - New Variant: **Outline** and **Ghost**, you can also add `isDarkBg` prop if you are using these variants with dark background.
    - Animated Underline style on **Primary**, **Dark**, **Light** is removed
    - Added `ring-primary-500` on `focus-visible`

    ![Button Variants](https://user-images.githubusercontent.com/55318172/144385213-632b3e1f-9a0e-4184-82e0-7905ee3318b4.gif)

- #### ArrowLink


    Adds an animated arrow, this component is Polymorphic, the default element is `CustomLink`, you can extend it with `as` prop.

    ```tsx
    <ArrowLink
      as={ButtonLink}
      variant='light'
      href='/'
    >
      Register now
    </ArrowLink>
    ```

    ![Arrow Link Feature](https://user-images.githubusercontent.com/55318172/144385991-f3521d52-e0a8-49c5-8e87-409231fdd5b6.gif)

- #### Change default theme to white

    | ![Home Page](https://user-images.githubusercontent.com/55318172/144386763-00e6c3fd-ee2e-4c9e-87f8-18b036bdc2e1.png) | ![404](https://user-images.githubusercontent.com/55318172/144386764-0e4b4fb0-35a8-4725-a795-f998b06543a1.png) |
    | - | - |

### Improvements & Bug Fixes

- #### Split Next.js Link Props Type

    Now, to add props to Next.js `<Link>` component, you can use `nextLinkProps`.

    ```tsx
    <UnstyledLink 
      href='/'
      nextLinkProps={{
        shallow: true,
      }}
    >
      Link
    </UnstyledLink>
    ```

    The rest of `<a>` props can be directly added as a prop.

- #### Add Motion Safe to Animations

    All components animation respect user preference about motion.

## 0.3.0 - 2021-12-01

### New Features

- #### Create Branch & Auto Resolve Issue Actions

    | ![Create Branch Actions](https://user-images.githubusercontent.com/55318172/144379834-8c3e4d4f-d584-4253-9ad8-b9f1d468ed01.gif) <br> Auto Create Branch | ![Auto Resolve](https://user-images.githubusercontent.com/55318172/144382044-0132e755-9cd5-4805-a756-4086f67b3282.gif) <br> Auto Resolve  |
    | :--: | :--: |

    You have to install the app for your organization/account/repository from the [GitHub Marketplace](https://github.com/marketplace/create-issue-branch) for this to work.

    The branch will be created on **assign** with format `i${number}-${issue_title_lowercase}`.

- #### Custom Tailwind CSS Class Sorter

    Classes are sorted using [prettier-plugin-sort-class-names](https://github.com/PutziSan/prettier-plugin-sort-class-names) with custom class order on [this file](https://github.com/theodorusclarence/ts-nextjs-tailwind-starter/blob/main/prettier-plugin-sort-class-names-order) and custom variant order on [prettierrc](https://github.com/theodorusclarence/ts-nextjs-tailwind-starter/blob/main/.prettierrc.js)

    With this plugin, we can now safely check the order of the classes using the preconfigured lint action.

## 0.2.0 - 2021-11-10

### New Features

- #### Jest

    Jest is configured and will be run every push on Github Actions

- #### Lint Github Action

    1. **ESLint** - will fail if there are any warning and error.
    2. **Type Check** - will fail on `tsc` error.
    3. **Prettier Check** - will fail if there are any formatting error.
    4. **Test** - will fail if there are any test failure.

## 0.1.0

### New Features

- #### Installed Packages

    1. [clsx](https://bundlephobia.com/package/clsx@latest), utility for constructing `className` strings conditionally.
    2. [react-icons](https://bundlephobia.com/package/react-icons@latest), svg react icons of popular icon packs.

- #### UnstyledLink Component

    Used as a component for Next.js Link. Will render out Next/Link if the href started with `/` or `#`, else will render an `a` tag with `target='_blank'`. Also add a cursor style for outside links

- #### CustomLink Component

    ![customlink](https://user-images.githubusercontent.com/55318172/129183546-4e8c2059-0493-4459-a1e9-755fbd32fe39.gif)


- #### Absolute Import

    You can import without using relative path

    ```tsx
    import Nav from '../../../components/Nav';

    simplified to

    import Nav from '@/components/Nav';
    ```

- #### Seo Component

    Configure the default in `src/components/Seo.tsx`. If you want to use the default, just add `<Seo />` on top of your page.

    You can also customize it per page by overriding the title, description as props

    ```tsx
    <Seo title='Next.js Tailwind Starter' description='your description' />
    ```

    or if you want to still keep the title like `%s | Next.js Tailwind Starter`, you can use `templateTitle` props.

- #### Custom 404 Page

![404](https://user-images.githubusercontent.com/55318172/129184274-d90631f2-6688-4ed2-bef2-a4d018a4863c.gif)

- #### Workspace Snippets

Snippets such as React import, useState, useEffect, React Component. [View more](/.vscode/typescriptreact.code-snippets)

- #### Husky, Prettier, Lint, and Commitlint Configured

    3 Husky hooks including:

    1. pre-commit, running `next lint` and format the code using prettier
    2. commit-msg, running commitlint to ensure the use of [Conventional Commit](https://theodorusclarence.com/library/conventional-commit-readme) for commit messages
    3. post-merge, running `yarn` every `git pull` or after merge to ensure all new packages are installed and ready to go

- #### Default Favicon Declaration

    Use [Favicon Generator](https://www.favicon-generator.org/) and then overwrite the files in `/public/favicon`

- #### Default Tailwind CSS Base Styles

    There are default styles for responsive heading sizes, and `.layout` to support a max-width for larger screen size. Find more about it on [my blog post](https://theodorusclarence.com/blog/tailwindcss-best-practice#1-using-layout-class-or-container)

- #### Open Graph Generator

    | ![image](https://user-images.githubusercontent.com/55318172/137617070-806a0509-84bd-4cae-a900-2ab17e418d8d.png) | ![image](https://user-images.githubusercontent.com/55318172/137617090-c24f684a-bfe5-41b6-8ba9-fa99bae5cadf.png) |
    | --------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------- |

    Open Graph is generated using [og.thcl.dev](https://og.thcl.dev), but please fork and self-host if your website is going to have a lot of traffic.

    Check out the [repository](https://github.com/theodorusclarence/og) to see the API parameters.

- #### Preloaded & Self Hosted Inter Fonts

    Inter fonts is a variable fonts that is self hosted and preloaded.

## Snippets

This starter is equipped with workspace-snippets, it is encouraged to use it, especially the `np` and `rc`

### Next.js Page

File inside `src/pages` will be the webpage route, there are 2 things that need to be added in Next.js page:

1. Seo component
2. Layout class to give constraint to viewport width. [Read more about layout class](https://theodorusclarence.com/blog/tailwindcss-best-practice#1-using-layout-class-or-container).

Snippets: `np`

```tsx
import * as React from 'react';
import Seo from '@/components/Seo';
export default function TestPage() {
  return (
    <>
      <Seo templateTitle='Test' />
      <main>
        <section className=''>
          <div className='layout'></div>
        </section>
      </main>
    </>
  );
}
```

### React Components

To make a new component, It is encouraged to use `export default function`. Because when we need to rename it, we only need to do it once.

Snippets: `rc`

```tsx
import * as React from 'react';
export default function Component() {
  return <div></div>;
}
```

#### Import React

Snippets: `ir`

```tsx
import * as React from 'react';
```

#### Import Next Image

Snippets: `imimg`

```tsx
import Image from 'next/image';
```

#### Import Next Link

Snippets: `iml`

```tsx
import Link from 'next/link';
```

#### useState Hook

Snippets: `us`

```tsx
const [state, setState] = React.useState(initialState);
```

#### useEffect Hook

Snippets: `uf`

```tsx
React.useEffect(() => {}, []);
```

#### useReducer Hook

Snippets: `ur`

```tsx
const [state, dispatch] = React.useReducer(someReducer, {});
```

#### useRef Hook

Snippets: `urf`

```tsx
const someRef = React.useRef();
```

#### Region Comment

It is really useful when we need to group code. It is also collapsible in VSCode

Snippets: `reg`

```tsx
//#region  //*============== FORM SUBMIT
//#endregion  //*============== FORM SUBMIT
```

You should also use [Better Comments](https://marketplace.visualstudio.com/items?itemName=aaron-bond.better-comments) extension.
</file>

<file path="commitlint.config.js">
module.exports = {
  extends: ['@commitlint/config-conventional'],
  rules: {
    //   TODO Add Scope Enum Here
    // 'scope-enum': [2, 'always', ['yourscope', 'yourscope']],
    'type-enum': [
      2,
      'always',
      [
        'feat',
        'fix',
        'docs',
        'chore',
        'style',
        'refactor',
        'ci',
        'test',
        'perf',
        'revert',
        'vercel',
      ],
    ],
    // Disable subject case check
    'subject-case': [0, 'never'],
  },
};
</file>

<file path="components.json">
{
  "$schema": "https://ui.shadcn.com/schema.json",
  "style": "new-york",
  "rsc": true,
  "tsx": true,
  "tailwind": {
    "config": "tailwind.config.ts",
    "css": "src/styles/globals.css",
    "baseColor": "neutral",
    "cssVariables": true,
    "prefix": ""
  },
  "aliases": {
    "components": "@/components",
    "utils": "@/lib/utils",
    "ui": "@/components/ui",
    "lib": "@/lib",
    "hooks": "@/hooks"
  },
  "iconLibrary": "lucide"
}
</file>

<file path="jest.config.js">
// eslint-disable-next-line @typescript-eslint/no-var-requires
const nextJest = require('next/jest');

const createJestConfig = nextJest({
  // Provide the path to your Next.js app to load next.config.js and .env files in your test environment
  dir: './',
});

// Add any custom config to be passed to Jest
const customJestConfig = {
  // Add more setup options before each test is run
  setupFilesAfterEnv: ['<rootDir>/jest.setup.js'],

  // if using TypeScript with a baseUrl set to the root directory then you need the below for alias' to work
  moduleDirectories: ['node_modules', '<rootDir>/'],

  testEnvironment: 'jest-environment-jsdom',

  /**
   * Absolute imports and Module Path Aliases
   */
  moduleNameMapper: {
    '^@/(.*)$': '<rootDir>/src/$1',
    '^~/(.*)$': '<rootDir>/public/$1',
    '^.+\\.(svg)$': '<rootDir>/src/__mocks__/svg.tsx',
  },
};

// createJestConfig is exported this way to ensure that next/jest can load the Next.js config which is async
module.exports = createJestConfig(customJestConfig);
</file>

<file path="tailwind.config.js">
/** @type {import('tailwindcss').Config} */
module.exports = {
  content: ['./src/**/*.{js,ts,jsx,tsx}'],
  theme: {
    extend: {
      colors: {
        primary: '#0B3D2E',
        border: 'hsl(var(--border))',
        input: 'hsl(var(--input))',
        background: 'hsl(var(--background))',
        foreground: 'hsl(var(--foreground))',
        muted: {
          DEFAULT: 'hsl(var(--muted))',
          foreground: 'hsl(var(--muted-foreground))',
        },
        accent: {
          DEFAULT: 'hsl(var(--accent))',
          foreground: 'hsl(var(--accent-foreground))',
        },
        card: {
          DEFAULT: 'hsl(var(--card))',
          foreground: 'hsl(var(--card-foreground))',
        },
        destructive: {
          DEFAULT: 'hsl(var(--destructive))',
          foreground: 'hsl(var(--destructive-foreground))',
        },
      },
      fontFamily: {
        primary: ['Inter', 'sans-serif'],
      },
      borderColor: {
        DEFAULT: 'hsl(var(--border))',
      },
      animation: {
        'fade-in': 'fadeIn 0.5s ease-out',
        'fade-out': 'fadeOut 0.5s ease-out',
      },
      keyframes: {
        fadeIn: {
          '0%': { opacity: 0, transform: 'translateY(10px)' },
          '100%': { opacity: 1, transform: 'translateY(0)' },
        },
        fadeOut: {
          '0%': { opacity: 1, transform: 'translateY(0)' },
          '100%': { opacity: 0, transform: 'translateY(10px)' },
        },
      },
    },
  },
  plugins: [],
};
</file>

<file path="tsconfig.json">
{
  "compilerOptions": {
    "target": "es5",
    "lib": ["dom", "dom.iterable", "esnext"],
    "allowJs": true,
    "skipLibCheck": true,
    "strict": true,
    "forceConsistentCasingInFileNames": true,
    "noEmit": true,
    "esModuleInterop": true,
    "module": "esnext",
    "moduleResolution": "node",
    "resolveJsonModule": true,
    "isolatedModules": true,
    "jsx": "preserve",
    "baseUrl": ".",
    "paths": {
      "@/*": ["./src/*"],
      "~/*": ["./public/*"]
    },
    "incremental": true,
    "plugins": [
      {
        "name": "next"
      }
    ]
  },
  "include": ["next-env.d.ts", "**/*.ts", "**/*.tsx", ".next/types/**/*.ts"],
  "exclude": ["node_modules"],
  "moduleResolution": ["node_modules", ".next", "node"]
}
</file>

<file path=".github/workflows/issue-autolink.yml">
name: 'Issue Autolink'
on:
  pull_request:
    types: [opened]

jobs:
  issue-links:
    runs-on: ubuntu-latest
    permissions:
      pull-requests: write
    steps:
      - uses: tkt-actions/add-issue-links@v1.8.1
        with:
          repo-token: '${{ secrets.GITHUB_TOKEN }}'
          branch-prefix: 'i'
          resolve: 'true'
</file>

<file path="src/components/home/HomePageContent.tsx">
import React from 'react';

const HomePageContent = () => {
  return (
    <div className='flex flex-col items-center justify-center min-h-screen py-2'>
      <h1 className='text-6xl font-bold text-primary'>Tournament Name</h1>
      <p className='mt-3 text-2xl text-gray-700'>Date | Location</p>
      {/* Add buttons for Join Team / View Leaderboard later */}
    </div>
  );
};

export default HomePageContent;
</file>

<file path="src/components/home/TournamentInfo.tsx">
import React from 'react';
export function TournamentInfo() {
  return (
    <section className='py-16 bg-white'>
      <div className='container mx-auto px-4'>
        <div className='max-w-3xl mx-auto'>
          <h2 className='text-3xl font-bold text-center mb-12'>
            Tournament Details
          </h2>
          <div className='grid md:grid-cols-2 gap-8'>
            <div className='bg-[#F3F4F6] p-6 rounded-lg'>
              <h3 className='text-xl font-bold mb-3 text-[#0B3D2E]'>
                Schedule
              </h3>
              <ul className='space-y-3'>
                <li className='flex justify-between'>
                  <span>Registration</span>
                  <span>8:00 AM</span>
                </li>
                <li className='flex justify-between'>
                  <span>Tee Off</span>
                  <span>9:30 AM</span>
                </li>
                <li className='flex justify-between'>
                  <span>Awards Ceremony</span>
                  <span>5:00 PM</span>
                </li>
              </ul>
            </div>
            <div className='bg-[#F3F4F6] p-6 rounded-lg'>
              <h3 className='text-xl font-bold mb-3 text-[#0B3D2E]'>
                Location
              </h3>
              <address className='not-italic'>
                <p>Pebble Creek Golf Club</p>
                <p>123 Fairway Drive</p>
                <p>Golf City, GC 12345</p>
                <p className='mt-2'>
                  <a
                    href='tel:+15551234567'
                    className='text-[#0B3D2E] underline'
                  >
                    (555) 123-4567
                  </a>
                </p>
              </address>
            </div>
          </div>
          <div className='mt-12 text-center'>
            <p className='text-lg mb-6'>
              Join us for a day of friendly competition and networking on the
              green!
            </p>
            <a
              href='#'
              className='inline-block bg-[#0B3D2E] text-white px-6 py-3 rounded-md font-medium hover:bg-[#0a3528] transition-colors'
            >
              Register Now
            </a>
          </div>
        </div>
      </div>
    </section>
  );
}

export {};
</file>

<file path="src/components/layout/Layout.tsx">
import React from 'react';

import { Footer } from './Footer';
import { Header } from './Header';

interface LayoutProps {
  children: React.ReactNode;
}

const Layout: React.FC<LayoutProps> = ({ children }) => {
  return (
    <div className='flex flex-col min-h-screen bg-gray-100'>
      <Header />
      <main className='flex-grow'>{children}</main>
      <Footer />
    </div>
  );
};

export default Layout;
</file>

<file path="src/components/leaderboard/LeaderboardTable.tsx">
import React, { useState } from 'react';

import { TeamRow } from './TeamRow';

// Mock data for the leaderboard - Assuming this structure is correct
interface HoleScore {
  hole: number;
  par: number;
  strokes: number;
  drive: string;
  mulligan: string | null;
}

interface Player {
  name: string;
  drives: number;
  mulligansLeft: number;
}

interface Team {
  id: number;
  name: string;
  grossScore: number;
  netScore: number;
  thru: number | 'F';
  remainingMulligans: number;
  players: Player[];
  holeScores: HoleScore[];
}

const mockTeams: Team[] = [
  {
    id: 1,
    name: 'Marc & Luke',
    grossScore: -2,
    netScore: -4,
    thru: 'F',
    remainingMulligans: 3,
    players: [
      {
        name: 'Marc Johnson',
        drives: 9,
        mulligansLeft: 2,
      },
      {
        name: 'Luke Smith',
        drives: 9,
        mulligansLeft: 1,
      },
    ],
    holeScores: [
      { hole: 1, par: 4, strokes: 4, drive: 'M', mulligan: null },
      { hole: 2, par: 3, strokes: 2, drive: 'M', mulligan: null },
      { hole: 3, par: 5, strokes: 5, drive: 'L', mulligan: null },
      { hole: 4, par: 4, strokes: 3, drive: 'M', mulligan: null },
      { hole: 5, par: 4, strokes: 4, drive: 'L', mulligan: null },
      { hole: 6, par: 3, strokes: 3, drive: 'M', mulligan: null },
      { hole: 7, par: 5, strokes: 6, drive: 'L', mulligan: 'M' },
      { hole: 8, par: 4, strokes: 4, drive: 'M', mulligan: null },
      { hole: 9, par: 4, strokes: 3, drive: 'L', mulligan: null },
      { hole: 10, par: 4, strokes: 4, drive: 'M', mulligan: null },
      { hole: 11, par: 3, strokes: 3, drive: 'L', mulligan: null },
      { hole: 12, par: 5, strokes: 4, drive: 'M', mulligan: null },
      { hole: 13, par: 4, strokes: 5, drive: 'L', mulligan: 'L' },
      { hole: 14, par: 4, strokes: 4, drive: 'M', mulligan: null },
      { hole: 15, par: 3, strokes: 2, drive: 'L', mulligan: null },
      { hole: 16, par: 5, strokes: 5, drive: 'M', mulligan: null },
      { hole: 17, par: 4, strokes: 4, drive: 'L', mulligan: null },
      { hole: 18, par: 4, strokes: 3, drive: 'M', mulligan: null },
    ],
  },
  {
    id: 2,
    name: 'Jane & John',
    grossScore: 0,
    netScore: -2,
    thru: 'F',
    remainingMulligans: 2,
    players: [
      {
        name: 'Jane Doe',
        drives: 8,
        mulligansLeft: 1,
      },
      {
        name: 'John Doe',
        drives: 10,
        mulligansLeft: 1,
      },
    ],
    holeScores: [
      { hole: 1, par: 4, strokes: 4, drive: 'J', mulligan: null },
      { hole: 2, par: 3, strokes: 3, drive: 'Jn', mulligan: null },
      { hole: 3, par: 5, strokes: 4, drive: 'J', mulligan: 'Jn' },
      { hole: 4, par: 4, strokes: 4, drive: 'Jn', mulligan: null },
      { hole: 5, par: 4, strokes: 5, drive: 'J', mulligan: null },
      { hole: 6, par: 3, strokes: 2, drive: 'Jn', mulligan: null },
      { hole: 7, par: 5, strokes: 5, drive: 'J', mulligan: null },
      { hole: 8, par: 4, strokes: 4, drive: 'Jn', mulligan: null },
      { hole: 9, par: 4, strokes: 3, drive: 'J', mulligan: null },
      { hole: 10, par: 4, strokes: 4, drive: 'Jn', mulligan: null },
      { hole: 11, par: 3, strokes: 3, drive: 'J', mulligan: null },
      { hole: 12, par: 5, strokes: 6, drive: 'Jn', mulligan: 'J' },
      { hole: 13, par: 4, strokes: 4, drive: 'J', mulligan: null },
      { hole: 14, par: 4, strokes: 4, drive: 'Jn', mulligan: null },
      { hole: 15, par: 3, strokes: 3, drive: 'J', mulligan: null },
      { hole: 16, par: 5, strokes: 5, drive: 'Jn', mulligan: null },
      { hole: 17, par: 4, strokes: 4, drive: 'J', mulligan: null },
      { hole: 18, par: 4, strokes: 5, drive: 'Jn', mulligan: null },
    ],
  },
  {
    id: 3,
    name: 'Alice & Bob',
    grossScore: 4,
    netScore: 2,
    thru: 16,
    remainingMulligans: 0,
    players: [
      {
        name: 'Alice Cooper',
        drives: 7,
        mulligansLeft: 0,
      },
      {
        name: 'Bob Wilson',
        drives: 9,
        mulligansLeft: 0,
      },
    ],
    holeScores: [
      { hole: 1, par: 4, strokes: 5, drive: 'B', mulligan: 'A' },
      { hole: 2, par: 3, strokes: 4, drive: 'A', mulligan: null },
      { hole: 3, par: 5, strokes: 6, drive: 'B', mulligan: 'B' },
      { hole: 4, par: 4, strokes: 5, drive: 'A', mulligan: null },
      { hole: 5, par: 4, strokes: 4, drive: 'B', mulligan: null },
      { hole: 6, par: 3, strokes: 4, drive: 'A', mulligan: null },
      { hole: 7, par: 5, strokes: 5, drive: 'B', mulligan: null },
      { hole: 8, par: 4, strokes: 4, drive: 'A', mulligan: 'A' },
      { hole: 9, par: 4, strokes: 5, drive: 'B', mulligan: null },
      { hole: 10, par: 4, strokes: 4, drive: 'A', mulligan: null },
      { hole: 11, par: 3, strokes: 4, drive: 'B', mulligan: null },
      { hole: 12, par: 5, strokes: 6, drive: 'A', mulligan: 'B' },
      { hole: 13, par: 4, strokes: 5, drive: 'B', mulligan: null },
      { hole: 14, par: 4, strokes: 5, drive: 'A', mulligan: 'A' },
      { hole: 15, par: 3, strokes: 3, drive: 'B', mulligan: null },
      { hole: 16, par: 5, strokes: 7, drive: 'A', mulligan: null },
    ],
  },
];

export function LeaderboardTable() {
  const [expandedTeamId, setExpandedTeamId] = useState<number | null>(null);

  const toggleExpand = (teamId: number) => {
    setExpandedTeamId(expandedTeamId === teamId ? null : teamId);
  };

  // Ensure mockTeams is sorted by gross score initially
  const sortedTeams = [...mockTeams].sort(
    (a, b) => a.grossScore - b.grossScore,
  );

  return (
    <div className='bg-white rounded-lg shadow-lg overflow-hidden mb-8 border border-gray-200'>
      {/* Header Row */}
      <div className='bg-gray-50 text-gray-600 uppercase py-3 px-4 grid grid-cols-12 text-xs font-semibold tracking-wider border-b border-gray-200'>
        <div className='col-span-5 md:col-span-4 pl-2'>Team</div>
        <div className='col-span-2 text-center'>Gross</div>
        <div className='col-span-2 text-center'>Net</div>
        <div className='col-span-1 text-center'>Thru</div>
        <div className='col-span-2 md:col-span-3 text-center pr-2'>
          Mulligans Left
        </div>
      </div>
      {/* Team Rows */}
      <div className='divide-y divide-gray-200'>
        {sortedTeams.map(
          (
            team, // Use sortedTeams
          ) => (
            <TeamRow
              key={team.id}
              team={team}
              isExpanded={expandedTeamId === team.id}
              onToggle={() => toggleExpand(team.id)}
            />
          ),
        )}
      </div>
    </div>
  );
}
</file>

<file path="src/components/leaderboard/TeamRow.tsx">
import { ChevronDown, ChevronUp } from 'lucide-react';
import React from 'react';

// Interfaces (assuming these are defined correctly)
interface HoleScore {
  hole: number;
  par: number;
  strokes: number;
  drive: string;
  mulligan: string | null;
}

interface Player {
  name: string;
  drives: number;
  mulligansLeft: number;
}

interface Team {
  id: number;
  name: string;
  grossScore: number;
  netScore: number;
  thru: number | 'F';
  remainingMulligans: number;
  players: Player[];
  holeScores: HoleScore[];
}

interface TeamRowProps {
  team: Team;
  isExpanded: boolean;
  onToggle: () => void;
}

// Helper function to format scores
const formatScore = (score: number) => {
  if (score === 0) return 'E';
  if (score > 0) return `+${score}`;
  return score.toString();
};

// Helper function to color scores
const getScoreColor = (score: number): string => {
  if (score < 0) return 'text-emerald-600';
  if (score > 0) return 'text-red-600';
  return 'text-gray-900';
};

// Helper function to format hole scores relative to par
const formatHoleScore = (strokes: number, par: number): string => {
  const diff = strokes - par;
  if (diff < -1) return 'bg-green-300 text-green-900 font-bold'; // Eagle or better (even darker green)
  if (diff === -1) return 'bg-emerald-50 text-emerald-700 font-bold'; // Birdie (lighter green)
  if (diff === 0) return 'bg-gray-100 text-gray-800'; // Par
  if (diff === 1) return 'bg-red-100 text-red-800'; // Bogey
  if (diff > 1) return 'bg-red-300 text-red-900'; // Double Bogey or worse (darker red)
  return '';
};

export function TeamRow({ team, isExpanded, onToggle }: TeamRowProps) {
  return (
    <div className='bg-white border-b border-gray-200 last:border-b-0'>
      {/* Main row - clickable to toggle expansion */}
      <div
        className='py-4 px-4 grid grid-cols-12 items-center cursor-pointer hover:bg-gray-50 transition-colors duration-150 ease-in-out'
        onClick={onToggle}
      >
        {/* Team Name + Toggle Icon */}
        <div className='col-span-5 md:col-span-4 font-medium flex items-center pl-2'>
          {isExpanded ? (
            <ChevronUp size={18} className='mr-2 text-gray-500' />
          ) : (
            <ChevronDown size={18} className='mr-2 text-gray-500' />
          )}
          <span className='text-gray-800'>{team.name}</span>
        </div>
        {/* Gross Score */}
        <div
          className={`col-span-2 text-center font-semibold ${getScoreColor(team.grossScore)}`}
        >
          {formatScore(team.grossScore)}
        </div>
        {/* Net Score */}
        <div
          className={`col-span-2 text-center font-medium ${getScoreColor(team.netScore)}`}
        >
          {formatScore(team.netScore)}
        </div>
        {/* Thru */}
        <div className='col-span-1 text-center text-gray-600 text-sm'>
          {team.thru}
        </div>
        {/* Mulligans */}
        <div className='col-span-2 md:col-span-3 text-center text-gray-600 pr-2'>
          {team.remainingMulligans}
        </div>
      </div>

      {/* Expanded details - conditionally rendered */}
      {isExpanded && (
        <div className='bg-slate-50/70 px-4 md:px-8 py-6 border-t border-gray-200'>
          {/* Player stats section */}
          <div className='mb-6'>
            <h4 className='font-semibold text-gray-700 mb-3'>Player Stats</h4>
            <div className='grid grid-cols-1 md:grid-cols-2 gap-4'>
              {team.players.map((player, idx) => (
                <div
                  key={idx}
                  className='bg-white p-4 rounded-lg border border-gray-200 shadow-sm'
                >
                  <div className='font-medium text-gray-800'>{player.name}</div>
                  <div className='flex justify-between mt-2 text-sm text-gray-600'>
                    <span>Drives: {player.drives}</span>
                    <span>Mulligans Left: {player.mulligansLeft}</span>
                  </div>
                </div>
              ))}
            </div>
          </div>

          {/* Hole by hole scores - Horizontal scrolling table */}
          <div>
            <h4 className='font-semibold text-gray-700 mb-3'>Hole Scores</h4>
            <div className='overflow-x-auto rounded-md border border-gray-200 shadow-sm'>
              <table className='min-w-full border-collapse bg-white'>
                <thead>
                  <tr className='text-xs text-gray-600 bg-gray-100 border-b border-gray-200'>
                    {/* Sticky Header for Hole & Par */}
                    <th className='py-2 px-3 text-left sticky left-0 bg-gray-100 z-10 font-medium border-r border-gray-200'>
                      Hole
                    </th>
                    {Array.from({ length: 18 }, (_, i) => i + 1).map(
                      (holeNum) => (
                        <th
                          key={holeNum}
                          className='py-2 px-3 text-center font-medium'
                        >
                          {holeNum}
                        </th>
                      ),
                    )}
                  </tr>
                  <tr className='text-xs text-gray-600 bg-gray-100 border-b border-gray-200'>
                    <th className='py-2 px-3 text-left sticky left-0 bg-gray-100 z-10 font-medium border-r border-gray-200'>
                      Par
                    </th>
                    {team.holeScores
                      .concat(
                        // Pad with empty cells if round not finished
                        Array.from(
                          { length: 18 - team.holeScores.length },
                          () => ({
                            hole: 0, // Dummy value, not used for rendering par
                            par: 0, // Placeholder
                            strokes: 0,
                            drive: '',
                            mulligan: null,
                          }),
                        ),
                      )
                      .sort((a, b) => a.hole - b.hole) // Ensure sorted by hole
                      .map((hole, idx) => (
                        <th
                          key={idx}
                          className='py-2 px-3 text-center font-medium'
                        >
                          {hole.par || '-'} {/* Show par or dash */}
                        </th>
                      ))}
                  </tr>
                </thead>
                <tbody>
                  {/* Score Row */}
                  <tr className='border-b border-gray-200'>
                    <td className='py-2 px-3 font-medium sticky left-0 bg-white z-10 border-r border-gray-200'>
                      Score
                    </td>
                    {team.holeScores
                      .concat(
                        Array.from(
                          { length: 18 - team.holeScores.length },
                          () => ({
                            hole: 0,
                            par: 0,
                            strokes: 0,
                            drive: '',
                            mulligan: null,
                          }),
                        ),
                      )
                      .sort((a, b) => a.hole - b.hole)
                      .map((hole, idx) => (
                        <td
                          key={idx}
                          className={`py-2 px-3 text-center font-semibold text-sm ${hole.hole ? formatHoleScore(hole.strokes, hole.par) : 'bg-gray-50'}`}
                        >
                          {hole.hole ? hole.strokes : '-'}{' '}
                          {/* Show strokes or dash */}
                        </td>
                      ))}
                  </tr>
                  {/* Drive Row */}
                  <tr className='border-b border-gray-200'>
                    <td className='py-2 px-3 font-medium sticky left-0 bg-white z-10 border-r border-gray-200'>
                      Drive
                    </td>
                    {team.holeScores
                      .concat(
                        Array.from(
                          { length: 18 - team.holeScores.length },
                          () => ({
                            hole: 0,
                            par: 0,
                            strokes: 0,
                            drive: '',
                            mulligan: null,
                          }),
                        ),
                      )
                      .sort((a, b) => a.hole - b.hole)
                      .map((hole, idx) => (
                        <td
                          key={idx}
                          className={`py-2 px-3 text-center text-sm ${!hole.hole ? 'text-gray-400' : 'text-gray-700'}`}
                        >
                          {hole.drive || '-'}
                        </td>
                      ))}
                  </tr>
                  {/* Mulligan Row */}
                  <tr>
                    <td className='py-2 px-3 font-medium sticky left-0 bg-white z-10 border-r border-gray-200'>
                      Mulligan
                    </td>
                    {team.holeScores
                      .concat(
                        Array.from(
                          { length: 18 - team.holeScores.length },
                          () => ({
                            hole: 0,
                            par: 0,
                            strokes: 0,
                            drive: '',
                            mulligan: null,
                          }),
                        ),
                      )
                      .sort((a, b) => a.hole - b.hole)
                      .map((hole, idx) => (
                        <td
                          key={idx}
                          className={`py-2 px-3 text-center text-sm ${!hole.hole ? 'text-gray-400' : hole.mulligan ? 'text-orange-600 font-medium' : 'text-gray-500'}`}
                        >
                          {hole.mulligan || '-'}
                        </td>
                      ))}
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      )}
    </div>
  );
}
</file>

<file path="src/components/links/UnderlineLink.tsx">
import * as React from 'react';

import { cn } from '@/lib/utils';

import UnstyledLink, {
  UnstyledLinkProps,
} from '@/components/links/UnstyledLink';

const UnderlineLink = React.forwardRef<HTMLAnchorElement, UnstyledLinkProps>(
  ({ children, className, ...rest }, ref) => {
    return (
      <UnstyledLink
        ref={ref}
        {...rest}
        className={cn(
          'animated-underline custom-link inline-flex items-center font-medium',
          'focus-visible:ring-primary-500 focus:outline-none focus-visible:rounded focus-visible:ring focus-visible:ring-offset-2',
          'border-dark border-b border-dotted hover:border-black/0',
          className
        )}
      >
        {children}
      </UnstyledLink>
    );
  }
);

export default UnderlineLink;
</file>

<file path="src/components/scoring/ScoreInputForm.tsx">
import React, { useEffect, useState } from 'react';

import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from '@/components/ui/select';

import { useScoreSubmission } from '../../lib/useScoreSubmission';

interface Player {
  id: number;
  name: string;
  mulligansLeft: number;
}
interface Hole {
  number: number;
  par: number;
}
interface CourseData {
  holes: Hole[];
}
interface TeamData {
  id: number;
  name: string;
  players: Player[];
}
interface HoleScore {
  hole: number;
  strokes: number | null;
  drive: number | null; // player id
  mulligan: number | null; // player id
}

// Define the type for the submitted score data
export interface SubmittedScoreData {
  teamId: number;
  scores: HoleScore[];
  driveCounts: Record<number, number>;
  mulliganCounts: Record<number, number>;
}

interface ScoreInputFormProps {
  courseData: CourseData;
  teamData: TeamData;
  onSubmit: (scoreData: SubmittedScoreData) => void; // Use the defined type
  teamId: string;
  minDrivesPerPlayer: number;
  coursePars: { [key: string]: number };
}

// Helper function to format hole scores relative to par (updated colors)
const formatHoleScore = (strokes: number | null, par: number): string => {
  if (strokes === null) return ''; // No score, no special style
  const diff = strokes - par;
  if (diff < -1) return 'bg-green-300 text-green-900 font-bold'; // Eagle or better (even darker green)
  if (diff === -1) return 'bg-emerald-50 text-emerald-700 font-bold'; // Birdie (lighter green)
  if (diff === 0) return 'bg-gray-100 text-gray-800'; // Par
  if (diff === 1) return 'bg-red-100 text-red-800'; // Bogey
  if (diff > 1) return 'bg-red-300 text-red-900'; // Double Bogey or worse (darker red)
  return '';
};

export function ScoreInputForm({
  courseData,
  teamData,
  onSubmit,
  teamId,
  minDrivesPerPlayer,
  coursePars,
}: ScoreInputFormProps) {
  // Initialize scores for all holes
  const initialScores = courseData.holes.map((hole) => ({
    hole: hole.number,
    strokes: null,
    drive: null,
    mulligan: null,
  }));
  const [scores, setScores] = useState<HoleScore[]>(initialScores);
  const [driveCounts, setDriveCounts] = useState<Record<number, number>>({});
  const [mulliganCounts, setMulliganCounts] = useState<Record<number, number>>(
    {},
  );
  const [formError, setFormError] = useState<string | null>(null);
  const [savingHole, setSavingHole] = useState<number | null>(null);
  const {
    submitSingleScore,
    error: submissionError,
    clearError,
  } = useScoreSubmission();
  // Initialize drive and mulligan counts
  useEffect(() => {
    const drives: Record<number, number> = {};
    const mulligans: Record<number, number> = {};
    teamData.players.forEach((player) => {
      drives[player.id] = 0;
      mulligans[player.id] = player.mulligansLeft;
    });
    setDriveCounts(drives);
    setMulliganCounts(mulligans);
  }, [teamData]);
  // Auto-submit effect when scores change
  useEffect(() => {
    // Check if all holes have strokes and drive selected
    const incompleteHoles = scores.filter(
      (score) => score.strokes === null || score.drive === null,
    );
    // Don't auto-submit if there are incomplete holes
    if (incompleteHoles.length > 0) {
      return;
    }
    // Check minimum drive counts
    const minDriveCount = minDrivesPerPlayer;
    const insufficientDrives = Object.entries(driveCounts).filter(
      ([_, count]) => count < minDriveCount,
    );
    // Don't auto-submit if drive requirements aren't met
    if (insufficientDrives.length > 0) {
      return;
    }
    // Auto-submit if all validations pass
    onSubmit({
      teamId: teamData.id,
      scores,
      driveCounts,
      mulliganCounts,
    });
  }, [
    scores,
    driveCounts,
    mulliganCounts,
    onSubmit,
    teamData.id,
    minDrivesPerPlayer,
  ]); // Add missing dependencies
  // Update a hole's score
  const updateHoleScore = (
    holeNumber: number,
    field: string,
    value: number | null,
  ) => {
    setScores((prevScores) => {
      return prevScores.map((score) => {
        if (score.hole === holeNumber) {
          // If changing drive selection, update drive counts
          if (field === 'drive') {
            // Decrement previous drive count if it exists
            if (score.drive !== null) {
              setDriveCounts((prev) => ({
                ...prev,
                [score.drive as number]: prev[score.drive as number] - 1,
              }));
            }
            // Increment new drive count if it exists
            if (value !== null) {
              setDriveCounts((prev) => ({
                ...prev,
                [value]: prev[value] + 1,
              }));
            }
          }
          // If changing mulligan selection, update mulligan counts
          if (field === 'mulligan') {
            // If removing a mulligan, return it to the player
            if (score.mulligan !== null && value === null) {
              setMulliganCounts((prev) => ({
                ...prev,
                [score.mulligan as number]: prev[score.mulligan as number] + 1,
              }));
            }
            // If adding a new mulligan, deduct it from the player
            if (value !== null && score.mulligan !== value) {
              // Return the previous mulligan if there was one
              if (score.mulligan !== null) {
                setMulliganCounts((prev) => ({
                  ...prev,
                  [score.mulligan as number]:
                    prev[score.mulligan as number] + 1,
                }));
              }
              // Deduct the new mulligan
              setMulliganCounts((prev) => ({
                ...prev,
                [value]: prev[value] - 1,
              }));
            }
          }
          return {
            ...score,
            [field]: value,
          };
        }
        return score;
      });
    });
  };
  // Group holes into front 9 and back 9
  const frontNine = courseData.holes.slice(0, 9);
  const backNine = courseData.holes.slice(9, 18);

  // Function to render table rows for a set of holes
  const renderTableRows = (holes: Hole[]) => {
    return (
      <>
        {/* Par Row */}
        <tr className='border-b border-gray-200'>
          <td className='px-1 py-2 bg-gray-50 text-left font-medium text-gray-700 sticky left-0 z-10 text-sm'>
            Par
          </td>
          {holes.map((hole) => (
            <td key={hole.number} className='px-1 py-2 text-center'>
              {hole.par}
            </td>
          ))}
        </tr>
        {/* Score Row */}
        <tr className='border-b border-gray-200'>
          <td className='px-1 py-2 bg-gray-50 text-left font-medium text-gray-700 sticky left-0 z-10 text-sm'>
            Score
          </td>
          {holes.map((hole) => {
            const score = scores.find((s) => s.hole === hole.number);
            const scoreClass = formatHoleScore(
              score?.strokes ?? null,
              hole.par,
            );
            return (
              <td key={hole.number} className='px-1 py-2 text-center'>
                <input
                  type='number'
                  min='1'
                  max='12'
                  value={
                    score?.strokes === null || score?.strokes === undefined
                      ? ''
                      : score.strokes
                  }
                  onChange={(e) =>
                    updateHoleScore(
                      hole.number,
                      'strokes',
                      e.target.value ? Number(e.target.value) : null,
                    )
                  }
                  className={`w-full border border-gray-300 rounded px-1.5 py-1 text-center focus:outline-none focus:ring-2 focus:ring-[#0B3D2E] ${scoreClass}`}
                />
              </td>
            );
          })}
        </tr>
        {/* Drive Row */}
        <tr className='border-b border-gray-200'>
          <td className='px-1 py-2 bg-gray-50 text-left font-medium text-gray-700 sticky left-0 z-10 text-sm'>
            Drive
          </td>
          {holes.map((hole) => {
            const score = scores.find((s) => s.hole === hole.number);
            return (
              <td key={hole.number} className='px-1 py-2 text-center'>
                <Select
                  value={score?.drive?.toString() ?? ''}
                  onValueChange={(value) =>
                    updateHoleScore(
                      hole.number,
                      'drive',
                      value === 'null' || !value ? null : Number(value),
                    )
                  }
                >
                  <SelectTrigger className='w-12 h-8 px-1 py-1 text-sm mx-auto'>
                    <SelectValue placeholder='-' />
                  </SelectTrigger>
                  <SelectContent>
                    <SelectItem value='null' className='text-gray-500'>
                      -
                    </SelectItem>
                    {teamData.players.map((player) => (
                      <SelectItem key={player.id} value={player.id.toString()}>
                        {player.name.substring(0, 2)}
                      </SelectItem>
                    ))}
                  </SelectContent>
                </Select>
              </td>
            );
          })}
        </tr>
        {/* Mulligan Row */}
        <tr>
          <td className='px-1 py-2 bg-gray-50 text-left font-medium text-gray-700 sticky left-0 z-10 text-sm'>
            Mulligan
          </td>
          {holes.map((hole) => {
            const score = scores.find((s) => s.hole === hole.number);
            return (
              <td key={hole.number} className='px-1 py-2 text-center'>
                <Select
                  value={score?.mulligan?.toString() ?? ''}
                  onValueChange={(value) =>
                    updateHoleScore(
                      hole.number,
                      'mulligan',
                      value === 'null' || !value ? null : Number(value),
                    )
                  }
                >
                  <SelectTrigger className='w-12 h-8 px-1 py-1 text-sm mx-auto'>
                    <SelectValue placeholder='-' />
                  </SelectTrigger>
                  <SelectContent>
                    <SelectItem value='null' className='text-gray-500'>
                      -
                    </SelectItem>
                    {teamData.players.map((player) => {
                      const remaining =
                        score?.mulligan === player.id
                          ? mulliganCounts[player.id] + 1
                          : mulliganCounts[player.id];
                      const isDisabled =
                        remaining <= 0 && score?.mulligan !== player.id;
                      return (
                        <SelectItem
                          key={player.id}
                          value={player.id.toString()}
                          disabled={isDisabled}
                        >
                          {player.name.substring(0, 2)}
                        </SelectItem>
                      );
                    })}
                  </SelectContent>
                </Select>
              </td>
            );
          })}
        </tr>
      </>
    );
  };

  return (
    <div className='max-w-full mx-auto'>
      <div className='bg-white rounded-lg shadow-md overflow-hidden mb-8'>
        <div className='bg-[#0B3D2E] text-white px-6 py-4 flex justify-between items-center'>
          <h2 className='text-xl font-bold'>{teamData.name}</h2>
          <div className='flex space-x-6'>
            {teamData.players.map((player) => (
              <div key={player.id} className='text-sm'>
                <span className='font-medium'>{player.name}:</span>{' '}
                <span>{mulliganCounts[player.id] ?? 0} mulligans left</span>
              </div>
            ))}
          </div>
        </div>
        <div className='p-6'>
          {/* Drive summary */}
          <div className='mb-6 bg-gray-50 p-4 rounded-lg'>
            <h3 className='font-medium mb-2'>Drive Count</h3>
            <div className='flex justify-between'>
              {teamData.players.map((player) => {
                const count = driveCounts[player.id] ?? 0;
                const minDriveCount = minDrivesPerPlayer;
                const isLow = count < minDriveCount;
                const isFinished = scores.every((s) => s.drive !== null);
                const remainingHoles = scores.filter(
                  (s) => s.drive === null,
                ).length;
                const isImpossible = isFinished && isLow;

                return (
                  <div key={player.id}>
                    <span className='font-medium'>{player.name}:</span>{' '}
                    <span
                      className={`font-semibold ${
                        isImpossible
                          ? 'text-red-600'
                          : isLow
                            ? 'text-orange-600'
                            : 'text-green-600'
                      }`}
                    >
                      {count} / {minDriveCount} needed
                    </span>
                    {isImpossible && (
                      <span className='text-xs text-red-500 ml-1'>
                        (Impossible)
                      </span>
                    )}
                  </div>
                );
              })}
            </div>
            <div className='text-sm text-gray-500 mt-2'>
              Each player must use their drive at least {minDrivesPerPlayer}{' '}
              times. Counts update as you select drives.
            </div>
          </div>
          {/* Front Nine */}
          <div className='mb-10'>
            <h3 className='font-bold mb-3 text-lg'>Front Nine</h3>
            <div className='overflow-x-auto'>
              <table className='min-w-full border-collapse'>
                <thead>
                  <tr className='border-b border-gray-200'>
                    <th className='px-1 py-2 bg-gray-50 text-left font-medium text-gray-700 sticky left-0 z-10'>
                      Hole
                    </th>
                    {frontNine.map((hole) => (
                      <th
                        key={hole.number}
                        className='px-1 py-2 text-center font-medium text-gray-700 min-w-[45px]'
                      >
                        {hole.number}
                      </th>
                    ))}
                  </tr>
                </thead>
                <tbody>{renderTableRows(frontNine)}</tbody>
              </table>
            </div>
          </div>
          {/* Back Nine */}
          <div className='mb-6'>
            <h3 className='font-bold mb-3 text-lg'>Back Nine</h3>
            <div className='overflow-x-auto'>
              <table className='min-w-full border-collapse'>
                <thead>
                  <tr className='border-b border-gray-200'>
                    <th className='px-1 py-2 bg-gray-50 text-left font-medium text-gray-700 sticky left-0 z-10'>
                      Hole
                    </th>
                    {backNine.map((hole) => (
                      <th
                        key={hole.number}
                        className='px-1 py-2 text-center font-medium text-gray-700 min-w-[45px]'
                      >
                        {hole.number}
                      </th>
                    ))}
                  </tr>
                </thead>
                <tbody>{renderTableRows(backNine)}</tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
  );
}
</file>

<file path="src/components/NextImage.tsx">
import Image, { ImageProps } from 'next/image';
import * as React from 'react';

import { cn } from '@/lib/utils';

type NextImageProps = {
  useSkeleton?: boolean;
  classNames?: {
    image?: string;
    blur?: string;
  };
  alt: string;
} & (
  | { width: string | number; height: string | number }
  | { layout: 'fill'; width?: string | number; height?: string | number }
) &
  ImageProps;

/**
 *
 * @description Must set width using `w-` className
 * @param useSkeleton add background with pulse animation, don't use it if image is transparent
 */
export default function NextImage({
  useSkeleton = false,
  src,
  width,
  height,
  alt,
  className,
  classNames,
  ...rest
}: NextImageProps) {
  const [status, setStatus] = React.useState(
    useSkeleton ? 'loading' : 'complete'
  );
  const widthIsSet = className?.includes('w-') ?? false;

  return (
    <figure
      style={!widthIsSet ? { width: `${width}px` } : undefined}
      className={className}
    >
      <Image
        className={cn(
          classNames?.image,
          status === 'loading' && cn('animate-pulse', classNames?.blur)
        )}
        src={src}
        width={width}
        height={height}
        alt={alt}
        onLoadingComplete={() => setStatus('complete')}
        {...rest}
      />
    </figure>
  );
}
</file>

<file path="src/lib/utils.ts">
import { type ClassValue, clsx } from 'clsx';
import { twMerge } from 'tailwind-merge';

export function cn(...inputs: ClassValue[]) {
  return twMerge(clsx(inputs));
}
</file>

<file path="src/pages/_app.tsx">
import type { AppProps } from 'next/app';

import '../styles/globals.css'; // Path relative to src/pages

function MyApp({ Component, pageProps }: AppProps) {
  return <Component {...pageProps} />;
}

export default MyApp;
</file>

<file path="src/pages/ScoreInputPage.tsx">
import React from 'react';

import Layout from '../components/layout/Layout';
import ScoreInputForm from '../components/scoreInput/ScoreInputForm';
import { TournamentType } from '../types/supabase';

// console.log('Imported ScoreInputForm:', ScoreInputForm); // REMOVE

export function ScoreInputPage() {
  // console.log('Rendering ScoreInputPage'); // REMOVE

  // Mock course data - in a real app this would come from an API
  const courseData = {
    holes: Array.from(
      {
        length: 18,
      },
      (_, i) => ({
        number: i + 1,
        par: i % 3 === 0 ? 5 : i % 3 === 1 ? 4 : 3, // Alternating par 5, 4, 3
      }),
    ),
  };

  // Create coursePars from courseData
  const coursePars = courseData.holes.reduce(
    (acc, hole) => {
      acc[hole.number.toString()] = hole.par;
      return acc;
    },
    {} as { [key: string]: number },
  );

  // Mock team data - in a real app this would come from an API or user selection
  const teamData = {
    id: '1', // Assuming teamId is a string now based on ScoreInputForm props
    name: 'Your Team',
    players: [
      { id: 1, name: 'Player 1', mulligansLeft: 3 },
      { id: 2, name: 'Player 2', mulligansLeft: 3 },
    ],
  };

  // Create playerMap from teamData
  const playerMap = new Map<string, number>();
  teamData.players.forEach((player, index) => {
    playerMap.set(player.id.toString(), index);
  });

  // Mock tournament type (using a valid value from the defined type)
  const tournamentType: TournamentType = '2-man';
  const minDrivesPerPlayer = 5;

  return (
    <Layout>
      <div className='w-full bg-[#F3F4F6] py-8 md:py-12'>
        <div className='container mx-auto px-4'>
          <h1 className='text-3xl md:text-4xl font-bold mb-4 text-center text-[#0B3D2E]'>
            Score Input
          </h1>
          <p className='text-center mb-8 max-w-2xl mx-auto'>
            Enter your team's scores for each hole. Remember to select which
            player's drive was used and mark any mulligans.
          </p>
          <ScoreInputForm
            teamId={teamData.id}
            tournamentType={tournamentType}
            minDrivesPerPlayer={minDrivesPerPlayer}
            coursePars={coursePars}
            playerMap={playerMap}
          />
        </div>
      </div>
    </Layout>
  );
}

export default ScoreInputPage;
</file>

<file path="src/styles/globals.css">
@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  /* #region  /**=========== Primary Color =========== */
  /* !STARTERCONF Customize these variable, copy and paste from /styles/colors.css for list of colors */
  --tw-color-primary-50: 240 249 255;
  --tw-color-primary-100: 224 242 254;
  --tw-color-primary-200: 186 230 253;
  --tw-color-primary-300: 125 211 252;
  --tw-color-primary-400: 56 189 248;
  --tw-color-primary-500: 14 165 233;
  --tw-color-primary-600: 2 132 199;
  --tw-color-primary-700: 3 105 161;
  --tw-color-primary-800: 7 89 133;
  --tw-color-primary-900: 12 74 110;
  --color-primary-50: rgb(var(--tw-color-primary-50)); /* #f0f9ff */
  --color-primary-100: rgb(var(--tw-color-primary-100)); /* #e0f2fe */
  --color-primary-200: rgb(var(--tw-color-primary-200)); /* #bae6fd */
  --color-primary-300: rgb(var(--tw-color-primary-300)); /* #7dd3fc */
  --color-primary-400: rgb(var(--tw-color-primary-400)); /* #38bdf8 */
  --color-primary-500: rgb(var(--tw-color-primary-500)); /* #0ea5e9 */
  --color-primary-600: rgb(var(--tw-color-primary-600)); /* #0284c7 */
  --color-primary-700: rgb(var(--tw-color-primary-700)); /* #0369a1 */
  --color-primary-800: rgb(var(--tw-color-primary-800)); /* #075985 */
  --color-primary-900: rgb(var(--tw-color-primary-900)); /* #0c4a6e */
  /* #endregion  /**======== Primary Color =========== */
}

@layer base {
  /* inter var - latin */
  @font-face {
    font-family: 'Inter';
    font-style: normal;
    font-weight: 100 900;
    font-display: block;
    src: url('/fonts/inter-var-latin.woff2') format('woff2');
    unicode-range:
      U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC,
      U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215,
      U+FEFF, U+FFFD;
  }

  .cursor-newtab {
    cursor:
      url('/images/new-tab.png') 10 10,
      pointer;
  }

  /* #region  /**=========== Typography =========== */
  .h0 {
    @apply font-primary text-3xl font-bold md:text-5xl;
  }

  h1,
  .h1 {
    @apply font-primary text-2xl font-bold md:text-4xl;
  }

  h2,
  .h2 {
    @apply font-primary text-xl font-bold md:text-3xl;
  }

  h3,
  .h3 {
    @apply font-primary text-lg font-bold md:text-2xl;
  }

  h4,
  .h4 {
    @apply font-primary text-base font-bold md:text-lg;
  }

  body,
  .p {
    @apply font-primary text-sm md:text-base;
  }
  /* #endregion  /**======== Typography =========== */

  .layout {
    /* 1100px */
    max-width: 68.75rem;
    @apply mx-auto w-11/12;
  }

  .bg-dark a.custom-link {
    @apply border-gray-200 hover:border-gray-200/0;
  }

  /* Class to adjust with sticky footer */
  .min-h-main {
    @apply min-h-[calc(100vh-56px)];
  }
  :root {
    --background: 0 0% 100%;
    --foreground: 222.2 47.4% 11.2%;
    --muted: 210 40% 96.1%;
    --muted-foreground: 215.4 16.3% 46.9%;
    --popover: 0 0% 100%;
    --popover-foreground: 222.2 47.4% 11.2%;
    --border: 214.3 31.8% 91.4%;
    --input: 214.3 31.8% 91.4%;
    --card: 0 0% 100%;
    --card-foreground: 222.2 47.4% 11.2%;
    --primary: 222.2 47.4% 11.2%;
    --primary-foreground: 210 40% 98%;
    --secondary: 210 40% 96.1%;
    --secondary-foreground: 222.2 47.4% 11.2%;
    --accent: 210 40% 96.1%;
    --accent-foreground: 222.2 47.4% 11.2%;
    --destructive: 0 100% 50%;
    --destructive-foreground: 210 40% 98%;
    --ring: 215 20.2% 65.1%;
    --radius: 0.5rem;
  }
  .dark {
    --background: 224 71% 4%;
    --foreground: 213 31% 91%;
    --muted: 223 47% 11%;
    --muted-foreground: 215.4 16.3% 56.9%;
    --accent: 216 34% 17%;
    --accent-foreground: 210 40% 98%;
    --popover: 224 71% 4%;
    --popover-foreground: 215 20.2% 65.1%;
    --border: 216 34% 17%;
    --input: 216 34% 17%;
    --card: 224 71% 4%;
    --card-foreground: 213 31% 91%;
    --primary: 210 40% 98%;
    --primary-foreground: 222.2 47.4% 1.2%;
    --secondary: 222.2 47.4% 11.2%;
    --secondary-foreground: 210 40% 98%;
    --destructive: 0 63% 31%;
    --destructive-foreground: 210 40% 98%;
    --ring: 216 34% 17%;
    --radius: 0.5rem;
  }
}

@layer utilities {
  .animated-underline {
    background-image:
      linear-gradient(#33333300, #33333300),
      linear-gradient(
        to right,
        var(--color-primary-400),
        var(--color-primary-500)
      );
    background-size:
      100% 2px,
      0 2px;
    background-position:
      100% 100%,
      0 100%;
    background-repeat: no-repeat;
  }
  @media (prefers-reduced-motion: no-preference) {
    .animated-underline {
      transition: 0.3s ease;
      transition-property:
        background-size, color, background-color, border-color;
    }
  }
  .animated-underline:hover,
  .animated-underline:focus-visible {
    background-size:
      0 2px,
      100% 2px;
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
    font-feature-settings:
      'rlig' 1,
      'calt' 1;
  }
}
</file>

<file path=".npmrc">
enable-pre-post-scripts=true
</file>

<file path=".nvmrc">
v20.10.0
</file>

<file path="tailwind.config.ts">
import type { Config } from 'tailwindcss';
import defaultTheme from 'tailwindcss/defaultTheme';

export default {
  darkMode: ['class'],
  content: ['./src/**/*.{js,ts,jsx,tsx}'],
  theme: {
    extend: {
      fontFamily: {
        primary: ['Inter', ...defaultTheme.fontFamily.sans],
      },
      colors: {
        primary: {
          '50': 'rgb(var(--tw-color-primary-50) / <alpha-value>)',
          '100': 'rgb(var(--tw-color-primary-100) / <alpha-value>)',
          '200': 'rgb(var(--tw-color-primary-200) / <alpha-value>)',
          '300': 'rgb(var(--tw-color-primary-300) / <alpha-value>)',
          '400': 'rgb(var(--tw-color-primary-400) / <alpha-value>)',
          '500': 'rgb(var(--tw-color-primary-500) / <alpha-value>)',
          '600': 'rgb(var(--tw-color-primary-600) / <alpha-value>)',
          '700': 'rgb(var(--tw-color-primary-700) / <alpha-value>)',
          '800': 'rgb(var(--tw-color-primary-800) / <alpha-value>)',
          '900': 'rgb(var(--tw-color-primary-900) / <alpha-value>)',
          '950': 'rgb(var(--tw-color-primary-950) / <alpha-value>)',
          DEFAULT: 'hsl(var(--primary))',
          foreground: 'hsl(var(--primary-foreground))',
        },
        dark: '#222222',
        background: 'hsl(var(--background))',
        foreground: 'hsl(var(--foreground))',
        card: {
          DEFAULT: 'hsl(var(--card))',
          foreground: 'hsl(var(--card-foreground))',
        },
        popover: {
          DEFAULT: 'hsl(var(--popover))',
          foreground: 'hsl(var(--popover-foreground))',
        },
        secondary: {
          DEFAULT: 'hsl(var(--secondary))',
          foreground: 'hsl(var(--secondary-foreground))',
        },
        muted: {
          DEFAULT: 'hsl(var(--muted))',
          foreground: 'hsl(var(--muted-foreground))',
        },
        accent: {
          DEFAULT: 'hsl(var(--accent))',
          foreground: 'hsl(var(--accent-foreground))',
        },
        destructive: {
          DEFAULT: 'hsl(var(--destructive))',
          foreground: 'hsl(var(--destructive-foreground))',
        },
        border: 'hsl(var(--border))',
        input: 'hsl(var(--input))',
        ring: 'hsl(var(--ring))',
        chart: {
          '1': 'hsl(var(--chart-1))',
          '2': 'hsl(var(--chart-2))',
          '3': 'hsl(var(--chart-3))',
          '4': 'hsl(var(--chart-4))',
          '5': 'hsl(var(--chart-5))',
        },
      },
      keyframes: {
        flicker: {
          '0%, 19.999%, 22%, 62.999%, 64%, 64.999%, 70%, 100%': {
            opacity: '0.99',
            filter:
              'drop-shadow(0 0 1px rgba(252, 211, 77)) drop-shadow(0 0 15px rgba(245, 158, 11)) drop-shadow(0 0 1px rgba(252, 211, 77))',
          },
          '20%, 21.999%, 63%, 63.999%, 65%, 69.999%': {
            opacity: '0.4',
            filter: 'none',
          },
        },
        shimmer: {
          '0%': {
            backgroundPosition: '-700px 0',
          },
          '100%': {
            backgroundPosition: '700px 0',
          },
        },
      },
      animation: {
        flicker: 'flicker 3s linear infinite',
        shimmer: 'shimmer 1.3s linear infinite',
      },
      borderRadius: {
        lg: 'var(--radius)',
        md: 'calc(var(--radius) - 2px)',
        sm: 'calc(var(--radius) - 4px)',
      },
    },
  },
  plugins: [require('@tailwindcss/forms'), require('tailwindcss-animate')],
} satisfies Config;
</file>

<file path="src/components/buttons/TextButton.tsx">
import * as React from 'react';

import { cn } from '@/lib/utils';

const TextButtonVariant = ['primary', 'basic'] as const;

type TextButtonProps = {
  variant?: (typeof TextButtonVariant)[number];
} & React.ComponentPropsWithRef<'button'>;

const TextButton = React.forwardRef<HTMLButtonElement, TextButtonProps>(
  (
    {
      children,
      className,
      variant = 'primary',
      disabled: buttonDisabled,
      ...rest
    },
    ref
  ) => {
    return (
      <button
        ref={ref}
        type='button'
        disabled={buttonDisabled}
        className={cn(
          'button inline-flex items-center justify-center font-semibold',
          'focus-visible:ring-primary-500 focus:outline-none focus-visible:ring',
          'transition duration-100',
          //#region  //*=========== Variant ===========
          variant === 'primary' && [
            'text-primary-500 hover:text-primary-600 active:text-primary-700',
            'disabled:text-primary-200',
          ],
          variant === 'basic' && [
            'text-black hover:text-gray-600 active:text-gray-800',
            'disabled:text-gray-300',
          ],
          //#endregion  //*======== Variant ===========
          'disabled:cursor-not-allowed disabled:brightness-105 disabled:hover:underline',
          className
        )}
        {...rest}
      >
        {children}
      </button>
    );
  }
);

export default TextButton;
</file>

<file path="src/components/layout/Header.tsx">
import { Menu, X } from 'lucide-react';
import Link from 'next/link';
import React, { useState } from 'react';

export function Header() {
  const [isMenuOpen, setIsMenuOpen] = useState(false);
  return (
    <header className='bg-[#0B3D2E] text-white shadow-md'>
      <div className='container mx-auto px-4 py-4 flex justify-between items-center'>
        <Link href='/' className='font-bold text-xl'>
          Golf Tournament
        </Link>
        {/* Mobile menu button */}
        <button
          className='md:hidden'
          onClick={() => setIsMenuOpen(!isMenuOpen)}
        >
          {isMenuOpen ? <X size={24} /> : <Menu size={24} />}
        </button>
        {/* Desktop navigation */}
        <nav className='hidden md:flex space-x-6'>
          <Link href='/' className='hover:text-gray-200 transition-colors'>
            Home
          </Link>
          <Link
            href='/LeaderboardPage'
            className='hover:text-gray-200 transition-colors'
          >
            Leaderboard
          </Link>
          <Link
            href='/ScoreInputPage'
            className='hover:text-gray-200 transition-colors'
          >
            Enter Scores
          </Link>
        </nav>
      </div>
      {/* Mobile navigation */}
      {isMenuOpen && (
        <nav className='md:hidden px-4 py-2 pb-4 flex flex-col space-y-3 bg-[#0B3D2E] border-t border-[#0a3528]'>
          <Link href='/' className='hover:text-gray-200 transition-colors'>
            Home
          </Link>
          <Link
            href='/LeaderboardPage'
            className='hover:text-gray-200 transition-colors'
          >
            Leaderboard
          </Link>
          <Link
            href='/ScoreInputPage'
            className='hover:text-gray-200 transition-colors'
          >
            Enter Scores
          </Link>
        </nav>
      )}
    </header>
  );
}
</file>

<file path="src/components/links/PrimaryLink.tsx">
import * as React from 'react';

import { cn } from '@/lib/utils';

import UnstyledLink, {
  UnstyledLinkProps,
} from '@/components/links/UnstyledLink';

const PrimaryLinkVariant = ['primary', 'basic'] as const;
type PrimaryLinkProps = {
  variant?: (typeof PrimaryLinkVariant)[number];
} & UnstyledLinkProps;

const PrimaryLink = React.forwardRef<HTMLAnchorElement, PrimaryLinkProps>(
  ({ className, children, variant = 'primary', ...rest }, ref) => {
    return (
      <UnstyledLink
        ref={ref}
        {...rest}
        className={cn(
          'inline-flex items-center',
          'focus-visible:ring-primary-500 focus:outline-none focus-visible:rounded focus-visible:ring focus-visible:ring-offset-2',
          'font-medium',
          //#region  //*=========== Variant ===========
          variant === 'primary' && [
            'text-primary-500 hover:text-primary-600 active:text-primary-700',
            'disabled:text-primary-200',
          ],
          variant === 'basic' && [
            'text-black hover:text-gray-600 active:text-gray-800',
            'disabled:text-gray-300',
          ],
          //#endregion  //*======== Variant ===========
          className
        )}
      >
        {children}
      </UnstyledLink>
    );
  }
);

export default PrimaryLink;
</file>

<file path="next.config.js">
/** @type {import('next').NextConfig} */
const nextConfig = {
  eslint: {
    dirs: ['src'],
  },

  reactStrictMode: true,
  swcMinify: true,

  // Uncoment to add domain whitelist
  // images: {
  //   remotePatterns: [
  //     {
  //       protocol: 'https',
  //       hostname: 'res.cloudinary.com',
  //     },
  //   ]
  // },

  webpack(config) {
    // Grab the existing rule that handles SVG imports
    const fileLoaderRule = config.module.rules.find((rule) =>
      rule.test?.test?.('.svg')
    );

    config.module.rules.push(
      // Reapply the existing rule, but only for svg imports ending in ?url
      {
        ...fileLoaderRule,
        test: /\.svg$/i,
        resourceQuery: /url/, // *.svg?url
      },
      // Convert all other *.svg imports to React components
      {
        test: /\.svg$/i,
        issuer: { not: /\.(css|scss|sass)$/ },
        resourceQuery: { not: /url/ }, // exclude if *.svg?url
        loader: '@svgr/webpack',
        options: {
          dimensions: false,
          titleProp: true,
        },
      }
    );

    // Modify the file loader rule to ignore *.svg, since we have it handled now.
    fileLoaderRule.exclude = /\.svg$/i;

    return config;
  },
};

module.exports = nextConfig;
</file>

<file path=".github/workflows/lint.yml">
name: Code Check
on:
  push:
    branches:
      - main
  pull_request: {}

concurrency:
  group: ${{ github.job }}-${{ github.ref }}
  cancel-in-progress: true

jobs:
  lint:
    name: ⬣ ESLint, ʦ TypeScript, 💅 Prettier, and 🃏 Test
    runs-on: ubuntu-latest
    steps:
      - name: ⬇️ Checkout repo
        uses: actions/checkout@v4

      - name: 🤌 Setup pnpm
        uses: pnpm/action-setup@v4
        with:
          version: 9

      - name: ⎔ Setup node
        uses: actions/setup-node@v4
        with:
          node-version: 20
          cache: 'pnpm'

      - name: 📥 Download deps
        run: pnpm install --frozen-lockfile

      - name: 🔬 Lint
        run: pnpm run lint:strict

      - name: 🔎 Type check
        run: pnpm run typecheck

      - name: 💅 Prettier check
        run: pnpm run format:check

      - name: 🃏 Run jest
        run: pnpm run test
</file>

<file path="src/pages/index.tsx">
import Link from 'next/link';
import React from 'react';

import Layout from '../components/layout/Layout';

export function HomePage() {
  return (
    <Layout>
      <div className='flex flex-col items-center justify-center min-h-[80vh] bg-gray-100 px-4'>
        <h1 className='text-4xl md:text-5xl font-bold mb-10 text-[#0B3D2E] text-center'>
          Select Tournament
        </h1>
        <div className='flex flex-col md:flex-row gap-6 w-full max-w-2xl'>
          <Link
            href='/tournament/2-man'
            className='flex-1 bg-white hover:bg-gray-50 border-2 border-[#0B3D2E] rounded-lg shadow-lg transition-all hover:shadow-xl transform hover:-translate-y-1'
          >
            <div className='p-8 md:p-10 flex flex-col items-center justify-center text-center h-full'>
              <h2 className='text-3xl font-bold text-[#0B3D2E] mb-3'>
                2-Man Scramble
              </h2>
              <p className='text-gray-600'>Teams of two players</p>
            </div>
          </Link>

          <Link
            href='/tournament/4-man'
            className='flex-1 bg-white hover:bg-gray-50 border-2 border-[#0B3D2E] rounded-lg shadow-lg transition-all hover:shadow-xl transform hover:-translate-y-1'
          >
            <div className='p-8 md:p-10 flex flex-col items-center justify-center text-center h-full'>
              <h2 className='text-3xl font-bold text-[#0B3D2E] mb-3'>
                4-Man Scramble
              </h2>
              <p className='text-gray-600'>Teams of four players</p>
            </div>
          </Link>
        </div>
      </div>
    </Layout>
  );
}

export default HomePage;
</file>

<file path="src/components/links/ButtonLink.tsx">
import * as React from 'react';

import { cn } from '@/lib/utils';

import UnstyledLink, {
  UnstyledLinkProps,
} from '@/components/links/UnstyledLink';

const ButtonLinkVariant = [
  'primary',
  'outline',
  'ghost',
  'light',
  'dark',
] as const;
const ButtonLinkSize = ['sm', 'base'] as const;

type ButtonLinkProps = {
  isDarkBg?: boolean;
  variant?: (typeof ButtonLinkVariant)[number];
  size?: (typeof ButtonLinkSize)[number];
  leftIcon?: React.ComponentType<any>;
  rightIcon?: React.ComponentType<any>;
  classNames?: {
    leftIcon?: string;
    rightIcon?: string;
  };
} & UnstyledLinkProps;

const ButtonLink = React.forwardRef<HTMLAnchorElement, ButtonLinkProps>(
  (
    {
      children,
      className,
      variant = 'primary',
      size = 'base',
      isDarkBg = false,
      leftIcon: LeftIcon,
      rightIcon: RightIcon,
      classNames,
      ...rest
    },
    ref,
  ) => {
    return (
      <UnstyledLink
        ref={ref}
        {...rest}
        className={cn(
          'inline-flex items-center rounded font-medium',
          'focus-visible:ring-primary-500 focus:outline-none focus-visible:ring',
          'shadow-sm',
          'transition-colors duration-75',
          //#region  //*=========== Size ===========
          [
            size === 'base' && ['px-3 py-1.5', 'text-sm md:text-base'],
            size === 'sm' && ['px-2 py-1', 'text-xs md:text-sm'],
          ],
          //#endregion  //*======== Size ===========
          //#region  //*=========== Variants ===========
          [
            variant === 'primary' && [
              'bg-primary-500 text-white',
              'border-primary-600 border',
              'hover:bg-primary-600 hover:text-white',
              'active:bg-primary-700',
              'disabled:bg-primary-700',
            ],
            variant === 'outline' && [
              'text-primary-500',
              'border-primary-500 border',
              'hover:bg-primary-50 active:bg-primary-100 disabled:bg-primary-100',
              isDarkBg &&
                'hover:bg-gray-900 active:bg-gray-800 disabled:bg-gray-800',
            ],
            variant === 'ghost' && [
              'text-primary-500',
              'shadow-none',
              'hover:bg-primary-50 active:bg-primary-100 disabled:bg-primary-100',
              isDarkBg &&
                'hover:bg-gray-900 active:bg-gray-800 disabled:bg-gray-800',
            ],
            variant === 'light' && [
              'bg-white text-gray-700',
              'border border-gray-300',
              'hover:text-dark hover:bg-gray-100',
              'active:bg-white/80 disabled:bg-gray-200',
            ],
            variant === 'dark' && [
              'bg-gray-900 text-white',
              'border border-gray-600',
              'hover:bg-gray-800 active:bg-gray-700 disabled:bg-gray-700',
            ],
          ],
          //#endregion  //*======== Variants ===========
          'disabled:cursor-not-allowed',
          className,
        )}
      >
        {LeftIcon && (
          <div
            className={cn([
              size === 'base' && 'mr-1',
              size === 'sm' && 'mr-1.5',
            ])}
          >
            <LeftIcon
              size='1em'
              className={cn(
                [
                  size === 'base' && 'md:text-md text-md',
                  size === 'sm' && 'md:text-md text-sm',
                ],
                classNames?.leftIcon,
              )}
            />
          </div>
        )}
        {children}
        {RightIcon && (
          <div
            className={cn([
              size === 'base' && 'ml-1',
              size === 'sm' && 'ml-1.5',
            ])}
          >
            <RightIcon
              size='1em'
              className={cn(
                [
                  size === 'base' && 'text-md md:text-md',
                  size === 'sm' && 'md:text-md text-sm',
                ],
                classNames?.rightIcon,
              )}
            />
          </div>
        )}
      </UnstyledLink>
    );
  },
);

export default ButtonLink;
</file>

<file path="src/components/links/IconLink.tsx">
import * as React from 'react';

import { cn } from '@/lib/utils';

import UnstyledLink, {
  UnstyledLinkProps,
} from '@/components/links/UnstyledLink';

const IconLinkVariant = [
  'primary',
  'outline',
  'ghost',
  'light',
  'dark',
] as const;

type IconLinkProps = {
  isDarkBg?: boolean;
  variant?: (typeof IconLinkVariant)[number];
  icon?: React.ComponentType<any>;
  classNames?: {
    icon?: string;
  };
} & Omit<UnstyledLinkProps, 'children'>;

const IconLink = React.forwardRef<HTMLAnchorElement, IconLinkProps>(
  (
    {
      className,
      icon: Icon,
      variant = 'outline',
      isDarkBg = false,
      classNames,
      ...rest
    },
    ref,
  ) => {
    return (
      <UnstyledLink
        ref={ref}
        type='button'
        className={cn(
          'inline-flex items-center justify-center rounded font-medium',
          'focus-visible:ring-primary-500 focus:outline-none focus-visible:ring',
          'shadow-sm',
          'transition-colors duration-75',
          'min-h-[28px] min-w-[28px] p-1 md:min-h-[34px] md:min-w-[34px] md:p-2',
          //#region  //*=========== Variants ===========
          [
            variant === 'primary' && [
              'bg-primary-500 text-white',
              'border-primary-600 border',
              'hover:bg-primary-600 hover:text-white',
              'active:bg-primary-700',
              'disabled:bg-primary-700',
            ],
            variant === 'outline' && [
              'text-primary-500',
              'border-primary-500 border',
              'hover:bg-primary-50 active:bg-primary-100 disabled:bg-primary-100',
              isDarkBg &&
                'hover:bg-gray-900 active:bg-gray-800 disabled:bg-gray-800',
            ],
            variant === 'ghost' && [
              'text-primary-500',
              'shadow-none',
              'hover:bg-primary-50 active:bg-primary-100 disabled:bg-primary-100',
              isDarkBg &&
                'hover:bg-gray-900 active:bg-gray-800 disabled:bg-gray-800',
            ],
            variant === 'light' && [
              'bg-white text-gray-700',
              'border border-gray-300',
              'hover:text-dark hover:bg-gray-100',
              'active:bg-white/80 disabled:bg-gray-200',
            ],
            variant === 'dark' && [
              'bg-gray-900 text-white',
              'border border-gray-600',
              'hover:bg-gray-800 active:bg-gray-700 disabled:bg-gray-700',
            ],
          ],
          //#endregion  //*======== Variants ===========
          'disabled:cursor-not-allowed',
          className,
        )}
        {...rest}
      >
        {Icon && <Icon className={cn(classNames?.icon)} />}
      </UnstyledLink>
    );
  },
);

export default IconLink;
</file>

<file path="src/components/buttons/Button.tsx">
import { Loader2 } from 'lucide-react';
import * as React from 'react';

import { cn } from '@/lib/utils';

const ButtonVariant = ['primary', 'outline', 'ghost', 'light', 'dark'] as const;
const ButtonSize = ['sm', 'base'] as const;

type ButtonProps = {
  isLoading?: boolean;
  isDarkBg?: boolean;
  variant?: (typeof ButtonVariant)[number];
  size?: (typeof ButtonSize)[number];
  leftIcon?: React.ComponentType<any>;
  rightIcon?: React.ComponentType<any>;
  classNames?: {
    leftIcon?: string;
    rightIcon?: string;
  };
} & React.ComponentPropsWithRef<'button'>;

const Button = React.forwardRef<HTMLButtonElement, ButtonProps>(
  (
    {
      children,
      className,
      disabled: buttonDisabled,
      isLoading,
      variant = 'primary',
      size = 'base',
      isDarkBg = false,
      leftIcon: LeftIcon,
      rightIcon: RightIcon,
      classNames,
      ...rest
    },
    ref,
  ) => {
    const disabled = isLoading || buttonDisabled;

    return (
      <button
        ref={ref}
        type='button'
        disabled={disabled}
        className={cn(
          'inline-flex items-center rounded font-medium',
          'focus-visible:ring-primary-500 focus:outline-none focus-visible:ring',
          'shadow-sm',
          'transition-colors duration-75',
          //#region  //*=========== Size ===========
          [
            size === 'base' && ['px-3 py-1.5', 'text-sm md:text-base'],
            size === 'sm' && ['px-2 py-1', 'text-xs md:text-sm'],
          ],
          //#endregion  //*======== Size ===========
          //#region  //*=========== Variants ===========
          [
            variant === 'primary' && [
              'bg-primary-500 text-white',
              'border-primary-600 border',
              'hover:bg-primary-600 hover:text-white',
              'active:bg-primary-700',
              'disabled:bg-primary-700',
            ],
            variant === 'outline' && [
              'text-primary-500',
              'border-primary-500 border',
              'hover:bg-primary-50 active:bg-primary-100 disabled:bg-primary-100',
              isDarkBg &&
                'hover:bg-gray-900 active:bg-gray-800 disabled:bg-gray-800',
            ],
            variant === 'ghost' && [
              'text-primary-500',
              'shadow-none',
              'hover:bg-primary-50 active:bg-primary-100 disabled:bg-primary-100',
              isDarkBg &&
                'hover:bg-gray-900 active:bg-gray-800 disabled:bg-gray-800',
            ],
            variant === 'light' && [
              'bg-white text-gray-700',
              'border border-gray-300',
              'hover:text-dark hover:bg-gray-100',
              'active:bg-white/80 disabled:bg-gray-200',
            ],
            variant === 'dark' && [
              'bg-gray-900 text-white',
              'border border-gray-600',
              'hover:bg-gray-800 active:bg-gray-700 disabled:bg-gray-700',
            ],
          ],
          //#endregion  //*======== Variants ===========
          'disabled:cursor-not-allowed',
          isLoading &&
            'relative text-transparent transition-none hover:text-transparent disabled:cursor-wait',
          className,
        )}
        {...rest}
      >
        <div className='relative flex items-center justify-center'>
          {isLoading && (
            <div
              className={cn(
                'absolute inset-0 flex items-center justify-center',
                'bg-inherit',
                'rounded-md',
              )}
            >
              <Loader2 className='animate-spin h-5 w-5' />
            </div>
          )}
          {LeftIcon && (
            <LeftIcon
              className={cn('mr-2 h-4 w-4', isLoading && 'invisible')}
              aria-hidden='true'
            />
          )}
          <span className={cn(isLoading && 'invisible')}>{children}</span>
          {RightIcon && (
            <RightIcon
              className={cn('ml-2 h-4 w-4', isLoading && 'invisible')}
              aria-hidden='true'
            />
          )}
        </div>
      </button>
    );
  },
);

export default Button;
</file>

<file path="src/components/buttons/IconButton.tsx">
import { Loader2 } from 'lucide-react';
import * as React from 'react';

import { cn } from '@/lib/utils';

const IconButtonVariant = [
  'primary',
  'outline',
  'ghost',
  'light',
  'dark',
] as const;

type IconButtonProps = {
  isLoading?: boolean;
  isDarkBg?: boolean;
  variant?: (typeof IconButtonVariant)[number];
  icon?: React.ComponentType<any>;
  classNames?: {
    icon?: string;
  };
} & React.ComponentPropsWithRef<'button'>;

const IconButton = React.forwardRef<
  HTMLButtonElement,
  IconButtonProps & {
    icon: React.ComponentType<any>;
    isLoading?: boolean;
  }
>(
  (
    {
      className,
      disabled: buttonDisabled,
      isLoading,
      variant = 'primary',
      isDarkBg = false,
      icon: Icon,
      classNames,
      ...rest
    },
    ref,
  ) => {
    const disabled = isLoading || buttonDisabled;

    return (
      <button
        ref={ref}
        type='button'
        disabled={disabled}
        className={cn(
          'inline-flex items-center justify-center rounded font-medium',
          'focus-visible:ring-primary-500 focus:outline-none focus-visible:ring',
          'shadow-sm',
          'transition-colors duration-75',
          'min-h-[28px] min-w-[28px] p-1 md:min-h-[34px] md:min-w-[34px] md:p-2',
          //#region  //*=========== Variants ===========
          [
            variant === 'primary' && [
              'bg-primary-500 text-white',
              'border-primary-600 border',
              'hover:bg-primary-600 hover:text-white',
              'active:bg-primary-700',
              'disabled:bg-primary-700',
            ],
            variant === 'outline' && [
              'text-primary-500',
              'border-primary-500 border',
              'hover:bg-primary-50 active:bg-primary-100 disabled:bg-primary-100',
              isDarkBg &&
                'hover:bg-gray-900 active:bg-gray-800 disabled:bg-gray-800',
            ],
            variant === 'ghost' && [
              'text-primary-500',
              'shadow-none',
              'hover:bg-primary-50 active:bg-primary-100 disabled:bg-primary-100',
              isDarkBg &&
                'hover:bg-gray-900 active:bg-gray-800 disabled:bg-gray-800',
            ],
            variant === 'light' && [
              'bg-white text-gray-700',
              'border border-gray-300',
              'hover:text-dark hover:bg-gray-100',
              'active:bg-white/80 disabled:bg-gray-200',
            ],
            variant === 'dark' && [
              'bg-gray-900 text-white',
              'border border-gray-600',
              'hover:bg-gray-800 active:bg-gray-700 disabled:bg-gray-700',
            ],
          ],
          //#endregion  //*======== Variants ===========
          'disabled:cursor-not-allowed',
          isLoading &&
            'relative text-transparent transition-none hover:text-transparent disabled:cursor-wait',
          className,
        )}
        {...rest}
      >
        <div className='relative flex items-center justify-center'>
          {isLoading && (
            <div className='absolute inset-0 flex items-center justify-center bg-inherit rounded-full'>
              <Loader2 className='animate-spin h-[0.9em] w-[0.9em]' />
            </div>
          )}
          {Icon && (
            <Icon className={cn(classNames?.icon, isLoading && 'invisible')} />
          )}
        </div>
      </button>
    );
  },
);

export default IconButton;
</file>

<file path="README.md">
# Next.js + Tailwind CSS + TypeScript Starter and Boilerplate

<div align="center">
  <h2>🔋 ts-nextjs-tailwind-starter</h2>
  <p>Next.js + Tailwind CSS + TypeScript starter packed with useful development features.</p>
  <p>Made by <a href="https://theodorusclarence.com">Theodorus Clarence</a></p>

[![GitHub Repo stars](https://img.shields.io/github/stars/theodorusclarence/ts-nextjs-tailwind-starter)](https://github.com/theodorusclarence/ts-nextjs-tailwind-starter/stargazers)
[![Depfu](https://badges.depfu.com/badges/fc6e730632ab9dacaf7df478a08684a7/overview.svg)](https://depfu.com/github/theodorusclarence/ts-nextjs-tailwind-starter?project_id=30160)
[![Last Update](https://img.shields.io/badge/deps%20update-every%20sunday-blue.svg)](https://shields.io/)

</div>

## Features

This repository is 🔋 battery packed with:

- ⚡️ Next.js 14 with App Router
- ⚛️ React 18
- ✨ TypeScript
- 💨 Tailwind CSS 3 — Configured with CSS Variables to extend the **primary** color
- 💎 Pre-built Components — Components that will **automatically adapt** with your brand color, [check here for the demo](https://tsnext-tw.thcl.dev/components)
- 🃏 Jest — Configured for unit testing
- 📈 Absolute Import and Path Alias — Import components using `@/` prefix
- 📏 ESLint — Find and fix problems in your code, also will **auto sort** your imports
- 💖 Prettier — Format your code consistently
- 🐶 Husky & Lint Staged — Run scripts on your staged files before they are committed
- 🤖 Conventional Commit Lint — Make sure you & your teammates follow conventional commit
- ⏰ Release Please — Generate your changelog by activating the `release-please` workflow
- 👷 Github Actions — Lint your code on PR
- 🚘 Automatic Branch and Issue Autolink — Branch will be automatically created on issue **assign**, and auto linked on PR
- 🔥 Snippets — A collection of useful snippets
- 👀 Open Graph Helper Function — Awesome open graph generated using [og](https://github.com/theodorusclarence/og), fork it and deploy!
- 🗺 Site Map — Automatically generate sitemap.xml
- 📦 Expansion Pack — Easily install common libraries, additional components, and configs.

See the 👉 [feature details and changelog](https://github.com/theodorusclarence/ts-nextjs-tailwind-starter/blob/main/CHANGELOG.md) 👈 for more.

You can also check all of the **details and demos** on my blog post:

- [One-stop Starter to Maximize Efficiency on Next.js & Tailwind CSS Projects](https://theodorusclarence.com/blog/one-stop-starter)

## Getting Started

### 1. Clone this template using one of the three ways

1. Use this repository as template

   **Disclosure:** by using this repository as a template, there will be an attribution on your repository.

   I'll appreciate if you do, so this template can be known by others too 😄

   ![Use as template](https://user-images.githubusercontent.com/55318172/129183039-1a61e68d-dd90-4548-9489-7b3ccbb35810.png)

2. Using `create-next-app`

   ```bash
   pnpm create next-app  -e https://github.com/theodorusclarence/ts-nextjs-tailwind-starter ts-pnpm
   ```

   If you still want to use **pages directory** (_is not actively maintained_) you can use this command

   ```bash
   npx create-next-app -e https://github.com/theodorusclarence/ts-nextjs-tailwind-starter/tree/pages-directory project-name
   ```

3. Using `degit`

   ```bash
   npx degit theodorusclarence/ts-nextjs-tailwind-starter YOUR_APP_NAME
   ```

4. Deploy to Vercel

   [![Deploy with Vercel](https://vercel.com/button)](https://vercel.com/new/git/external?repository-url=https%3A%2F%2Fgithub.com%2Ftheodorusclarence%2Fts-nextjs-tailwind-starter)

### 2. Install dependencies

It is encouraged to use **pnpm** so the husky hooks can work properly.

```bash
pnpm install
```

### 3. Run the development server

You can start the server using this command:

```bash
pnpm dev
```

Open [http://localhost:3000](http://localhost:3000) with your browser to see the result. You can start editing the page by modifying `src/pages/index.tsx`.

### 4. Change defaults

There are some things you need to change including title, urls, favicons, etc.

Find all comments with !STARTERCONF, then follow the guide.

Don't forget to change the package name in package.json

### 5. Commit Message Convention

This starter is using [conventional commits](https://www.conventionalcommits.org/en/v1.0.0/), it is mandatory to use it to commit changes.

## Projects using ts-nextjs-tailwind-starter

<!--
TEMPLATE
- [sitename](https://sitelink.com) ([Source](https://github.com/githublink))
- [sitename](https://sitelink.com)
-->

- [theodorusclarence.com](https://theodorusclarence.com) ([Source](https://github.com/theodorusclarence/theodorusclarence.com))
- [Notiolink](https://notiolink.thcl.dev/) ([Source](https://github.com/theodorusclarence/notiolink))
- [NextJs + Materia UI + Typescript](https://github.com/AlexStack/nextjs-materia-mui-typescript-hook-form-scaffold-boilerplate-starter)

Are you using this starter? Please add your page (and repo) to the end of the list via a [Pull Request](https://github.com/theodorusclarence/ts-nextjs-tailwind-starter/edit/main/README.md). 😃

## Expansion Pack 📦

This starter is now equipped with an [expansion pack](https://github.com/theodorusclarence/expansion-pack).

You can easily add expansion such as React Hook Form + Components, Storybook, and more just using a single command line.

<https://user-images.githubusercontent.com/55318172/146631994-e1cac137-1664-4cfe-950b-a96decc1eaa6.mp4>

Check out the [expansion pack repository](https://github.com/theodorusclarence/expansion-pack) for the commands

### App Router Update

Due to App Router update, the expansion pack is currently **outdated**. It will be updated in the future. You can still use them by copy and pasting the files.
</file>

<file path="package.json">
{
  "name": "ts-nextjs-tailwind-starter",
  "version": "0.1.0",
  "private": true,
  "scripts": {
    "dev": "next dev",
    "build": "next build",
    "start": "next start",
    "lint": "next lint",
    "lint:fix": "eslint src --fix && pnpm format",
    "lint:strict": "eslint --max-warnings=0 src",
    "typecheck": "tsc --noEmit --incremental false",
    "test:watch": "jest --watch",
    "test": "jest",
    "format": "prettier -w .",
    "format:check": "prettier -c .",
    "postbuild": "next-sitemap --config next-sitemap.config.js",
    "prepare": "husky install"
  },
  "dependencies": {
    "@radix-ui/react-select": "^2.1.7",
    "@supabase/supabase-js": "^2.49.4",
    "class-variance-authority": "^0.7.1",
    "clsx": "^2.1.1",
    "framer-motion": "^12.7.4",
    "lucide-react": "^0.438.0",
    "next": "^14.2.23",
    "react": "^18.3.1",
    "react-dom": "^18.2.0",
    "react-icons": "^5.4.0",
    "tailwind-merge": "^2.6.0",
    "tailwindcss-animate": "^1.0.7",
    "zod": "^3.24.1"
  },
  "devDependencies": {
    "@commitlint/cli": "^16.3.0",
    "@commitlint/config-conventional": "^16.2.4",
    "@ianvs/prettier-plugin-sort-imports": "^4.4.1",
    "@svgr/webpack": "^8.1.0",
    "@tailwindcss/forms": "^0.5.10",
    "@testing-library/jest-dom": "^5.17.0",
    "@testing-library/react": "^15.0.7",
    "@types/react": "^18.3.20",
    "@types/testing-library__jest-dom": "^5.14.9",
    "@typescript-eslint/eslint-plugin": "^5.62.0",
    "@typescript-eslint/parser": "^5.62.0",
    "autoprefixer": "^10.4.20",
    "eslint": "^8.57.1",
    "eslint-config-next": "^14.2.23",
    "eslint-config-prettier": "^8.10.0",
    "eslint-plugin-simple-import-sort": "^7.0.0",
    "eslint-plugin-unused-imports": "^2.0.0",
    "husky": "^7.0.4",
    "jest": "^27.5.1",
    "lint-staged": "^12.5.0",
    "next-router-mock": "^0.9.0",
    "next-sitemap": "^2.5.28",
    "postcss": "^8.5.1",
    "prettier": "^3.5.3",
    "prettier-plugin-tailwindcss": "^0.6.11",
    "tailwindcss": "^3.4.17",
    "typescript": "^4.9.5"
  },
  "lint-staged": {
    "**/*.{js,jsx,ts,tsx}": [
      "eslint",
      "prettier -w"
    ],
    "**/*.{json,css,scss,md,webmanifest}": [
      "prettier -w"
    ]
  }
}
</file>

</files>
